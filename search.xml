<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>12-hour clock using six BCD digits</title>
    <url>/posts/8cc45ed0/</url>
    <content><![CDATA[<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>Digital IC</category>
        <category>HDL Bits</category>
      </categories>
      <tags>
        <tag>circuits</tag>
      </tags>
  </entry>
  <entry>
    <title>Git for novice</title>
    <url>/posts/f05478c5/</url>
    <content><![CDATA[<h2 id="1ã€Git-and-GitHub"><a href="#1ã€Git-and-GitHub" class="headerlink" title="1ã€Git and GitHub"></a>1ã€Git and GitHub</h2><p><code>Github</code> å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªåŸºäºGitçš„ç³»ç»Ÿï¼Œå®ƒæä¾›äº†ä»“åº“çš„å¯è§†åŒ–ã€‚æ˜¯ä¸€ä¸ª<code>è¿œç¨‹æ‰˜ç®¡ä»“åº“</code>ã€‚å¦‚æœæ˜¯publicï¼Œå…¶ä»–äººå¯ä»¥éšæ„æŸ¥çœ‹ï¼Œä¿®æ”¹ã€‚å¦‚æœæ˜¯privateåªæœ‰ä½ è‡ªå·±å¯ä»¥æŸ¥çœ‹äº†ã€‚å¦‚æœä¸ºäº†å®‰å…¨ï¼Œå¯ä»¥å›¢é˜Ÿè‡ªå·±æ­å»ºä¸€ä¸ªgitæœåŠ¡å™¨ã€‚</p><p><code>Git</code>å¤§å®¶éƒ½å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ(Distributed version control system)</p><h2 id="2ã€Why-do-we-use-git"><a href="#2ã€Why-do-we-use-git" class="headerlink" title="2ã€Why do we use git"></a>2ã€Why do we use git</h2><ol><li>å¯ä»¥æ›´å¥½åœ°åœ¨GitHubä¸Šå¼€å‘ï¼Œåˆ†äº«å•Šã€‚</li><li>å¤šäººååŒå¼€å‘ã€‚</li><li>ç‰ˆæœ¬æ§åˆ¶ï¼Œå¯ä»¥ä»»æ„å›æ»šåˆ°ä¹‹å‰æŸä¸ªç‰ˆæœ¬ã€‚</li></ol><h2 id="3ã€How-do-we-use-git"><a href="#3ã€How-do-we-use-git" class="headerlink" title="3ã€How do we use git"></a>3ã€How do we use git</h2><p><img src="http://image.beenli.cn/img/20200428/AdQsxqK9vslE.png?imageslim" srcset="/img/loading.gif" alt="mark"></p><h3 id="åœºæ™¯1"><a href="#åœºæ™¯1" class="headerlink" title="åœºæ™¯1"></a>åœºæ™¯1</h3><blockquote><p>åœ¨GitHubä¸Šçœ‹åˆ°ä¸€ä¸ªä¸é”™çš„é¡¹ç›®ï¼Œæƒ³è¦ç ”ç©¶ï¼Œå­¦ä¹ ä¸ºç›®çš„ã€‚</p></blockquote><ol><li><p>å…ˆforkä¸€ä»½åˆ°è‡ªå·±çš„GitHubä¸Šã€‚</p></li><li><p>cloneåˆ°æœ¬åœ°</p><p>-o æŒ‡å®šè¿œç¨‹ä»“åº“çš„åå­—ï¼Œå¦åˆ™é»˜è®¤ä¸º<code>origin</code></p><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> [-b &lt;æŒ‡å®šåˆ†æ”¯å&gt;]&lt;è¿œç¨‹ä»“åº“åœ°å€&gt; [-o booyah]  
é»˜è®¤æ˜¯å…‹éš†æ‰€æœ‰åˆ†æ”¯ã€‚</code></pre></li><li><p>è¿›è¡Œè‡ªå·±çš„å¼€å‘ã€‚ä¿®æ”¹æ–‡ä»¶å</p><p>æ­¤æ—¶git statuså¯ä»¥çœ‹åˆ°ï¼šä¿®æ”¹è¿‡çš„æ–‡ä»¶çº¢è‰²æ ‡å¤„ã€‚<code>Untracked files</code><img src="http://image.beenli.cn/img/20200427/3yURcSj2qBqU.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><pre><code class="hljs bash">git add ./[filename]			// æŠŠä¿®æ”¹è¿‡çš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºã€‚</code></pre><p><img src="http://image.beenli.cn/img/20200427/ri8cAxnmujYg.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><p>æ­¤æ—¶æ–‡ä»¶å˜æˆç»¿è‰²ã€‚å³å·²ç»æ·»åŠ åˆ°äº†æš‚å­˜åŒºã€‚</p></li><li><p>æäº¤</p><pre><code class="hljs bash">git commit -m <span class="hljs-string">"æ·»åŠ æ–‡ä»¶çš„è¯´æ˜"</span>			// æäº¤</code></pre><p>æäº¤å®Œæˆäº†ï¼Œå·¥ä½œç›®å½•åº”è¯¥æ˜¾ç¤ºæ˜¯ç©ºçš„ã€‚</p></li><li><p>æ¨é€åˆ°è¿œç¨‹ä»“åº“</p><pre><code class="hljs bash">git pull origin [branch name] 			// æ¨é€åˆ°æŒ‡å®šä»“åº“çš„æŒ‡å®šåˆ†æ”¯ä¸Šã€‚</code></pre><p><img src="http://image.beenli.cn/img/20200427/aTKLfLxC1XUc.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p></li></ol><h3 id="åœºæ™¯2"><a href="#åœºæ™¯2" class="headerlink" title="åœºæ™¯2"></a>åœºæ™¯2</h3><blockquote><p>è‡ªå·±æ–°å»ºä¸€ä¸ªä»“åº“ã€‚åšé¡¹ç›®å¼€å‘ã€‚</p></blockquote><ol><li><p>åˆå§‹åŒ–ä¸€ä¸ªæœ¬åœ°ä»“åº“</p><pre><code class="hljs bash">git init xxx	// æ–°å»ºä¸€ä¸ªåä¸ºxxxçš„ä»“åº“</code></pre></li><li><p>è¿›å…¥ä»“åº“ï¼Œç„¶åå°±å¯ä»¥å¼€å‘äº†ã€‚</p><pre><code class="hljs bash"><span class="hljs-built_in">cd</span>  xxx 		// æ­¤ç›®å½•å°±æ˜¯å·¥ç¨‹æ ¹ç›®å½•ã€‚</code></pre></li><li><p>å¦‚æœè¦ä¸Šä¼ åˆ°GitHubä¸Šã€‚å³è¿œç«¯gitæœåŠ¡å™¨</p><ul><li><p>é¦–å…ˆåœ¨GitHubä¸Šæ–°å»ºä¸€ä¸ªä»“åº“ã€‚</p></li><li><p>æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“å»ºç«‹è”ç³»ã€‚</p><pre><code class="hljs axapta">git remote add origin &lt;<span class="hljs-keyword">server</span>&gt;	<span class="hljs-comment">// ä¸GitHubä»“åº“å»ºç«‹è”ç³». origin å¯ä»¥æ¢æˆä»»æ„åå­—ã€‚</span></code></pre><p><img src="http://image.beenli.cn/img/20200427/9id7SRqNtn2j.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><blockquote><p>å¯ä»¥çœ‹åˆ°æˆ‘é€šè¿‡origin pullä¸ä¸Šå»ã€‚å› ä¸ºæˆ‘è¿æ¥çš„æ˜¯remote_nameã€‚</p></blockquote></li><li><p>pushåˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Š</p><pre><code class="hljs bash">git push origin master 			// æ¨é€åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Š</code></pre></li></ul><p>å¦‚æœæ˜¯å…‹éš†è¿œç¨‹ä»“åº“çš„è¯ï¼Œé‚£ä¹ˆå¯ä»¥è·³è¿‡remoteï¼ˆå› ä¸ºæœ¬åœ°masterå·²ç»å’Œè¿œç¨‹masterè”ç³»ä¸Šäº†)ã€‚ç›´æ¥æ¨é€åˆ°è¿œç¨‹æœåŠ¡å™¨ã€‚</p></li></ol><h2 id="4ã€common-commands1"><a href="#4ã€common-commands1" class="headerlink" title="4ã€common commands1"></a>4ã€common commands<a href="#link"><sup>1</sup></a></h2><h3 id="1ã€branchï¼ˆåˆ†æ”¯"><a href="#1ã€branchï¼ˆåˆ†æ”¯" class="headerlink" title="1ã€branchï¼ˆåˆ†æ”¯)"></a>1ã€branchï¼ˆåˆ†æ”¯)</h3><h4 id="1ã€æ–°å»ºåˆ†æ”¯"><a href="#1ã€æ–°å»ºåˆ†æ”¯" class="headerlink" title="1ã€æ–°å»ºåˆ†æ”¯"></a>1ã€æ–°å»ºåˆ†æ”¯</h4><pre><code class="hljs bash">git checkout -b xxx		// æ–°å»ºåˆ†æ”¯å¹¶åˆ‡æ¢åˆ°xxx
git branch xxx			// åªæ˜¯æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä»ç•™åœ¨æœ¬åœ°ã€‚ï¼ˆæ–°å»ºçš„åˆ†æ”¯å¤åˆ»ç›®åˆ†æ”¯)</code></pre><blockquote><p>git branch [-b branchName commitId] ä»æŒ‡å®šåˆ†æ”¯å’Œcommitå·ä¸Šå¼€å§‹æ–°çš„åˆ†æ”¯</p></blockquote><h4 id="2ã€åˆ†æ”¯åˆ‡æ¢"><a href="#2ã€åˆ†æ”¯åˆ‡æ¢" class="headerlink" title="2ã€åˆ†æ”¯åˆ‡æ¢"></a>2ã€åˆ†æ”¯åˆ‡æ¢</h4><pre><code class="hljs bash">git branch [-a]				//æŸ¥çœ‹åˆ†æ”¯
git checkout xxx			//åˆ‡æ¢åˆ°xxxåˆ†æ”¯</code></pre><blockquote><p>git branch å‚æ•°-a: æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ï¼ŒåŒ…æ‹¬è¿œç«¯çš„åˆ†æ”¯ã€‚ -v æŸ¥çœ‹åˆ†æ”¯æŒ‡å‘çš„commitã€‚ â€”remoteæŸ¥çœ‹è¿œç¨‹åˆ†æ”¯</p></blockquote><h4 id="3ã€åˆå¹¶åˆ†æ”¯"><a href="#3ã€åˆå¹¶åˆ†æ”¯" class="headerlink" title="3ã€åˆå¹¶åˆ†æ”¯"></a>3ã€åˆå¹¶åˆ†æ”¯</h4><ol><li><p>å…ˆæŠŠä½ æ¬¡è¦åˆ†æ”¯æäº¤å®Œå…¨ã€‚</p></li><li><p>åˆ‡æ¢åˆ°ä½ è¦åˆå¹¶å…¶ä»–åˆ†æ”¯çš„ä¸»åˆ†æ”¯ä¸Š</p></li><li><p>åˆå¹¶</p><pre><code class="hljs bash">git merge <span class="hljs-built_in">test</span>			// åœ¨ä¸»åˆ†æ”¯ä¸Šåˆå¹¶<span class="hljs-built_in">test</span>åˆ†æ”¯</code></pre><p><img src="http://image.beenli.cn/img/20200427/GXOtI8DdGor8.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p></li></ol><blockquote><p>å¯ä»¥çœ‹åˆ°å·²ç»åˆå¹¶äº†test1åˆ†æ”¯ã€‚ç°åœ¨å®ƒä»¬æŒ‡å‘åŒä¸€ä¸ªcommitã€‚</p><p>å¦‚æœé‡åˆ°å†²çªï¼Œæ‰‹åŠ¨åˆ¤æ–­å“ªä¸€ä¸ªä¿®æ”¹ç•™ä¸‹ã€‚</p></blockquote><h4 id="4ã€åˆ é™¤åˆ†æ”¯"><a href="#4ã€åˆ é™¤åˆ†æ”¯" class="headerlink" title="4ã€åˆ é™¤åˆ†æ”¯"></a>4ã€åˆ é™¤åˆ†æ”¯</h4><pre><code class="hljs bash">git branch -d [branch name]

git push origin --delete [branch name]  // åˆ é™¤è¿œç¨‹åˆ†æ”¯
$ git push origin --delete testing
To github.com:BeenLi/learn_git.git
 - [deleted]         testing</code></pre><h4 id="5ã€è¿œç¨‹åˆ†æ”¯"><a href="#5ã€è¿œç¨‹åˆ†æ”¯" class="headerlink" title="5ã€è¿œç¨‹åˆ†æ”¯"></a>5ã€è¿œç¨‹åˆ†æ”¯</h4><pre><code class="hljs bash">$ git ls-remote		// æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯

From git@github.com:BeenLi/learn_git.git
6fc7758ee27a73196a81391efd803dc19541eb88        HEAD
6fc7758ee27a73196a81391efd803dc19541eb88        refs/heads/master
807b956e7a57eef2f148dc7cb5b14ae3992955e6        refs/heads/testing
807b956e7a57eef2f148dc7cb5b14ae3992955e6        refs/pull/1/head
998239f25772ea809310d9f92c9e96a67c158b82        refs/pull/1/merge

$ git remote show	// æŸ¥çœ‹è¿œç¨‹ä»“åº“åå­—
remote_name</code></pre><blockquote><p>â€œoriginâ€ æ˜¯å½“ä½ è¿è¡Œ git clone æ—¶é»˜è®¤çš„è¿œç¨‹ä»“åº“åå­—</p></blockquote><h4 id="6ã€è·Ÿè¸ªåˆ†æ”¯"><a href="#6ã€è·Ÿè¸ªåˆ†æ”¯" class="headerlink" title="6ã€è·Ÿè¸ªåˆ†æ”¯"></a>6ã€è·Ÿè¸ªåˆ†æ”¯</h4><pre><code class="hljs armasm"><span class="hljs-symbol">git</span> checkout -<span class="hljs-keyword">b </span>[<span class="hljs-keyword">branch] </span>[remotename]/[<span class="hljs-keyword">branch]</span>
<span class="hljs-keyword"></span>
<span class="hljs-keyword">git </span>checkout --track origin/serverfix		// å¿«æ·å‘½ä»¤
å½“å…‹éš†ä¸€ä¸ªä»“åº“æ—¶ï¼Œå®ƒé€šå¸¸ä¼šè‡ªåŠ¨åœ°åˆ›å»ºä¸€ä¸ªè·Ÿè¸ª origin/master çš„ master åˆ†æ”¯

<span class="hljs-symbol">git</span> <span class="hljs-keyword">branch </span>--set-upstream-to origin/remoteBranchName localBranchName ä¿®æ”¹è¿œç¨‹åˆ†æ”¯
<span class="hljs-symbol">git</span> <span class="hljs-keyword">branch </span>--unset-upstream					// æ’¤é”€è·Ÿè¸ªè¿œç¨‹åˆ†æ”¯</code></pre><p><img src="http://image.beenli.cn/img/20200428/4tSisNi0opQ7.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><blockquote><p>å¯ä»¥çœ‹åˆ° è®¾ç½®äº†åˆ†æ”¯test3 è·Ÿè¸ª è¿œç«¯çš„masteråˆ†æ”¯ã€‚ç°åœ¨åˆ†æ”¯ä¸masteråˆ†æ”¯ç›¸åŒã€‚</p><p>ç°åœ¨ï¼Œæœ¬åœ°åˆ†æ”¯ test ä¼šè‡ªåŠ¨ä» remote_name/master æ‹‰å–ã€‚</p></blockquote><pre><code class="hljs angelscript">$ git branch -vv
  master <span class="hljs-number">2</span>b2be16 ä¿®æ”¹æ–‡ä»¶ï¼Œåˆ¶é€ åˆå¹¶å†²çª
  test1  <span class="hljs-number">2</span>b2be16 ä¿®æ”¹æ–‡ä»¶ï¼Œåˆ¶é€ åˆå¹¶å†²çª
  test2  <span class="hljs-number">420f</span>721 ç¬¬äºŒæ¬¡æœ¬åœ°æäº¤
  testing e051a6f [remote_name/testing: ahead <span class="hljs-number">1</span>] æµ‹è¯•è¿½è¸ªåˆ†æ”¯æƒ…å†µ
* test3  <span class="hljs-number">4f</span>db7bd [remote_name/master] æµ‹è¯•æœ¬åœ°æäº¤

å¯ä»¥çœ‹åˆ°test3 æ˜¯masterçš„è·Ÿè¸ªåˆ†æ”¯ã€‚
testingåˆ†æ”¯é¢†å…ˆ<span class="hljs-number">1</span>ã€‚è¡¨ç¤ºæœ‰æœ¬åœ°æœ‰ä¸€ä¸ªcommitæ²¡æœ‰pushåˆ°æœåŠ¡å™¨ä¸Šã€‚</code></pre><h4 id="7ã€åˆ†æ”¯æ‹‰å–"><a href="#7ã€åˆ†æ”¯æ‹‰å–" class="headerlink" title="7ã€åˆ†æ”¯æ‹‰å–"></a>7ã€åˆ†æ”¯æ‹‰å–</h4><pre><code class="hljs bash">git pull  == git fetch + git merge
git fetch ä¸ä¼šä¿®æ”¹å½“å‰å·¥ä½œåŒºçš„æ–‡ä»¶ã€‚å®ƒåªä¼šè·å–æ•°æ®ç„¶åè®©ä½ è‡ªå·±åˆå¹¶ã€‚</code></pre><h4 id="8ã€ä¸Šä¼ åˆ†æ”¯"><a href="#8ã€ä¸Šä¼ åˆ†æ”¯" class="headerlink" title="8ã€ä¸Šä¼ åˆ†æ”¯"></a>8ã€ä¸Šä¼ åˆ†æ”¯</h4><pre><code class="hljs bash">git push origin localbranch:remotebranch
å¦‚æœæ·»åŠ äº†è¿œç¨‹åˆ†æ”¯å°±ç›´æ¥pushäº†ã€‚</code></pre><h3 id="2ã€reset-æ’¤é”€"><a href="#2ã€reset-æ’¤é”€" class="headerlink" title="2ã€reset (æ’¤é”€)"></a>2ã€reset (æ’¤é”€)</h3><p><a href="#link">å‚è€ƒğŸ”—</a></p><p><img src="http://image.beenli.cn/img/20200428/CUvCyfwWR8h9.png?imageslim" srcset="/img/loading.gif" alt="mark"></p><h4 id="1ã€reset-â€”hard"><a href="#1ã€reset-â€”hard" class="headerlink" title="1ã€reset â€”hard"></a>1ã€reset â€”hard</h4><p>reset â€”hardï¼šé‡ç½®stageåŒºå’Œå·¥ä½œç›®å½•(ä¼šåœ¨é‡ç½® <strong>HEAD</strong> å’Œ<strong>branch</strong>çš„åŒæ—¶ï¼Œé‡ç½®stageåŒºå’Œå·¥ä½œç›®å½•é‡Œçš„å†…å®¹)</p><p>å³å›åˆ°ä¸Šä¸€æ¬¡commitçš„ä½ç½®ã€‚ï¼Œå…¨éƒ¨æ¸…ç©ºã€‚</p><h4 id="2ã€reset-â€”soft"><a href="#2ã€reset-â€”soft" class="headerlink" title="2ã€reset â€”soft"></a>2ã€reset â€”soft</h4><p>reset â€”softï¼šä¿ç•™å·¥ä½œç›®å½•å’Œæš‚å­˜åŒºä¸­çš„å†…å®¹ï¼Œå¹¶æŠŠé‡ç½® HEAD æ‰€å¸¦æ¥çš„æ–°çš„å·®å¼‚æ”¾è¿›æš‚å­˜åŒº</p><p>å³ä½ ä¹‹å‰commitçš„æ–‡ä»¶ï¼Œé€€å›åˆ°<code>stage</code>ã€‚éœ€è¦é‡æ–°æäº¤ã€‚</p><h4 id="3ã€reset-â€”mixed"><a href="#3ã€reset-â€”mixed" class="headerlink" title="3ã€reset [â€”mixed]"></a>3ã€reset [â€”mixed]</h4><p>reset: ä¿ç•™å·¥ä½œç›®å½•ï¼Œå¹¶æ¸…ç©ºæš‚å­˜åŒº</p><p>ä¹Ÿå°±æ˜¯ä½ è¦é‡æ–°addï¼Œç„¶åcommitã€‚</p><div id="link"></div><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>[1] <a href="https://blog.csdn.net/qq_15037231/article/details/79137753" rel="external nofollow noreferrer">åˆ†æ”¯ç”¨æ³•</a></p><p>[2] <a href="https://www.jianshu.com/p/c2ec5f06cf1a" rel="external nofollow noreferrer">resetç”¨æ³•</a></p><p>[3] <a href="https://www.runoob.com/manual/git-guide/" rel="external nofollow noreferrer">ç®€æ˜æ•™ç¨‹</a></p><p>[4] <a href="https://baijiahao.baidu.com/s?id=1664197276209808372&amp;wfr=spider&amp;for=pc" rel="external nofollow noreferrer">åŠ¨æ€è¿‡ç¨‹</a></p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>Software</category>
        <category>Git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Gate-and-switch-level modeling</title>
    <url>/posts/aff089ac/</url>
    <content><![CDATA[<h1 id="Gate-and-switch-level-modeling"><a href="#Gate-and-switch-level-modeling" class="headerlink" title="Gate-and-switch-level modeling"></a><center>Gate-and-switch-level modeling</center></h1><h2 id="1ã€verilog-std-1364-20051"><a href="#1ã€verilog-std-1364-20051" class="headerlink" title="1ã€verilog-std-1364-20051"></a>1ã€verilog-std-1364-2005<a href="#link"><sup>1</sup></a></h2><blockquote><p>There are <code>14 logic gates</code> and <code>12 switches</code> predefined in the Verilog HDL to provide the gate- and switch-level modeling facility. Modeling with logic gates and switches has the following advantages:</p></blockquote><p>â€” Gates provide a much closer one-to-one <code>mapping</code> between the actual circuit and the model.<br>â€” There is no <code>continuous assignment</code> equivalent to the <code>bidirectional transfer gate</code>.</p><p>Verilog1364-2005æ ‡å‡†è§„å®šäº†26ä¸ªåŸºæœ¬åŸä»¶ï¼Œå…¶ä¸­14ä¸ªé—¨çº§åŸä»¶ï¼Œ12ä¸ªå¼€å…³çº§åŸä»¶ã€‚</p><p>å¯¹äºè¿™äº›åŸä»¶ä¸éœ€è¦å®šä¹‰ç›´æ¥è°ƒç”¨ã€‚</p><h2 id="2ã€é—¨çº§å»ºæ¨¡2"><a href="#2ã€é—¨çº§å»ºæ¨¡2" class="headerlink" title="2ã€é—¨çº§å»ºæ¨¡2"></a>2ã€é—¨çº§å»ºæ¨¡<a href="#link"><sup>2</sup></a></h2><p><img src="http://image.beenli.cn/global/20200405/86dMFOGFTOna.png?imageslim" srcset="/img/loading.gif" alt="å†…ç½®é—¨çº§å…ƒä»¶"></p><ol><li><p>å¤šè¾“å…¥é—¨ï¼š</p><pre><code class="hljs verilog">n_input_gate_instance ::= [ name_of_gate_instance ] 
( output_terminal , input_terminal { , input_terminal } ) 

<span class="hljs-keyword">and</span> A1(out1, in1, in2);
<span class="hljs-keyword">or</span>  O1(outa, inb, inc, ind);
<span class="hljs-keyword">xor</span> X1(outx, inx, iny, inz, inw);</code></pre></li><li><p>å¤šè¾“å‡ºé—¨è°ƒç”¨:</p><pre><code class="hljs verilog">n_output_gate_instance ::= [ name_of_gate_instance ] 
( output_terminal { , output_terminal } , input_terminal ) 

<span class="hljs-keyword">buf</span> BUF_1(bufout1, bufout2, bufout3, bufin);
<span class="hljs-keyword">not</span> NOT_1(out1, out2, in);</code></pre></li><li><p>ä¸‰æ€é—¨è°ƒç”¨:</p><pre><code class="hljs verilog">enable_gate_instance ::= [ name_of_gate_instance ] 
( output_terminal , input_terminal , enable_terminal )

<span class="hljs-keyword">bufif1</span> BF1(data_bus, data, enable);</code></pre></li><li><p>äºŒä¸ªç”µé˜»</p><p>The instance declaration of a pullup or a pulldown source shall begin with one of the following keywords: <code>pullup</code> , <code>pulldown</code></p><pre><code class="hljs verilog">pull_gate_instance ::= [ name_of_gate_instance ] ( output_terminal )  

<span class="hljs-keyword">pullup</span>   (<span class="hljs-keyword">strong1</span>)  p1 (neta), p2 (netb);

In <span class="hljs-keyword">this</span> example, the  p1  <span class="hljs-keyword">instance</span> drives  neta  <span class="hljs-keyword">and</span> the  p2  <span class="hljs-keyword">instance</span> drives netb  <span class="hljs-keyword">with</span> <span class="hljs-keyword">strong</span> strength.</code></pre></li><li><p>æ³¨æ„: é—¨çº§åŸä»¶çš„ç«¯å£åˆ—è¡¨éƒ½å›ºå®šå¥½äº†ï¼Œå¯ä»¥ä¸ç”¨å®šä¹‰ä¸­é—´è¿æ¥ä¿¡å·ç±»å‹(wire)</p><hr></li></ol><h3 id="ç¤ºä¾‹ï¼š"><a href="#ç¤ºä¾‹ï¼š" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h3><pre><code class="hljs verilog"><span class="hljs-comment">// é—¨çº§å»ºæ¨¡å®ç°æœ€å°é¡¹è¡¨è¾¾å¼</span>
<span class="hljs-comment">// F(a, b, c) = m1 + m2 + m3 + m6 + m7 = (!a)c + b</span>
<span class="hljs-keyword">module</span> zuixiaoxiang(out, a, b, c);
    <span class="hljs-keyword">input</span> a, b, c;
    <span class="hljs-keyword">output</span> out;
    <span class="hljs-keyword">wire</span> s1, s2;
    <span class="hljs-keyword">not</span> U1(s1, a);
    <span class="hljs-keyword">and</span> U2(s2, s1, c);
    <span class="hljs-keyword">or</span> U3(out, s2, b);
<span class="hljs-keyword">endmodule</span></code></pre><p><img src="http://image.beenli.cn/global/20200405/ADk6SPgKBGVt.jpg?imageslim" srcset="/img/loading.gif" alt="é—¨çº§"></p><h2 id="3ã€å¼€å…³çº§å»ºæ¨¡"><a href="#3ã€å¼€å…³çº§å»ºæ¨¡" class="headerlink" title="3ã€å¼€å…³çº§å»ºæ¨¡"></a>3ã€å¼€å…³çº§å»ºæ¨¡</h2><ol><li>MOS switches</li></ol><div class="table-container"><table><thead><tr><th><strong>cmos</strong></th><th><strong>pmos</strong></th><th><strong>nmos</strong></th></tr></thead><tbody><tr><td><strong>rcmos</strong></td><td><strong>rnmos</strong></td><td><strong>rpmos</strong></td></tr></tbody></table></div><blockquote><p>rmos : ä»£è¡¨æ™¶ä½“ç®¡å¯¼é€šæ—¶æºæ¼æœ‰è¾ƒé«˜çš„é˜»æŠ—(<code>impedance</code>)</p></blockquote><pre><code class="hljs verilog">The following example declares a <span class="hljs-keyword">pmos</span> switch:

<span class="hljs-keyword">pmos</span>  p1 (out, data, control);

The <span class="hljs-keyword">output</span> is  out , the data <span class="hljs-keyword">input</span> is  data , <span class="hljs-keyword">and</span> the control <span class="hljs-keyword">input</span> is 
control<span class="hljs-variable">.The</span> <span class="hljs-keyword">instance</span> name is  p1 .</code></pre><ol><li>Bidirectional pass switches(åŒå‘å¼€å…³)</li></ol><div class="table-container"><table><thead><tr><th><strong>tran</strong></th><th><strong>tranif1</strong></th><th><strong>tranif0</strong></th></tr></thead><tbody><tr><td><strong>rtran</strong></td><td><strong>rtranif1</strong></td><td><strong>rtranif0</strong></td></tr></tbody></table></div><blockquote><p>The bidirectional pass switches shall not delay signals propagating through them. When tranif0, tranif1,rtranif0, or rtranif1 devices are turned off, they shall block signals; and when they are turned on, they shall pass signals. The tran and rtran devices cannot be turned off, and they shall always pass signals.(åŒå‘å¼€å…³æ²¡æœ‰ä¼ æ’­å»¶æ—¶)</p></blockquote><pre><code class="hljs verilog">The following example declares an <span class="hljs-keyword">instance</span> of <span class="hljs-keyword">tranif1</span>:

<span class="hljs-keyword">tranif1</span>  t1 (inout1,inout2,control);

The bidirectional terminals are  inout1  <span class="hljs-keyword">and</span>  inout2 . The control <span class="hljs-keyword">input</span> is  control . The <span class="hljs-keyword">instance</span> name is t1 .</code></pre><hr><h3 id="ç¤ºä¾‹ï¼š-1"><a href="#ç¤ºä¾‹ï¼š-1" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h3><pre><code class="hljs verilog"><span class="hljs-comment">// 2è¾“å…¥ä¸é—¨</span>
<span class="hljs-comment">// time:2020-04-05</span>
<span class="hljs-keyword">module</span> and2_1(out, a, b);
    <span class="hljs-keyword">input</span> a,b;
    <span class="hljs-keyword">output</span> out;
    <span class="hljs-keyword">wire</span> s1, s2;
    <span class="hljs-keyword">supply0</span> Gnd;
    <span class="hljs-keyword">supply1</span> Vdd;
    <span class="hljs-keyword">pmos</span> U1(s1, Vdd, a);
    <span class="hljs-keyword">pmos</span> U2(s1, Vdd, b);
    <span class="hljs-keyword">nmos</span> U3(s1, s2, a);
    <span class="hljs-keyword">nmos</span> U4(s2, Gnd, b);
    <span class="hljs-keyword">pmos</span> U5(out, Vdd, s1);
    <span class="hljs-keyword">nmos</span> U6(out, Gnd, s1);
<span class="hljs-keyword">endmodule</span></code></pre><p><img src="http://image.beenli.cn/img/20200405/UWkPoOqPACnO.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><p>quarter II ç»¼åˆä¸äº†ï¼Œæ²¡åŠæ³•ç›´æ¥çœ‹viewerã€‚åªèƒ½æŠŠä¹¦ä¸Šçš„å›¾æ‰’æ¥äº†ã€‚</p><hr><h4 id="ç»ˆäºæ‰¾åˆ°äº†ä¸€æ¬¾RTLçº§ï¼Œgateçº§ï¼Œå¼€å…³çº§debuggerå’Œviewerçš„è½¯ä»¶"><a href="#ç»ˆäºæ‰¾åˆ°äº†ä¸€æ¬¾RTLçº§ï¼Œgateçº§ï¼Œå¼€å…³çº§debuggerå’Œviewerçš„è½¯ä»¶" class="headerlink" title="ç»ˆäºæ‰¾åˆ°äº†ä¸€æ¬¾RTLçº§ï¼Œgateçº§ï¼Œå¼€å…³çº§debuggerå’Œviewerçš„è½¯ä»¶"></a>ç»ˆäºæ‰¾åˆ°äº†ä¸€æ¬¾RTLçº§ï¼Œgateçº§ï¼Œå¼€å…³çº§debuggerå’Œviewerçš„è½¯ä»¶</h4><p><a href="http://www.concept.de/SpiceVision.html" rel="external nofollow noreferrer">trainsistor-level debugger and viewer</a></p><p>ä½†æ˜¯ç›®å‰ä¸‹è½½ä¸äº†ï¼Œå¾—æ‰¾å®¢æœè”ç³»ã€‚ä¸çŸ¥æœ‰äººæœ‰ç”¨è¿‡è¿™æ¬¾è½¯ä»¶æ²¡æœ‰ã€‚æœ‰çš„è¯è¯·ä½ ä¸€å®šå‘Šè¯‰æˆ‘ã€‚</p><h2 id="Renference"><a href="#Renference" class="headerlink" title="Renference"></a>Renference</h2><div id="link"></div><p>[1] <a href="https://standards.ieee.org/standard/1364-2005.html" rel="external nofollow noreferrer">verilog-std-1364-2005</a></p><p>[2] <a href="">è”¡è§‰å¹³.2015.Verilog HDL æ•°å­—é›†æˆç”µè·¯é«˜çº§ç¨‹åºè®¾è®¡ 31P</a></p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>Digital IC</category>
        <category>verilog</category>
      </categories>
      <tags>
        <tag>specification</tag>
      </tags>
  </entry>
  <entry>
    <title>From 1000Hz clock to 1Hz--OneHertz</title>
    <url>/posts/8cdff568/</url>
    <content><![CDATA[<blockquote><p>problem linkï¼š<a href="https://hdlbits.01xz.net/wiki/Exams/ece241_2014_q7b" rel="external nofollow noreferrer">https://hdlbits.01xz.net/wiki/Exams/ece241_2014_q7b</a></p></blockquote><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><blockquote><p>ä»é¢‘ç‡ä¸º1000Hzçš„æ—¶é’Ÿä¸­å¾—åˆ°é¢‘ç‡ä¸º1Hzçš„ä¿¡å·(<code>OneHertz</code>)ï¼Œå®ƒç”¨æ¥é©±åŠ¨ä¸€ç³»åˆ—æ—¶/åˆ†/ç§’è®¡æ•°å™¨çš„ä½¿èƒ½ä¿¡å·(Enable signal)ä»¥æ­¤åˆ›å»ºä¸€ä¸ªæ•°å­—æ—¶é’Ÿå¢™(digital wall clock)ã€‚å› ä¸ºéœ€è¦æ—¶é’Ÿæ¯ç§’è®¡æ•°ä¸€æ¬¡ï¼ŒOneHertzä¿¡å·å¿…é¡»æ¯ç§’å‡†ç¡®åœ°æ–­è¨€ä¸€ä¸ªå‘¨æœŸ(å‘¨æœŸä¸º1ç§’ï¼Œä¸”æ¯å‘¨æœŸåªèƒ½ç¿»è½¬ä¸€æ¬¡)ã€‚</p></blockquote><h2 id="Problem-Description"><a href="#Problem-Description" class="headerlink" title="Problem Description"></a>Problem Description</h2><blockquote><p>ç”¨BCDè®¡æ•°å™¨å’Œå°‘è®¸å…¶å®ƒçš„é—¨æ„å»º<code>åˆ†é¢‘å™¨</code>(frequency divider)ã€‚å¹¶ä¸”è¾“å‡ºä½ æ‰€ä½¿ç”¨çš„BCDè®¡æ•°å™¨çš„ä½¿èƒ½ä¿¡å·ã€‚(c_enable[0] for the fastest counter, c_enable[2] for the slowest)</p><p>å¦‚ä¸‹çš„BCDè®¡æ•°å™¨å·²ç»æä¾›ç»™ä½ ï¼Œ<code>Enable</code>ä¸ºé«˜ç”µå¹³è®¡æ•°å™¨æ‰èƒ½æ­£å¸¸å·¥ä½œï¼Œ<code>Reset</code>ä¸ºåŒæ­¥é«˜ç”µå¹³ç½®ä½0ï¼›<br></p><pre><code class="hljs verilog"><span class="hljs-keyword">module</span> bcdcount (
	<span class="hljs-keyword">input</span> clk,
	<span class="hljs-keyword">input</span> reset,
	<span class="hljs-keyword">input</span> enable,
	<span class="hljs-keyword">output</span> <span class="hljs-keyword">reg</span> [<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] Q
);</code></pre><br>ä½ è®¾è®¡çš„ç”µè·¯ä¸­æ‰€æœ‰çš„è®¡æ•°å™¨å¿…é¡»ç›´æ¥ä½¿ç”¨ç›¸åŒçš„1000Hzæ—¶é’Ÿä¿¡å·ã€‚<p></p></blockquote><h2 id="Template"><a href="#Template" class="headerlink" title="Template"></a>Template</h2><pre><code class="hljs verilog"><span class="hljs-keyword">module</span> top_module (
    <span class="hljs-keyword">input</span> clk,
    <span class="hljs-keyword">input</span> reset,
    <span class="hljs-keyword">output</span> OneHertz,
    <span class="hljs-keyword">output</span> [<span class="hljs-number">2</span>:<span class="hljs-number">0</span>] c_enable
);</code></pre><h2 id="First-Try"><a href="#First-Try" class="headerlink" title="First Try"></a>First Try</h2><h3 id="answer"><a href="#answer" class="headerlink" title="answer"></a>answer</h3><pre><code class="hljs verilog"><span class="hljs-keyword">module</span> top_module (
    <span class="hljs-keyword">input</span> clk,
    <span class="hljs-keyword">input</span> reset,
    <span class="hljs-keyword">output</span> OneHertz,
    <span class="hljs-keyword">output</span> [<span class="hljs-number">2</span>:<span class="hljs-number">0</span>] c_enable
); 
    <span class="hljs-keyword">reg</span> [<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] Q0,Q1,Q2;
    <span class="hljs-comment">/************ BCDåè¿›åˆ¶,å½“Q=1001æ—¶ä½¿èƒ½--&gt;åå€é¢‘ ***************/</span>
    <span class="hljs-keyword">assign</span> c_enable[<span class="hljs-number">0</span>] = <span class="hljs-number">1'b1</span>;						<span class="hljs-comment">// è®©ç¬¬ä¸€ä¸ªè®¡æ•°å™¨å…¨é€Ÿè®¡æ•°</span>
    <span class="hljs-keyword">assign</span> c_enable[<span class="hljs-number">1</span>] = Q0[<span class="hljs-number">3</span>] &amp; Q0[<span class="hljs-number">0</span>];				<span class="hljs-comment">// ç¬¬äºŒè®¡æ•°å™¨è®¡æ•°å‘¨æœŸæ˜¯ç¬¬ä¸€ä¸ªçš„10å€</span>
    <span class="hljs-keyword">assign</span> c_enable[<span class="hljs-number">2</span>] = Q1[<span class="hljs-number">3</span>] &amp; Q1[<span class="hljs-number">0</span>]; 			<span class="hljs-comment">// ç¬¬äºŒè®¡æ•°å™¨è®¡æ•°å‘¨æœŸæ˜¯ç¬¬äºŒä¸ªçš„10å€</span>
    <span class="hljs-keyword">assign</span> OneHertz = Q2[<span class="hljs-number">3</span>] &amp; Q2[<span class="hljs-number">0</span>];	
    bcdcount counter0 (clk, reset, c_enable[<span class="hljs-number">0</span>], Q0); 
    bcdcount counter1 (clk, reset, c_enable[<span class="hljs-number">1</span>], Q1);
    bcdcount counter2 (clk, reset, c_enable[<span class="hljs-number">2</span>], Q2);
<span class="hljs-keyword">endmodule</span></code></pre><h3 id="resultâŒ"><a href="#resultâŒ" class="headerlink" title="resultâŒ"></a>resultâŒ</h3><p><img src="https://image.beenli.cn/img/20201003/WrnmNC6Ae30I.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><center>åœ¨è®¡æ•°0-10çš„æ—¶å€™æ˜¯æ­£ç¡®çš„</center><p><img src="https://image.beenli.cn/img/20201003/BBvSVnJpwakc.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ul><li><p>åœ¨è®¡æ•°90-99çš„æ—¶å€™: c_enable[2]æœ¬è¯¥ä¸º0å´å˜ä¸ºäº†1ï¼Œå¯¼è‡´è¾“å‡ºc_enable=5=3â€™b101;</p></li><li><p>ç”±äºc_enable[2]=Q1[3] &amp; Q1[0]ï¼Œèµ·åˆæˆ‘è®¤ä¸ºæ˜¯Q1æœ‰é—®é¢˜ï¼›åç»­ç”»å‡ºå¦‚ä¸‹è‰å›¾å‘ç°è¿˜æ˜¯c_enableæœ‰é—®é¢˜</p><p><img src="https://image.beenli.cn/img/20201003/Fzbw4O8G94sC.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p></li></ul><ul><li>ç”±äºQ1æ˜¯ç”±è®¡æ•°å™¨ç”Ÿæˆçš„ï¼Œåªè¦ä½¿èƒ½ä¿¡å·æ²¡é—®é¢˜ï¼Œé‚£ä¹ˆå®ƒå°±è¿˜ğŸ†—</li><li>åˆç”±äºä½¿èƒ½ä¿¡å·1å’Œ2æ˜¯æˆ‘ä»¬å®šä¹‰ï¼Œæ‰€ä»¥ä»è¿™é‡Œä¸‹æ‰‹è§£å†³é—®é¢˜æ¯”è¾ƒæ–¹ä¾¿ï¼›</li><li>ç”±ä¸Šå›¾çŸ¥ä½¿èƒ½ä¿¡å·2æœ‰é—®é¢˜ï¼Œå®ƒåœ¨è®¡æ•°90-99æœŸé—´ä¸€ç›´ä¸ºé«˜ç”µå¹³ï¼Œæˆ‘ä»¬åªå¸Œæœ›å…¶åœ¨99æ—¶ä¸ºé«˜ç”µå¹³ã€‚</li><li>æ‰€æœ‰ä¿®æ”¹ä½¿èƒ½2çš„èµ‹å€¼ï¼šc_enable[2] = Q1[3] &amp; Q1[0] <code>&amp; c_enable[1]</code></li><li>åŒç†æˆ‘ä»¬ä¹Ÿè¦ä¿®æ”¹OneHertz = Q2[3] &amp; Q2[0] &amp; <code>c_enable[2]</code>;ï¼Œè®©å…¶åªåœ¨999æ—¶æ‰æœ‰æ•ˆï¼›å¦åˆ™å…¶åœ¨900-999ä¸€ç›´æœ‰æ•ˆï¼›</li></ul><h2 id="Final-answer"><a href="#Final-answer" class="headerlink" title="Final answer"></a>Final answer</h2><pre><code class="hljs verilog"><span class="hljs-keyword">module</span> top_module (
    <span class="hljs-keyword">input</span> clk,
    <span class="hljs-keyword">input</span> reset,
    <span class="hljs-keyword">output</span> OneHertz,
    <span class="hljs-keyword">output</span> [<span class="hljs-number">2</span>:<span class="hljs-number">0</span>] c_enable
); <span class="hljs-comment">//</span>
    <span class="hljs-keyword">reg</span> [<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] Q0,Q1,Q2;
    <span class="hljs-keyword">assign</span> c_enable[<span class="hljs-number">0</span>] = <span class="hljs-number">1'b1</span>;
    <span class="hljs-keyword">assign</span> c_enable[<span class="hljs-number">1</span>] = Q0[<span class="hljs-number">3</span>] &amp; Q0[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">assign</span> c_enable[<span class="hljs-number">2</span>] = Q1[<span class="hljs-number">3</span>] &amp; Q1[<span class="hljs-number">0</span>] &amp; c_enable[<span class="hljs-number">1</span>]; 
    <span class="hljs-keyword">assign</span> OneHertz = Q2[<span class="hljs-number">3</span>] &amp; Q2[<span class="hljs-number">0</span>] &amp; c_enable[<span class="hljs-number">2</span>];	
    bcdcount counter0 (clk, reset, c_enable[<span class="hljs-number">0</span>], Q0); 
    bcdcount counter1 (clk, reset, c_enable[<span class="hljs-number">1</span>], Q1);
    bcdcount counter2 (clk, reset, c_enable[<span class="hljs-number">2</span>], Q2);
<span class="hljs-keyword">endmodule</span></code></pre><h2 id="Advanced-problem-â“"><a href="#Advanced-problem-â“" class="headerlink" title="Advanced problem(â“)"></a>Advanced problem(â“)</h2><p>â­å¦‚ä½•å®ç°<code>50%</code>(xx%)å ç©ºæ¯”çš„10(xx)å€é¢‘ç”µè·¯</p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>Digital IC</category>
        <category>HDL Bits</category>
      </categories>
      <tags>
        <tag>circuits</tag>
      </tags>
  </entry>
  <entry>
    <title>IEEE Standard(1)--Conventions</title>
    <url>/posts/7b1b9603/</url>
    <content><![CDATA[<h1 id="1ã€Overview"><a href="#1ã€Overview" class="headerlink" title="1ã€Overview"></a>1ã€Overview</h1><h2 id="1-1-Convention"><a href="#1-1-Convention" class="headerlink" title="1.1 Convention"></a>1.1 Convention</h2><p><code>shall</code>: ç”¨äºæ³•å®šçš„è¦æ±‚ï¼ˆmandatory requirementï¼‰</p><p><code>may</code>: ç”¨äºå¯é€‰çš„ç‰¹æ€§ï¼ˆoptional featureï¼‰</p><h2 id="1-2-Syntactic-description"><a href="#1-2-Syntactic-description" class="headerlink" title="1.2 Syntactic description"></a>1.2 Syntactic description</h2><blockquote><p><a href="https://www.jianshu.com/p/15efcb0c06c8" rel="external nofollow noreferrer">BNFæè¿°æ–¹æ³•</a>(Backus-Naur Form)ï¼š</p><p>åŸºæœ¬ç»“æ„ä¸ºï¼š<non-terminal>::=<replacement></replacement></non-terminal></p><ul><li><code>::=</code>ï¼šè¢«å®šä¹‰ä¸ºçš„æ„æ€</li><li><code>â€œ â€</code>: åŒå¼•å·è¡¨ç¤ºå­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯ç»ˆç»“ç¬¦ï¼Œä¸èƒ½å†è¢«å®šä¹‰ã€‚</li><li>åœ¨åŒå¼•å·å¤–çš„å­—ä»£è¡¨ç€è¯­æ³•éƒ¨åˆ†ï¼›<code>åŸºæœ¬ç±»å‹ ::= å­—ç¬¦ä¸² | æ•°å­— | å¸ƒå°”</code>,å…¶ä¸­å­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å…·ä½“æ˜¯ä»€ä¹ˆï¼Œç”±ä¸‹é¢çš„è§„åˆ™å®šä¹‰ï¼ˆé€’å½’ï¼‰</li><li><code>&lt;&gt;</code>ï¼šå°–æ‹¬å·é‡Œçš„å†…å®¹è¡¨ç¤ºå¿…é€‰å†…å®¹ï¼›</li><li><code>[...]</code>: è¡¨ç¤ºå¯é€‰ã€‚</li><li><code>{...}</code>:è¡¨ç¤ºé‡å¤ï¼›å®ä¾‹ï¼š<code>AB ::= "a" {"b"}</code>è¡¨ç¤ºï¼šABç”±ä¸€ä¸ªaåŠ ä¸Šä»»æ„æ•°é‡ï¼ˆåŒ…æ‹¬0ä¸ªï¼‰ä¸ªbç»„æˆ</li><li><code>(...)</code>: è¡¨ç¤ºåˆ†ç»„ï¼Œç”¨æ¥æ§åˆ¶ä¼˜å…ˆçº§ï¼›<code>AX ::= "a" ("m"|"n")</code>è¡¨ç¤ºï¼šAXç”±ä¸€ä¸ªaåŠ ä¸Šmæˆ–è€…nç»„æˆ</li><li><code>(*...*)</code> : æ³¨é‡Šï¼Œè¯´æ˜æ€§æ–‡æœ¬ï¼Œä¸è¡¨ç¤ºä»»ä½•è¯­æ³•ã€‚</li></ul></blockquote><ol><li><p>å°å†™å•è¯ï¼Œä¸€äº›åŒ…å«ä¸‹åˆ’çº¿çš„ï¼šè¯­æ³•ç›®å½•ï¼ˆsyntactic categoriesï¼‰</p><p>â€‹ <code>module_declaration</code></p></li><li><p>ç²—ä½“ï¼šä¿ç•™å­—ã€æ“ä½œç¬¦ã€æ ‡ç‚¹ç¬¦å·</p><p>â€‹ <code>module</code> <code>=&gt;</code> <code>;</code></p></li><li><p>ç«–æ¡|åˆ†å‰²å¯é€‰å•å…ƒã€‚å¦‚æœå®ƒä»¥ç²—ä½“å½¢å¼å‡ºç°ï¼Œå®ƒæ‰è¡¨ç¤ºè‡ªå·±ã€‚</p><p>â€‹ unary_operator ::= + | - | ! | ~ | &amp; | ~&amp; | <strong>|</strong>(æˆ–) | ~|(æˆ–é) | ^ | ~^ | ^~ï¼ˆéƒ½è¡¨ç¤ºåŒæˆ–)</p></li><li><p>æ–¹æ‹¬å·[â€¦]åŒ…å«å¯é€‰é¡¹ã€‚</p><p><code>input_declaration ::= input [range] list_of_variables;</code></p></li><li><p>èŠ±æ‹¬å·<code>{}</code>é™¤éä»¥ç²—ä½“å‡ºç°ï¼Œå®ƒæ‰è¡¨ç¤ºè‡ªå·±ï¼Œå¦åˆ™è¡¨ç¤ºé‡å¤ã€‚é‡å¤ä»å·¦åˆ°å³è¿›è¡Œï¼Œå’Œå·¦é€’å½’ç­‰æ•ˆã€‚</p><ul><li><p>list_of_param_assignments ::= param_assignment { , param_assignment }</p></li><li><p>list_of_param_assignments ::=<br>param_assignment| list_of_param_assignment , param_assignment</p></li></ul></li><li><p>ä»»ä½•ç›®å½•çš„åå­—ä»¥æ–œä½“å¼€å¤´ï¼Œç­‰æ•ˆäºæ²¡æœ‰æ–œä½“éƒ¨åˆ†çš„ç›®å½•åã€‚æ–œä½“éƒ¨åˆ†åªæ˜¯ä¸ºäº†ä¼ è¾¾<code>semantic information</code>ã€‚</p><p><img src="https://image.beenli.cn/img/20200928/OpmV1Dh0HDh6.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p></li><li><p>æ­£æ–‡ä¸­å½“ä¸€ä¸ªtermè¢«å®šä¹‰æ—¶ä½¿ç”¨æ–œä½“ï¼›åœ¨ä¾‹å­ï¼Œæ–‡ä»¶åï¼Œå¸¸é‡ç‰¹åˆ«æ—¶0ï¼Œ1ï¼Œxå’Œzçš„å€¼æ—¶ä½¿ç”¨<code>constant-width</code>å­—ä½“ï¼ˆç­‰å®½å­—ä½“ï¼‰</p></li></ol><h1 id="2ã€Lexical-convention"><a href="#2ã€Lexical-convention" class="headerlink" title="2ã€Lexical convention"></a>2ã€Lexical convention</h1><h2 id="2-1ã€Lexical-tokens"><a href="#2-1ã€Lexical-tokens" class="headerlink" title="2.1ã€Lexical tokens"></a>2.1ã€Lexical tokens</h2><blockquote><p>Verilog HDL source file shall be a stream of lexical tokens. A <code>lexical tokens</code> shall consist of one or more characters.<br>verilogæºæ–‡ä»¶åº”è¯¥æ˜¯ä¸€è¿ä¸²è¯­æ³•æ ‡è®°ï¼Œä¸€ä¸ªè¯­æ³•æ ‡è®°ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ç»„æˆã€‚</p></blockquote><p>æºæ–‡ä»¶ä¸­tokensçš„ä½ç½®æ˜¯éšæ„çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šé™¤äº†tokenåˆ†éš”ç¬¦ï¼Œç©ºæ ¼å’Œæ¢è¡Œä¸åº”è¯¥æœ‰ç‰¹æ®Šæ„ä¹‰ï¼Œè½¬ä¹‰å­—ç¬¦é™¤å¤–ã€‚</p><p>æœ‰å¦‚ä¸‹å‡ ç§è¯­æ³•æ ‡è®°</p><ul><li>White space</li><li>Comment</li><li>Operator</li><li>Number</li><li>String</li><li>Identifier</li><li>Keyword</li></ul><h2 id="2-2ã€White-space"><a href="#2-2ã€White-space" class="headerlink" title="2.2ã€White space"></a>2.2ã€White space</h2><p>white spaceåº”è¯¥åŒ…å«ï¼šç”¨äºç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦å’Œæ ¼å¼æè¦çš„å­—ç¬¦ã€‚è¿™äº›å­—ç¬¦åº”è¯¥è¢«å¿½ç•¥é™¤äº†å½“å®ƒä»¬ç”¨äºåˆ†å‰²å…¶ä»–è¯­æ³•æ ‡è®°(tokens)ã€‚ä½†æ˜¯blankså’Œtabsè¢«è®¤ä¸ºæ˜¯æœ‰æ„ä¹‰çš„å­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­ã€‚</p><h2 id="2-3ã€Comments"><a href="#2-3ã€Comments" class="headerlink" title="2.3ã€Comments"></a>2.3ã€Comments</h2><ul><li>å•è¡Œæ³¨é‡Š <code>//</code></li><li>å—æ³¨é‡Šï¼š<code>/*</code> â€¦. <code>*/</code></li></ul><h2 id="2-4ã€Operators"><a href="#2-4ã€Operators" class="headerlink" title="2.4ã€Operators"></a>2.4ã€Operators</h2><blockquote><p>æ“ä½œç¬¦å¯ä»¥æ˜¯å•ä¸ªï¼ŒåŒä¸ªæˆ–ä¸‰ä¸ªå­—ç¬¦çš„åºåˆ—ï¼Œå¹¶è¢«ç”¨åœ¨è¡¨è¾¾å¼ä¸­ã€‚<a href="#">Clause5</a>å°†è®¨è®ºè¡¨è¾¾å¼ä¸­æ“ä½œç¬¦çš„ä½¿ç”¨ã€‚</p></blockquote><p>å•ç›®è¿ç®—ç¬¦(<em>Unary operators</em>)ï¼šåœ¨æ“ä½œæ•°(operand)çš„å·¦è¾¹</p><p>åŒç›®è¿ç®—ç¬¦(<em>Binary operators</em>)ï¼šåœ¨ä¸¤ä¸ªæ“ä½œæ•°ä¸­é—´</p><p>ä¸‰æœ¨è¿ç®—ç¬¦(<em>Triple operator</em> or <em>conditional operator</em>): æœ‰ä¸¤ä¸ªæ“ä½œç¬¦å­—ç¬¦åˆ†å‰²ä¸‰ä¸ªæ“ä½œæ•°ï¼ˆa? x: y)</p><h2 id="2-5ã€Numbers"><a href="#2-5ã€Numbers" class="headerlink" title="2.5ã€Numbers"></a>2.5ã€Numbers</h2><p><em>Constant numbers</em>å¯ä»¥è¢«æŒ‡å®šä¸º<code>integer constant</code>æˆ–è€…<code>real constant</code></p><h3 id="2-5-1ã€Integer-constant"><a href="#2-5-1ã€Integer-constant" class="headerlink" title="2.5.1ã€Integer constant"></a>2.5.1ã€Integer constant</h3><p>æœ‰ä¸¤ç§è¡¨è¾¾æ–¹å¼ï¼š</p><ol><li><a href="#simple">ç®€å•çš„åè¿›åˆ¶æ•°</a>ï¼ša sequence of digits of 0 through 9ã€‚å¼€å¤´å¯ä»¥åŠ ä¸Š<code>+</code>æˆ–è€…<code>-</code>ï¼ˆè¢«è§†ä¸ºæœ‰ç¬¦å·çš„æ•´æ•°ï¼‰</li><li>æŒ‡å®šåŸºç ï¼ˆdï¼Œhï¼Œoï¼Œbï¼‰ï¼šå¯é€‰çš„<code>ä½å®½</code>+<code>'(ASCII 0x27)</code>+<code>åŸºç </code>+<code>digits</code><ul><li>ä½å®½ï¼šéé›¶æ— ç¬¦å·åè¿›åˆ¶æ•°</li><li>åŸºç ï¼šå¤§å°å†™ä¸æ•æ„Ÿï¼›å‰é¢å¯é€‰sæŒ‡ç¤ºæ˜¯å¦ä¸ºæœ‰ç¬¦å·æ•°ï¼ˆæ²¡æœ‰sæ—¶é»˜è®¤ä¸ºunsigned integers)</li><li><code>'</code>ä¸<code>åŸºç </code>ä¸­é—´ä¸èƒ½æœ‰ç©ºæ ¼ã€‚:star:</li><li><code>digits</code>: åº”è¯¥ç´§è·Ÿç€<code>åŸºç </code>ï¼Œå‰é¢ä¹Ÿå¯ä»¥æœ‰ç©ºæ ¼ã€‚a-fä¸åŒºåˆ†å¤§å°å†™</li><li><a href="#s"><code>s</code>ä¸å½±å“æŒ‡å®šçš„ä½æ¨¡å¼ï¼Œåªæ”¹å˜è§£é‡Šæ–¹å¼ã€‚â“</a></li></ul></li></ol><ul><li>è´Ÿæ•°ç”¨è¡¥ç è¡¨ç¤º</li><li>xä»£è¡¨<code>unknown value</code>ï¼›zä»£è¡¨<code>high-impedance value</code>ï¼ˆxåº”è¯¥è®¾ä¸º4bitå¯¹äºhçš„åŸºç ï¼Œ3bitå¯¹äºoçš„åŸºç ï¼›zåŒç†ï¼‰</li><li><a href="#left pad">å¦‚æœæ— ç¬¦å·æ•°ä½å®½å°äºæŒ‡å®šä½å®½ï¼Œé‚£ä¹ˆç”¨0å¡«å……ï¼›</a>å¦‚æœæ— ç¬¦å·æ•°æœ€å·¦è¾¹çš„ä½æ˜¯xæˆ–z;é‚£ä¹ˆç”¨xæˆ–zå¡«å……ã€‚å¦‚æœæ— ç¬¦å·ä½å®½å¤§äºæŒ‡å®šï¼Œé‚£ä¹ˆåº”è¯¥ä»å·¦è¾¹æˆªæ–­åˆ°æŒ‡å®šä½å®½ã€‚</li><li>æ²¡æœ‰æŒ‡å®šä½å®½çš„æ•°å­—è‡³å°‘ä¸º<code>32ä½</code>ï¼›å¯¹äºé«˜ä½æ˜¯xæˆ–è€…zçš„æ²¡æœ‰ä½å®½æ— ç¬¦å·å¸¸æ•°åº”ä½æ‰©å±•åˆ°åŒ…å«è¯¥å¸¸æ•°çš„è¡¨è¾¾å¼çš„å¤§å°ã€‚â“</li><li><code>?</code>æ˜¯<code>z</code>çš„æ›¿ä»£å­—ç¬¦ã€‚åœ¨é«˜é˜»å€¼ä¸éœ€è¦æ³¨æ„æ—¶ï¼Œå¯ç”¨ï¼Ÿæ¥å¢åŠ å¯è¯»æ€§ã€‚</li><li>åœ¨åè¿›åˆ¶å¸¸æ•°ä¸­ï¼Œæ— ç¬¦å·æ•°ä¸èƒ½åŒ…å«ä»»ä½•x,z,?ï¼›é™¤éåªæœ‰ä¸€ä¸ªdigitï¼ŒæŒ‡ç¤ºå…¶ä¸­æ¯ä¸€ä½éƒ½æ˜¯xæˆ–è€…zã€‚</li><li><a href="#underscore"><code>_</code>ä¸‹åˆ’çº¿</a>åœ¨æ•°å­—çš„ä»»ä½•ä½ç½®éƒ½æ˜¯åˆæ³•çš„ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚ä¸‹åˆ’çº¿æ˜¯æ²¡æœ‰æ„ä¹‰çš„ ï¼Œåªæ˜¯ä¸ºäº†åˆ†å‰²é•¿çš„æ•°å­—æé«˜å¯è¯»æ€§ã€‚</li></ul><p><strong><a name="simple">æ— ç¬¦å·æ•°ï¼š</a></strong></p><pre><code class="hljs verilog"><span class="hljs-comment">/************* Example 1--Unsized constant numbers *****************/</span>
<span class="hljs-number">659</span>   		 <span class="hljs-comment">// is a decimal number </span>
'h <span class="hljs-number">837</span>FF 	 <span class="hljs-comment">// is a hexadecimal number </span>
<span class="hljs-number">'o7460</span> 	 	 <span class="hljs-comment">// is an octal number </span>
<span class="hljs-number">4</span>af  		 <span class="hljs-comment">// is illegal (hexadecimal format requires 'h)</span>

<span class="hljs-comment">/************* Example 2--Sized constant numbers *****************/</span>
<span class="hljs-number">4'b1001</span> 	<span class="hljs-comment">// is a 4-bit binary number </span>
<span class="hljs-number">5</span> 'D <span class="hljs-number">3</span> 		<span class="hljs-comment">// is a 5-bit decimal number </span>
<span class="hljs-number">3'b01x</span> 		<span class="hljs-comment">// is a 3-bit number with the least significant bit unknown </span>
<span class="hljs-number">12'hx</span> 		<span class="hljs-comment">// is a 12-bit unknown number </span>
<span class="hljs-number">16'hz</span> 		<span class="hljs-comment">// is a 16-bit high-impedance number</span></code></pre><p><strong><a name="s">æœ‰ç¬¦å·æ•°çš„è¡¨ç¤ºæ„ä¹‰ï¼š</a></strong></p><pre><code class="hljs verilog"><span class="hljs-comment">/************* Example 3â€”Using sign with constant numbers *****************/</span>
<span class="hljs-number">8</span> 'd -<span class="hljs-number">6</span> 	<span class="hljs-comment">// this is illegal syntax </span>
-<span class="hljs-number">8</span> 'd <span class="hljs-number">6</span>	 	<span class="hljs-comment">// this defines the two's complement of 6, held in 8 bitsâ€”equivalent to -(8'd 6) </span>
<span class="hljs-number">4</span> 'shf 		<span class="hljs-comment">// this denotes the 4-bit number '1111', to be interpreted as a 2's complement number, </span>
			<span class="hljs-comment">// or '-1'. This is equivalent to -4'h 1 </span>
-<span class="hljs-number">4</span> 'sd15 	<span class="hljs-comment">// this is equivalent to -(-4'd 1), or '0001'</span>
<span class="hljs-number">16</span>'sd?   	<span class="hljs-comment">// the same as 16'sbz</span></code></pre><p><strong><a name="left pad">è‡ªåŠ¨å·¦å¡«å……ï¼š</a></strong></p><pre><code class="hljs verilog"><span class="hljs-comment">/************* Example 4â€”Automatic left padding **************************/</span>
<span class="hljs-keyword">reg</span>  [<span class="hljs-number">11</span>:<span class="hljs-number">0</span>] a, b, c, d;
<span class="hljs-keyword">initial</span> <span class="hljs-keyword">begin</span>
a = 'h x; 	<span class="hljs-comment">// yields xxx</span>
b = 'h <span class="hljs-number">3</span>x; 	<span class="hljs-comment">// yields 03x</span>
c = 'h z3; 	<span class="hljs-comment">// yields zz3</span>
d = 'h <span class="hljs-number">0</span>z3; <span class="hljs-comment">// yields 0z3</span>
<span class="hljs-keyword">end</span>
<span class="hljs-keyword">reg</span>  [<span class="hljs-number">84</span>:<span class="hljs-number">0</span>]      e, f, g; 
e = <span class="hljs-number">'h5</span>;    <span class="hljs-comment">// yields {82{1'b0},3'b101}</span>
f = <span class="hljs-number">'hx</span>;    <span class="hljs-comment">// yields {85{1'hx}}</span>
g = <span class="hljs-number">'hz</span>;    <span class="hljs-comment">// yields {85{1'hz}}</span></code></pre><p><a name="underscore"><strong>ä½¿ç”¨ä¸‹åˆ’çº¿ï¼š</strong></a></p><pre><code class="hljs verilog"><span class="hljs-comment">/************* Using underscore character in numbers *******************/</span>
<span class="hljs-number">27_195_000</span> 
<span class="hljs-number">16'b0011_0101_0001_1111</span> 
<span class="hljs-number">32</span> 'h <span class="hljs-number">12</span>ab_f001</code></pre><h3 id="2-5-2ã€Real-constants"><a href="#2-5-2ã€Real-constants" class="headerlink" title="2.5.2ã€Real constants"></a>2.5.2ã€Real constants</h3><blockquote><p><em>real constants</em>ç”¨<a href="https://en.wikipedia.org/wiki/IEEE_754-1985" rel="external nofollow noreferrer">IEEE Std 754-1985</a>ï¼ŒåŒç²¾åº¦æµ®ç‚¹æ•°è¡¨ç¤º</p></blockquote><p>æœ‰ä¸¤ç§è¡¨ç¤ºæ–¹æ³•ï¼š</p><ol><li>åè¿›åˆ¶è¡¨ç¤ºï¼š14.72</li><li>ç§‘å­¦è®¡æ•°æ³•ï¼š39e8ï¼ˆè¡¨ç¤º39ä¹˜ä»¥10çš„8æ¬¡æ–¹ï¼‰</li></ol><p>æ³¨æ„ï¼šå¸¦æœ‰å°æ•°ç‚¹çš„å®æ•°è‡³å°‘åœ¨å°æ•°ç‚¹ä¸¤è¾¹å„æœ‰ä¸€ä½ã€‚</p><p><code>.12</code> &nbsp;<code>9.</code> &nbsp; <code>4.E3</code> &nbsp; <code>.2e-7</code> éƒ½æ˜¯ä¸åˆæ³•çš„</p><h3 id="2-5-3ã€Convertion"><a href="#2-5-3ã€Convertion" class="headerlink" title="2.5.3ã€Convertion"></a>2.5.3ã€Convertion</h3><p>å®æ•°å‘æ•´æ•°è½¬åŒ–ï¼šå››èˆäº”å…¥åˆ°æœ€è¿‘çš„æ•´æ•°ï¼Œè€Œä¸æ˜¯æˆªæ–­ã€‚</p><p>å½“ä¸€ä¸ªå®æ•°è¢«èµ‹å€¼ç»™æ•´æ•°æ—¶ï¼šè¿›è¡Œéšå£«è½¬åŒ–(implicit conversion)</p><p>å››èˆäº”å…¥è§„åˆ™ï¼šaway from zero</p><ul><li>-1.5 è½¬åŒ–ä¸º-2ï¼›1.5è½¬åŒ–ä¸º2</li></ul><h2 id="2-6ã€Strings"><a href="#2-6ã€Strings" class="headerlink" title="2.6ã€Strings"></a>2.6ã€Strings</h2><blockquote><p><code>å­—ç¬¦ä¸²</code>æ˜¯ä¸€ä¸ªå­—ç¬¦åºåˆ—ï¼Œç”¨(â€œ â€œ)æ‹¬èµ·æ¥ï¼ŒåŒ…å«åœ¨ä¸€è¡Œä¸­ã€‚å­—ç¬¦ä¸²å¯ä»¥ç”¨ä½œè¡¨è¾¾å¼çš„æ“ä½œæ•°ï¼›èµ‹å€¼æ—¶è¢«å½“æˆæ— ç¬¦å·æ•´æ•°å¸¸æ•°ï¼Œä¸€ä¸ª8-bitçš„ASCIIå€¼å¯¹åº”ä¸€ä¸ªå­—ç¬¦ã€‚</p></blockquote><h3 id="2-6-1ã€String-variable-declaration"><a href="#2-6-1ã€String-variable-declaration" class="headerlink" title="2.6.1ã€String variable declaration"></a>2.6.1ã€String variable declaration</h3><blockquote><p>å­—ç¬¦ä¸²å˜é‡æ˜¯<code>reg</code>ç±»å‹ï¼Œå®½åº¦=å­—ç¬¦ä¸ªæ•°*8</p></blockquote><pre><code class="hljs verilog"><span class="hljs-comment">/********* "Hello world!"ä¸€å…±12ä¸ªå­—ç¬¦ ********/</span>
<span class="hljs-keyword">reg</span> [<span class="hljs-number">8</span>*<span class="hljs-number">12</span>:<span class="hljs-number">1</span>] stringvar;
<span class="hljs-keyword">initial</span>   <span class="hljs-keyword">begin</span>
  stringvar = <span class="hljs-string">"Hello world!"</span>;
<span class="hljs-keyword">end</span></code></pre><h3 id="2-6-2ã€String-manipulation"><a href="#2-6-2ã€String-manipulation" class="headerlink" title="2.6.2ã€String manipulation"></a>2.6.2ã€String manipulation</h3><blockquote><p>å­—ç¬¦ä¸²å¯ä»¥ç”¨Verilogçš„æ“ä½œç¬¦è¿›è¡Œæ“çºµã€‚è¢«æ“çºµçš„å€¼æ˜¯8bit ASCIIå€¼åºåˆ—</p></blockquote><pre><code class="hljs verilog"><span class="hljs-keyword">module</span>  string_test;
<span class="hljs-keyword">reg</span>  [<span class="hljs-number">8</span>*<span class="hljs-number">14</span>:<span class="hljs-number">1</span>] stringvar;
<span class="hljs-keyword">initial</span> <span class="hljs-keyword">begin</span>
    stringvar = <span class="hljs-string">"Hello world"</span>;
    <span class="hljs-built_in">$display</span> (<span class="hljs-string">"%s is stored as %h"</span>, stringvar,stringvar);
    stringvar = {stringvar,<span class="hljs-string">"!!!"</span>};
    <span class="hljs-built_in">$display</span> (<span class="hljs-string">"%s is stored as %h"</span>, stringvar,stringvar);
<span class="hljs-keyword">end</span>
<span class="hljs-keyword">endmodule</span>


<span class="hljs-comment">/************** outputs ****************/</span>
Hello world is stored as <span class="hljs-number">00000048656</span>c6c6f20776f726c64
Hello world!!! is stored as <span class="hljs-number">48656</span>c6c6f20776f726c64212121</code></pre><ul><li>å½“å˜é‡å ç”¨ç©ºé—´å¤§äºæ‰€åˆ†é…çš„ç©ºé—´æ—¶ï¼Œå€¼å‘å³è°ƒæ•´ï¼Œæœ€å·¦è¾¹ç”¨0å¡«å……ï¼Œä¸å¤„ç†éå­—ç¬¦ä¸²çš„å€¼ä¸€æ ·ã€‚</li><li>å½“å ç”¨ç©ºé—´å¤§äºåˆ†é…ç©ºé—´æ—¶ï¼Œå­—ç¬¦ä¸²è¿˜æ˜¯å‘å³è°ƒæ•´ï¼Œæœ€å·¦è¾¹çš„æˆªæ–­ã€‚</li></ul><h3 id="2-6-3-Special-characters-in-strings"><a href="#2-6-3-Special-characters-in-strings" class="headerlink" title="2.6.3 Special characters in strings"></a>2.6.3 Special characters in strings</h3><blockquote><p>æœ‰äº›å­—ç¬¦åªæœ‰å‰é¢åŠ ä¸Š<code>escape character</code>å®ƒä»¬æ‰èƒ½åœ¨å­—ç¬¦ä¸²é‡Œé¢ä½¿ç”¨</p></blockquote><p><img src="https://image.beenli.cn/img/20200928/SL0ReCcivKw9.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><h2 id="2-7ã€Identifiersï¼Œkeywords-and-system-names"><a href="#2-7ã€Identifiersï¼Œkeywords-and-system-names" class="headerlink" title="2.7ã€Identifiersï¼Œkeywords,and system names"></a>2.7ã€Identifiersï¼Œkeywords,and system names</h2><blockquote><p><code>æ ‡è¯†ç¬¦</code>ç”¨äºç»™ä¸€ä¸ªå¯¹è±¡ç‹¬ä¸€æ— äºŒçš„åå­—ï¼Œä½¿å¾—å®ƒä»¬èƒ½å‘—å¼•ç”¨ã€‚</p></blockquote><p>ç®€å•çš„æ ‡è¯†ç¬¦ï¼šå­—æ¯ï¼Œæ•°å­—ï¼Œ<code>$</code>,&nbsp;&nbsp;<code>_</code>ç»„æˆã€‚å¼€å¤´åªèƒ½æ˜¯å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ã€‚ï¼ˆ<code>_bus</code>, <code>wan$li</code>)</p><p>å®ç°çš„æ—¶å€™æ ‡è¯†ç¬¦æœ‰æœ€å¤§é•¿åº¦ï¼Œå®ƒçš„é™åˆ¶åº”è¯¥è‡³å°‘ä¸º1024ä¸ªå­—ç¬¦ã€‚å¦‚æœä¸€ä¸ªæ ‡è¯†ç¬¦é•¿åº¦è¶…è¿‡è¿™ä¸ªï¼Œç³»ç»Ÿåº”è¯¥æŠ¥é”™ã€‚</p><h3 id="2-7-1-Escaped-identifiers"><a href="#2-7-1-Escaped-identifiers" class="headerlink" title="2.7.1 Escaped identifiers"></a>2.7.1 Escaped identifiers</h3><blockquote><p><code>è½¬ä¹‰æ ‡è¯†ç¬¦</code>ä»¥åæ–œæ <code>\</code>å¼€å§‹ï¼Œä»¥<code>white space</code>(space, tab,newline)ç»“æŸã€‚å®ƒä»¬æä¾›äº†åœ¨æ ‡è¯†ç¬¦ä¸­åŒ…å«ä»»ä½•å¯æ‰“å°å­—ç¬¦çš„æ–¹æ³•ï¼ˆ33(!)-126(~)ï¼›$21_h$-$7E_h$)ã€‚</p></blockquote><p>å‰å¯¼åæ–œæ å’Œç»“å°¾çš„ç©ºç™½å­—ç¬¦éƒ½ä¸ç®—æ ‡è¯†ç¬¦çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤ï¼Œ<code>\cpu3</code>è¢«è®¤ä¸ºå’Œ<code>cpu3</code>ä¸€æ ·ã€‚</p><pre><code class="hljs verilog">\busa+index
\-clock
\***error-condition***
\net1/\net2
\{a,b}
\a*(b+c)</code></pre><h3 id="2-7-2-Keywords"><a href="#2-7-2-Keywords" class="headerlink" title="2.7.2 Keywords"></a>2.7.2 Keywords</h3><blockquote><p>å…³é”®å­—æ˜¯å…ˆå‰å®šä¹‰å¥½çš„éè½¬ä¹‰æ ‡è¯†ç¬¦ï¼Œå®ƒä»¬è¢«ç”¨æ¥å®šä¹‰è¯­è¨€ç»“æ„ã€‚å…³é”®å­—å‰é¢åŠ ä¸Šè½¬ä¹‰å­—ç¬¦ä¸è¢«è§£é‡Šä¸ºå…³é”®å­—</p></blockquote><p><img src="https://image.beenli.cn/img/20200928/uC5F8kwPRFzL.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><h3 id="2-7-3-System-tasks-and-functionsâ“"><a href="#2-7-3-System-tasks-and-functionsâ“" class="headerlink" title="2.7.3 System tasks and functionsâ“"></a>2.7.3 System tasks and functionsâ“</h3><blockquote><p>ç¾å…ƒç¬¦å·(<script type="math/tex">`)å¼•å¯¼ä¸€ç§è¯­è¨€ç»“æ„ï¼šå®ƒèƒ½å¼€å‘ç”¨æˆ·å®šä¹‰çš„ä»»åŠ¡å’Œå‡½æ•°ï¼›System constructsä¸æ˜¯è®¾è®¡åŸè¯­ï¼Œè€Œæ˜¯ä»¿çœŸåŠŸèƒ½ã€‚ç¾å…ƒ(`</script>)å¼€å¤´çš„åå­—è¢«è§£é‡Šä¸ºç³»ç»Ÿä»»åŠ¡æˆ–è€…ç³»ç»Ÿå‡½æ•°ã€‚</p></blockquote><pre><code class="hljs verilog"><span class="hljs-comment">/*********** for example **********/</span>
<span class="hljs-built_in">$display</span>  (<span class="hljs-string">"display a message"</span>);
<span class="hljs-built_in">$finish</span> ;</code></pre><h3 id="2-7-4-Compiler-directives"><a href="#2-7-4-Compiler-directives" class="headerlink" title="2.7.4 Compiler directives"></a>2.7.4 Compiler directives</h3><blockquote><p>`ï¼ˆASICC value 0x60)å­—ç¬¦å¼•å¯¼ç”¨äºå®ç°ç¼–è¯‘å™¨æŒ‡ä»¤çš„è¯­è¨€ç»“æ„ï¼›ï¼Œä¸€ä¸ªæè¿°æ–‡ä»¶ä¸­çš„ç¼–è¯‘å™¨æŒ‡ä»¤å¯ä»¥æ§åˆ¶å¤šä¸ªæè¿°æ–‡ä»¶ä¸­çš„ç¼–è¯‘è¡Œä¸ºã€‚</p></blockquote><p>`identifier ç¼–è¯‘å™¨æŒ‡ä»¤ç»“æ„åœ¨ä»¥ä¸‹ä¸¤ç§åœ°æ–¹å®šä¹‰</p><ul><li>æ ‡å‡†æ ‡è¯†ç¬¦ç¼–è¯‘å™¨æŒ‡ä»¤</li><li>ç”±è½¯ä»¶å®ç°å®šä¹‰çš„é™„åŠ â€™æ ‡è¯†ç¬¦ç¼–è¯‘å™¨æŒ‡ä»¤ã€‚</li></ul><p>ä»»ä½•æœ‰æ•ˆçš„æ ‡è¯†ç¬¦ï¼ŒåŒ…æ‹¬å·²ç»åœ¨é™¤æ­¤æ„é€ ä¹‹å¤–çš„ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨çš„å…³é”®å­—ï¼Œéƒ½å¯ä»¥ç”¨ä½œç¼–è¯‘å™¨æŒ‡ä»¤å</p><pre><code class="hljs verilog"><span class="hljs-comment">/*********** for example **********/</span>
<span class="hljs-meta">`<span class="hljs-meta-keyword">define</span>  wordsize 8</span></code></pre><h2 id="2-8ã€Attributes"><a href="#2-8ã€Attributes" class="headerlink" title="2.8ã€Attributes"></a>2.8ã€Attributes</h2><blockquote><p>éšç€ä½¿ç”¨Verilog HDLä½œä¸ºæºä»£ç çš„ä»¿çœŸå™¨ä»¥å¤–çš„å·¥å…·çš„æ¿€å¢(proliferation); Verilogå¼•å…¥ä¸€ç§æœºåˆ¶ï¼šç”¨äºæŒ‡å®šå…³äºHDLæºä»£ç ä¸­å¯¹è±¡ã€è¯­å¥å’Œè¯­å¥ç»„çš„å±æ€§ï¼Œè¿™äº›å±æ€§å¯è¢«å„ç§å·¥å…·(åŒ…æ‹¬æ¨¡æ‹Ÿå™¨)ä½¿ç”¨ï¼Œä»¥æ§åˆ¶å·¥å…·çš„æ“ä½œæˆ–è¡Œä¸ºã€‚è¿™äº›å±æ€§è¢«ç§°ä½œ<code>attribute</code>. æœ¬å°èŠ‚å°†ä»‹ç»: å¯ä»¥ç”¨äºæŒ‡å®šå±æ€§çš„è¯­æ³•æœºåˆ¶ã€‚</p></blockquote><pre><code class="hljs delphi">attribute_instance ::= <span class="hljs-comment">(* attr_spec { , attr_spec } *)</span>  
attr_spec ::= 
	attr_name [ = constant_expression ]
attr_name ::= 
identifier</code></pre><p><code>attribute_instance</code>ï¼š1ã€ä½œä¸ºå£°æ˜ï¼Œæ¨¡å—é¡¹ç›®ï¼Œè¯­å¥æˆ–è€…ç«¯å£è¿æ¥çš„å‰ç¼€ã€‚2ã€è¿ç®—ç¬¦æˆ–åœ¨ä¸€ä¸ªè¡¨è¾¾å¼ä¸­Verilogå‡½æ•°åçš„åç¼€</p><p>å¦‚æœæ²¡æœ‰ç»™å±æ€§æŒ‡æ´¾å€¼ï¼Œé‚£ä¹ˆå€¼é»˜è®¤ä¸º1ï¼›å¦‚æœå¯¹ç›¸åŒçš„language elementå®šä¹‰å¤šä¸ªç›¸åŒçš„å±æ€§åå­—ï¼Œé‚£ä¹ˆæœ€åä¸€ä¸ªå±æ€§å€¼å°†è¢«ä½¿ç”¨ï¼›å·¥å…·å¯ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ç»™ä¸ªwarningã€‚</p><p>nesting of attribute instances ä¸è¢«å…è®¸ï¼›ç”¨åŒ…å«å±æ€§å®ä¾‹çš„å¸¸é‡è¡¨è¾¾å¼(constant expression that contains an attribute instance)å»ç»™å±æ€§èµ‹å€¼æ˜¯ä¸åˆæ³•çš„ã€‚</p><h3 id="2-8-1-Examples"><a href="#2-8-1-Examples" class="headerlink" title="2.8.1 Examples"></a>2.8.1 Examples</h3><ul><li><p>èŒƒä¾‹1ï¼šç»™caseè¯­å¥è´´ä¸Šå±æ€§</p><pre><code class="hljs verilog">(* full_case, parallel_case *)
<span class="hljs-keyword">case</span>  (foo)
&lt;rest_of_case_statement&gt;

<span class="hljs-keyword">or</span>

(* full_case=<span class="hljs-number">1</span> *)
(* parallel_case=<span class="hljs-number">1</span> *) <span class="hljs-comment">// Multiple attribute instances also OK</span>
<span class="hljs-keyword">case</span>  (foo)
&lt;rest_of_case_statement&gt;

<span class="hljs-keyword">or</span>

(* full_case, <span class="hljs-comment">// no value assignedï¼›é»˜è®¤ä¸º1</span>
parallel_case=<span class="hljs-number">1</span> *)
<span class="hljs-keyword">case</span>  (foo)
&lt;rest_of_case_statement&gt;</code></pre></li><li><p>èŒƒä¾‹2ï¼šç»™æ¨¡å—å®šä¹‰åŠ å±æ€§</p><pre><code class="hljs verilog">(* optimize_power *)
<span class="hljs-keyword">module</span>  mod1 (&lt;port_list&gt;);</code></pre></li><li><p>èŒƒä¾‹3ï¼šç»™æ¨¡å—å®ä¾‹åŠ å±æ€§</p><pre><code class="hljs verilog">(* optimize_power=<span class="hljs-number">0</span> *)
mod1 synth1 (&lt;port_list&gt;);</code></pre></li><li><p>èŒƒä¾‹4ï¼šç»™regå£°æ˜åŠ å±æ€§</p><pre><code class="hljs verilog">(* fsm_state *)  <span class="hljs-keyword">reg</span>  [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>] state1;
(* fsm_state=<span class="hljs-number">1</span> *)  <span class="hljs-keyword">reg</span>  [<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] state2, state3;
<span class="hljs-keyword">reg</span>  [<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] reg1;  <span class="hljs-comment">// this  reg  does NOT have fsm_state set</span>
(* fsm_state=<span class="hljs-number">0</span> *)  <span class="hljs-keyword">reg</span>  [<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] reg2;  <span class="hljs-comment">// nor does this one</span></code></pre></li><li><p>èŒƒä¾‹5ï¼šç»™æ“ä½œç¬¦åŠ å±æ€§</p><pre><code class="hljs verilog">a = b ? (* no_glitch *) c : d;
a = b + (* mode = <span class="hljs-string">"cla"</span> *) c;</code></pre></li></ul><h3 id="2-8-2-Syntax-çœç•¥"><a href="#2-8-2-Syntax-çœç•¥" class="headerlink" title="2.8.2 Syntax(çœç•¥)"></a>2.8.2 Syntax(çœç•¥)</h3><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>Digital IC</category>
        <category>verilog</category>
      </categories>
      <tags>
        <tag>specification</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå¸¸ç”¨å‘½ä»¤</title>
    <url>/posts/d0edc1ed/</url>
    <content><![CDATA[<h2 id="Linuxå¸¸ç”¨å‘½ä»¤"><a href="#Linuxå¸¸ç”¨å‘½ä»¤" class="headerlink" title="Linuxå¸¸ç”¨å‘½ä»¤"></a><center>Linuxå¸¸ç”¨å‘½ä»¤</center></h2><ol><li><p>å»ºç«‹è½¯é“¾æ¥<a href="https://man.linuxde.net/ln:link" rel="external nofollow noreferrer">ln</a></p><pre><code class="hljs bash">ln -s [æºæ–‡ä»¶] [é“¾æ¥æ–‡ä»¶] (åˆ›å»ºè½¯é“¾æ¥)</code></pre><p>ä¾‹å¦‚ï¼šåœ¨<code>~/oslab/</code>ä¸‹æœ‰ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶<code>gdb</code><br>ä½ åªèƒ½ç”¨<code>./gdb</code>å»æ‰§è¡Œå®ƒã€‚<br>ä½†æ˜¯ä½ å¯ä»¥æŠŠå®ƒé“¾æ¥åˆ°<code>$PATH</code>ä¸‹ï¼Œè¿™æ ·ä½ å¯ä»¥åœ¨ä»»æ„è·¯å¾„éƒ½å¯ä»¥æ‰§è¡Œ</p><pre><code class="hljs bash">ln -s ~/oslab/gdb /usr/<span class="hljs-built_in">local</span>/bin/gdb</code></pre><p class="note note-info">ln -snf ~/oslab/xxx /usr/local/bin/gdb(ä¿®æ”¹)</p><hr></li><li><p>ç§»åŠ¨æ–‡ä»¶<a href="https://man.linuxde.net/mv" rel="external nofollow noreferrer">mv</a></p><pre><code class="hljs bash">mv [<span class="hljs-built_in">source</span>] [target]</code></pre><p>ä¾‹å¦‚ï¼š</p><ol><li>â€‹ <code>mv ~/oslab/oslab/* ~/oslab/</code> (æŠŠ<code>~/oslab/oslab/</code>ä¸‹çš„æ–‡ä»¶å…¨éƒ¨ å¤åˆ¶åˆ°<code>~/oslab/</code>)</li><li><code>mv a.txt b.tax</code> æŠŠæ–‡ä»¶åa.txtæ”¹ä¸ºb.txt</li></ol><hr></li><li><p>è®¾ç½®æƒé™<a href="https://man.linuxde.net/chmod" rel="external nofollow noreferrer">chmod</a>ï¼›<a href="https://man.linuxde.net/chown" rel="external nofollow noreferrer">chown</a></p><p><code>r</code> è¯»å–æƒé™ï¼Œæ•°å­—ä»£å·ä¸º<code>4</code>;<br><code>w</code> å†™å…¥æƒé™ï¼Œæ•°å­—ä»£å·ä¸º<code>2</code>ï¼›<br><code>x</code> æ‰§è¡Œæˆ–åˆ‡æ¢æƒé™ï¼Œæ•°å­—ä»£å·ä¸º<code>1</code>ï¼›<br><code>-</code> ä¸å…·ä»»ä½•æƒé™ï¼Œæ•°å­—ä»£å·ä¸º<code>0</code>ï¼›</p></li></ol><div class="table-container"><table><thead><tr><th style="text-align:center">7</th><th style="text-align:center">rwx</th></tr></thead><tbody><tr><td style="text-align:center"><strong>6</strong></td><td style="text-align:center"><strong>rw-</strong></td></tr><tr><td style="text-align:center"><strong>5</strong></td><td style="text-align:center"><strong>r-x</strong></td></tr><tr><td style="text-align:center"><strong>4</strong></td><td style="text-align:center"><strong>râ€”</strong></td></tr><tr><td style="text-align:center"><strong>3</strong></td><td style="text-align:center"><strong>-wx</strong></td></tr><tr><td style="text-align:center"><strong>2</strong></td><td style="text-align:center"><strong>-w-</strong></td></tr><tr><td style="text-align:center"><strong>1</strong></td><td style="text-align:center"><strong>â€”x</strong></td></tr><tr><td style="text-align:center"><strong>0</strong></td><td style="text-align:center"><strong>â€”-</strong></td></tr></tbody></table></div><pre><code class="hljs bash">chmod u+x,g+w f0ã€€ã€€			 //ä¸ºæ–‡ä»¶f0è®¾ç½®è‡ªå·±å¯ä»¥æ‰§è¡Œï¼Œç»„å‘˜å¯ä»¥å†™å…¥çš„æƒé™
chmod u=rwx,g=rw,o=r f0	 	  //ä¸ºæ–‡ä»¶f0è®¾ç½®è‡ªå·±å¯ä»¥è¯»å†™æ‰§è¡Œï¼ŒåŒç»„å¯ä»¥è¯»å†™ã€‚å…¶ä»–äººå¯ä»¥è¯»
chmod 764 f0				  // æ•ˆæœåŒä¸Š
chmod a+x f0				  // æ‰€æœ‰äººéƒ½å¯ä»¥æ‰§è¡Œ

chown -R liu /usr/meng		  //å°†ç›®å½•/usr/mengåŠå…¶ä¸‹é¢çš„æ‰€æœ‰æ–‡ä»¶ã€å­ç›®å½•çš„æ–‡ä»¶å±ä¸»æ”¹æˆ liuï¼š</code></pre><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>toolkits</tag>
      </tags>
  </entry>
  <entry>
    <title>Tasks and Functions</title>
    <url>/posts/71407778/</url>
    <content><![CDATA[<h1 id="Tasks-and-Functions"><a href="#Tasks-and-Functions" class="headerlink" title="Tasks and Functions"></a><center>Tasks and Functions</center></h1><h2 id="1ã€What-are-they-good-for"><a href="#1ã€What-are-they-good-for" class="headerlink" title="1ã€What are they good for"></a>1ã€What are they good for</h2><blockquote><p>Tasks and functions provide the ability to execute common procedures from several different places in a description. They also provide a means of breaking up large procedures into smaller ones to make it easier to read and debug the source descriptions.</p></blockquote><p>ä»std 1364-2005çš„è¿™æ®µæè¿°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºä»¥ä¸‹ç”¨å¤„:</p><ol><li>å‡å°‘é‡å¤å·¥ä½œï¼Œä»£ç å¤ç”¨ã€‚</li><li>æŠŠå¤§çš„è¿‡ç¨‹æ‹†è§£æˆå‡ ä¸ªå°çš„ä»»åŠ¡å’Œå‡½æ•°ï¼Œæ›´åŠ æ˜“è¯»å’Œæ‰¾bug</li></ol><h2 id="2ã€Distinctions-between-tasks-and-functions"><a href="#2ã€Distinctions-between-tasks-and-functions" class="headerlink" title="2ã€Distinctions between tasks and functions"></a>2ã€Distinctions between tasks and functions</h2><ol><li><p>A function shall execute in one simulation time unit; a task can contain time-controlling statements.</p><p>å‡½æ•°åº”è¯¥ç¬é—´è¿”å›ç»“æœï¼Œä¸èƒ½æœ‰å»¶æ—¶ï¼›è€Œä»»åŠ¡å¯ä»¥å¸¦æœ‰å»¶æ—¶æ§åˆ¶è¯­å¥ã€‚</p></li><li><p>A function cannot enable a task; a task can enable other tasks and functions.</p><p>å‡½æ•°ä¸èƒ½è°ƒç”¨ä»»åŠ¡ï¼›ä½†æ˜¯ä»»åŠ¡å¯ä»¥è°ƒç”¨å…¶ä»–ä»»åŠ¡æˆ–è€…å‡½æ•°ã€‚</p></li><li><p>A function shall have at least one input type argument and shall not have an output or inout type argument; a task can have zero or more arguments of any type.</p><p>å‡½æ•°åº”è¯¥è‡³å°‘æœ‰ä¸€ä¸ª<code>è¾“å…¥å‚æ•°</code>å¹¶ä¸”ä¸èƒ½æœ‰è¾“å‡ºæˆ–è€…è¾“å…¥è¾“å‡ºå‚æ•°ã€‚</p><p>ä»»åŠ¡å¯ä»¥æœ‰é›¶ä¸ªæˆ–è€…ä»»æ„ä¸ªä»»ä½•ç§ç±»çš„å‚æ•°ã€‚</p></li><li><p>A function shall return a single value; a task shall not return a value.</p><p>å‡½æ•°åº”è¯¥è¿”å›ä¸€ä¸ªå•ä¸€çš„å€¼ï¼›ä»»åŠ¡ä¸èƒ½è¿”å›å€¼(åªèƒ½é€šè¿‡æŠŠå¤„ç†æ”¾åœ¨å‚æ•°ä¸Šå¸¦å›)</p><hr><p class="note note-primary">The purpose of a function is to respond to an input value by returning a single value. A task can support multiple goals and can calculate multiple result values. However, only the output or inout type arguments pass result values back from the invocation of a task. A function is used as an operand in an expression; the value of that operand is the value returned by the function.</p><ul><li><p>å‡½æ•°çš„ç›®çš„ï¼šå¯¹äºè¾“å…¥ç»™å‡ºä¸€ä¸ªè¿”å›ç»“æœ</p></li><li><p>ä»»åŠ¡æ”¯æŒå¤šä¸ªç»“æœï¼Œä½†æ˜¯åªæœ‰<code>è¾“å‡º</code>æˆ–è€…<code>è¾“å…¥è¾“å‡º</code>å‚æ•°èƒ½å¤Ÿä¼ é€’è¿™ç§ç»“æœ</p></li><li><p>å‡½æ•°å¯ä»¥åœ¨è¡¨è¾¾å¼ä¸­ç”¨ä½œä¸€ä¸ªæ“ä½œæ•°ã€‚ï¼ˆå…¶å€¼å°±æ˜¯å‡½æ•°è¿”å›çš„ç»“æœã€‚æ˜¯ä¸æ˜¯å¾ˆåƒC)</p></li></ul></li><li><p>ä¾‹å¦‚ï¼š</p><pre><code class="hljs verilog">switch_bytes(old_word, new_word);	<span class="hljs-comment">//taskä¼šæŠŠè¿ç®—ç»“æœæ”¾åœ¨new_wordä¸Š</span>

new_word = switch_bytes(old_word);	<span class="hljs-comment">//functionä¼šç›´æ¥æŠŠç»“æœè¿”å›ã€‚</span></code></pre></li></ol><div class="table-container"><table><thead><tr><th>æ¯”è¾ƒç‚¹</th><th>tasks</th><th>functions</th></tr></thead><tbody><tr><td><strong><em>è¾“å…¥è¾“å‡º</em></strong></td><td>ä»»æ„å¤šè¾“å…¥è¾“å‡º(input,output,inout)</td><td>è‡³å°‘ä¸€ä¸ªè¾“å…¥ä¸èƒ½æœ‰è¾“å‡º</td></tr><tr><td>è§¦å‘äº‹ä»¶æ§åˆ¶</td><td>å¯ä»¥åŒ…å«å»¶æ—¶æ§åˆ¶è¯­å¥(#), åªèƒ½é¢å‘ä»¿çœŸï¼Œä¸èƒ½ç»¼åˆ</td><td>ä¸èƒ½å‡ºç°always, # ç­‰è¯­å¥ï¼Œå‡½æ•°åº”è¯¥åœ¨ä¸€ä¸ªæ—¶é—´å•å…ƒå†…è¿”å›å€¼</td></tr><tr><td><strong><em>è¿”å›å€¼</em></strong></td><td>é€šè¿‡è¾“å‡ºç«¯å£ä¼ é€’</td><td>é€šè¿‡å‡½æ•°åè¿”å›(only one)</td></tr><tr><td><strong><em>ä¸­æ®µ</em></strong></td><td>å¯ä»¥ç”±disableä¸­æ–­</td><td>ä¸èƒ½</td></tr><tr><td>è¯­å¥</td><td></td><td></td></tr><tr><td><strong><em>è°ƒç”¨å…¶ä»–</em></strong></td><td>å¯ä»¥è°ƒç”¨taskå’Œfunction</td><td>åªèƒ½è°ƒç”¨functionï¼Œä¸èƒ½è°ƒç”¨task</td></tr><tr><td><strong><em>å…¶ä»–è¯´æ˜</em></strong></td><td>taskè°ƒç”¨å¯ä»¥ä½œä¸ºå®Œæ•´çš„è¯­å¥å‡ºç°</td><td>functionè°ƒç”¨åªèƒ½ä½œä¸ºèµ‹å€¼è¯­å¥å³è¾¹çš„operand</td></tr></tbody></table></div><h2 id="3ã€-Tasks-and-task-enabling"><a href="#3ã€-Tasks-and-task-enabling" class="headerlink" title="3ã€ Tasks and task enabling"></a>3ã€ Tasks and task enabling</h2><blockquote><p>A task shall be enabled from a statement that defines the argument values to be passed to the task and the variables that receive the results. Control shall be passed back to the enabling process after the task has completed. Thus, if a task has timing controls inside it, then the time of enabling a task can be different from the time at which the control is returned. A task can enable other tasks, which in turn can enable still other tasksâ€”with no limit on the number of tasks enabled. Regardless of how many tasks have been enabled,control shall not return until all enabled tasks have completed.</p></blockquote><ol><li>è°ƒç”¨taskåº”è¯¥ç»™å‡º<code>ä¼ è¿›å‚æ•°çš„å€¼</code>ï¼Œå’Œ<code>æ¥å—ç»“æœçš„å˜é‡</code>ã€‚</li><li>taskå¦‚æœæœ‰å»¶æ—¶æ§åˆ¶ï¼Œé‚£ä¹ˆtaskè¢«è°ƒç”¨æ—¶åˆ»å’Œæ§åˆ¶è¿”å›æ—¶åˆ»å¯ä»¥ä¸åŒã€‚</li><li>taskå†…å¯ä»¥å†è°ƒç”¨taskï¼Œç›´åˆ°æ‰€æœ‰çš„taskå®Œæˆæ‰ä¼šè¿”å›æ§åˆ¶åˆ°é¡¶å±‚è°ƒç”¨å¤„ã€‚</li></ol><h3 id="3-1ã€task-declaration-syntaxes"><a href="#3-1ã€task-declaration-syntaxes" class="headerlink" title="3.1ã€task declaration syntaxes"></a>3.1ã€task declaration syntaxes</h3><pre><code class="hljs verilog">task_declaration ::= (From A<span class="hljs-variable">.2</span><span class="hljs-variable">.7</span>)
				<span class="hljs-keyword">task</span> [ <span class="hljs-keyword">automatic</span> ] task_identifier ; 
				{ task_item_declaration } 
				statement_or_null 
				<span class="hljs-keyword">endtask</span> 
				
task_declaration ::= (From A<span class="hljs-variable">.2</span><span class="hljs-variable">.7</span>)				
				<span class="hljs-keyword">task</span> [ <span class="hljs-keyword">automatic</span> ] task_identifier ( [ task_port_list ] ) ; 
                { block_item_declaration } 
                statement_or_null 
                <span class="hljs-keyword">endtask</span></code></pre><blockquote><p>Tasks without the optional keyword automatic are static tasks, with all declared items being statically allocated. These items shall be shared across all uses of the task executing concurrently. All items declared inside automatic tasks are allocated dynamically for each invocation Automatic task items cannot be accessed by hierarchical references. Automatic tasks can be invoked through use of their hierarchical name.ï¼ˆautomaticçš„å‘åé¢å†å¡«)</p></blockquote><h3 id="3-2ã€Task-enabling-and-argument-passing"><a href="#3-2ã€Task-enabling-and-argument-passing" class="headerlink" title="3.2ã€Task enabling and argument passing"></a>3.2ã€Task enabling and argument passing</h3><pre><code class="hljs angelscript">task_enable ::= (From A<span class="hljs-number">.6</span><span class="hljs-number">.9</span>)
	hierarchical_task_identifier [ ( expression { , expression } ) ] ;</code></pre><ol><li>If the argument is declared as an output or an inout, then the expression shall be restricted to an expression that is valid on the left-hand side of a procedural assignment.(è¾“å‡ºå‚æ•°ï¼šèƒ½ä½äº<code>è¿‡ç¨‹èµ‹å€¼è¯­å¥</code>å·¦è¾¹çš„æœ‰æ•ˆè¡¨è¾¾å¼ã€‚<code>ä¸èƒ½æ˜¯wire</code>)</li></ol><ul><li>reg, integer, real, realtime, and time variables</li><li>Memory references</li><li>Concatenations of reg, integer, and time variables</li><li>Concatenations of memory references</li><li>Bit-selects and part-selects of reg, integer, and time variables</li></ul><ol><li><p>All arguments to the task shall be passed by value rather than by reference</p><p>ä»»åŠ¡å‚æ•°çš„æ˜¯<code>å€¼ä¼ é€’</code>ä¸æ˜¯å¼•ç”¨(æŒ‡é’ˆ)</p></li><li><p>If an argument in the task is declared as an input, then the corresponding expression can be any expression.The order of evaluation of the expressions in the argument list is undefined.</p><p>å¦‚æœå‚æ•°è¢«å®šä¹‰ä¸ºinputï¼Œé‚£ä¹ˆè°ƒç”¨è¯­å¥ä¸ä¹‹ç›¸åº”ä½ç½®çš„è¡¨è¾¾å¼æ²¡æœ‰é™åˆ¶ï¼Œè¡¨è¾¾å¼æ±‚å€¼è¿‡ç¨‹æ˜¯æ²¡æœ‰è¢«å®šä¹‰çš„ã€‚ï¼ˆæ±‚å€¼é¡ºåºæ²¡æœ‰å…ˆåï¼‰</p></li></ol><pre><code class="hljs verilog"><span class="hljs-keyword">task</span>  my_task; 
    <span class="hljs-keyword">input</span>  a, b; 
    <span class="hljs-keyword">inout</span>  c; 
    <span class="hljs-keyword">output</span>  d, e; 
    <span class="hljs-keyword">begin</span>
    . . .   	<span class="hljs-comment">// statements that perform the work of the task</span>
    . . .
    c = foo1;   <span class="hljs-comment">// the assignments that initialize result regs</span>
    d = foo2;
    e = foo3;
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">endtask</span></code></pre><pre><code class="hljs verilog"><span class="hljs-keyword">task</span>  my_task ( <span class="hljs-keyword">input</span>  a, b,  <span class="hljs-keyword">inout</span>  c,  <span class="hljs-keyword">output</span>  d, e); 
    <span class="hljs-keyword">begin</span>
    . . .   <span class="hljs-comment">// statements that perform the work of the task</span>
    . . .
    c = foo1;  <span class="hljs-comment">// the assignments that initialize result regs</span>
    d = foo2;
    e = foo3;
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">endtask</span></code></pre><p>ä¸€ç§æ˜¯å‚æ•°åˆ—è¡¨åœ¨å‡½æ•°ååå®šä¹‰ã€‚ä¸€ç§æ˜¯åœ¨taské‡Œé¢å®šä¹‰ã€‚</p><blockquote><p>my_task (v, w, x, y, z); //è°ƒç”¨è¯­å¥</p></blockquote><p>The task-enabling arguments ( v , w , x , y , and z ) correspond to the arguments ( a , b , c , d , and e ) defined by the task.</p><p>å½“å‡½æ•°è°ƒç”¨æ—¶:</p><blockquote><p>a = v;<br>b = w;<br>c = x;</p></blockquote><p>When the task completes, the following assignments to return the computed values to the<br>calling process are performed:(å½“å‡½æ•°ç»“æŸåï¼Œä¸‹é¢çš„èµ‹å€¼è¿”å›å¯¹åº”çš„ç»“æœ)</p><blockquote><p>x = c;<br>y = d;<br>z = e;</p></blockquote><p class="note note-primary">task enable statementä¸­å‚æ•°ä½ç½®è¦å’Œtask definition å¯¹åº”ã€‚ä¸ç®¡ä½ æ˜¯å“ªç§æ–¹æ³•å®šä¹‰task</p><h3 id="3-3ã€Task-memory-usage-and-concurrent-face-with-head-bandage-ï¼ˆå¯ä»¥è·³è¿‡ï¼‰"><a href="#3-3ã€Task-memory-usage-and-concurrent-face-with-head-bandage-ï¼ˆå¯ä»¥è·³è¿‡ï¼‰" class="headerlink" title="3.3ã€Task memory usage and concurrent :face_with_head_bandage:ï¼ˆå¯ä»¥è·³è¿‡ï¼‰"></a>3.3ã€Task memory usage and concurrent :face_with_head_bandage:ï¼ˆå¯ä»¥è·³è¿‡ï¼‰</h3><p>A task may be enabled more than once concurrently. All variables of an automatic task shall be replicated on each concurrent task invocation to store state specific to that invocation.All variables of a static task shall be static in that there shall be a single variable corresponding to each declared local variable in a module instance, regardless of the number of concurrent activations of the task. However, static tasks in different instances of a module shall have separate storage from each other.</p><hr><h2 id="4ã€Disabling-of-named-blocks-and-tasks"><a href="#4ã€Disabling-of-named-blocks-and-tasks" class="headerlink" title="4ã€Disabling of named blocks and tasks"></a>4ã€Disabling of named blocks and tasks</h2><p>The <code>disable statement</code> provides the ability to terminate the activity associated with concurrently active procedures, while maintaining the structured nature of Verilog HDL procedural descriptions.ï¼ˆdisable è¯­å¥å¯ä»¥ç»ˆæ­¢æ­£åœ¨è¿è¡Œçš„è¿‡ç¨‹ï¼‰</p><ol><li><pre><code class="hljs verilog"><span class="hljs-keyword">begin</span>  : block_name
    rega = regb;
    <span class="hljs-keyword">disable</span>  block_name;
    regc = rega; <span class="hljs-comment">// this assignment will never execute</span>
<span class="hljs-keyword">end</span></code></pre></li><li><pre><code class="hljs verilog"><span class="hljs-keyword">begin</span>  : block_name
    ...
    <span class="hljs-keyword">if</span>  (a == <span class="hljs-number">0</span>)
    <span class="hljs-keyword">disable</span>  block_name;
    ...
<span class="hljs-keyword">end</span> <span class="hljs-comment">// end of named block</span>
<span class="hljs-comment">// continue with code following named block</span></code></pre></li><li><pre><code class="hljs verilog"><span class="hljs-keyword">task</span>  proc_a;
    <span class="hljs-keyword">begin</span>
    ...
    ...
    <span class="hljs-keyword">if</span>  (a == <span class="hljs-number">0</span>)
        <span class="hljs-keyword">disable</span>  proc_a; <span class="hljs-comment">// return if true(æ§åˆ¶æƒäº¤å›è°ƒç”¨è¯­å¥)</span>
    ...
    ...
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">endtask</span></code></pre></li><li><pre><code class="hljs verilog"><span class="hljs-keyword">begin</span> : <span class="hljs-keyword">break</span>
    <span class="hljs-keyword">for</span>  (i = <span class="hljs-number">0</span>; i &lt; n; i = i+<span class="hljs-number">1</span>)  <span class="hljs-keyword">begin</span>  : <span class="hljs-keyword">continue</span>
        @ clk
            <span class="hljs-keyword">if</span>  (a == <span class="hljs-number">0</span>)			 <span class="hljs-comment">// "continue" loop</span>
                <span class="hljs-keyword">disable</span>  <span class="hljs-keyword">continue</span>;	 <span class="hljs-comment">//(ç›¸å½“äºcé‡Œé¢çš„break)</span>
            statements
            statements
         @ clk
            <span class="hljs-keyword">if</span>  (a == b) 			<span class="hljs-comment">// "break" from loop</span>
                <span class="hljs-keyword">disable</span>  <span class="hljs-keyword">break</span>;		<span class="hljs-comment">// (ç›¸å½“äºcé‡Œé¢çš„break)</span>
            statements
            statements
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span></code></pre></li><li><pre><code class="hljs verilog"><span class="hljs-keyword">fork</span>
	<span class="hljs-keyword">begin</span>  : event_expr
        @ ev1;
        <span class="hljs-keyword">repeat</span>  (<span class="hljs-number">3</span>)  @ trig;
        # d action (areg, breg);	<span class="hljs-comment">//(åªæœ‰å½“ev1å‡ºç°ï¼Œtrigå‡ºç°3æ¬¡æ‰è§¦å‘)</span>
	<span class="hljs-keyword">end</span>
    @ reset  <span class="hljs-keyword">disable</span>  event_expr;	<span class="hljs-comment">//(åŒä¸Šé¢å¹¶è¡Œè¿›è¡Œ)</span>
<span class="hljs-keyword">join</span></code></pre></li><li><pre><code class="hljs verilog"><span class="hljs-keyword">always</span> <span class="hljs-keyword">begin</span> : monostable
			# <span class="hljs-number">250</span> q = <span class="hljs-number">0</span>;
<span class="hljs-keyword">end</span>
<span class="hljs-keyword">always</span>   @ retrig  <span class="hljs-keyword">begin</span>	<span class="hljs-comment">//ï¼ˆåªè¦retrigå˜åŒ–é—´éš”å°äº250ï¼Œé‚£ä¹ˆqå°±ä¸€ç›´ä¸º1)</span>
    <span class="hljs-keyword">disable</span>  monostable;
    q = <span class="hljs-number">1</span>;
<span class="hljs-keyword">end</span></code></pre></li></ol><h2 id="5ã€Functions-and-function-calling"><a href="#5ã€Functions-and-function-calling" class="headerlink" title="5ã€Functions and function calling"></a>5ã€Functions and function calling</h2><h3 id="5-1ã€Function-declarations"><a href="#5-1ã€Function-declarations" class="headerlink" title="5.1ã€Function declarations"></a>5.1ã€Function declarations</h3><pre><code class="hljs verilog">function_declaration ::= (From A<span class="hljs-variable">.2</span><span class="hljs-variable">.6</span>)
            <span class="hljs-keyword">function</span> [ <span class="hljs-keyword">automatic</span> ] [ function_range_or_type ] 
            function_identifier ; 
            function_item_declaration { function_item_declaration } 
            function_statement 
            <span class="hljs-keyword">endfunction</span> 
            
            | <span class="hljs-keyword">function</span> [ <span class="hljs-keyword">automatic</span> ] [ function_range_or_type ] 
            function_identifier ( function_port_list ) ; 
            { block_item_declaration } 
            function_statement 
            <span class="hljs-keyword">endfunction</span></code></pre><pre><code class="hljs verilog"><span class="hljs-keyword">function</span>  [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>] getbyte; 		<span class="hljs-comment">// (å¦‚æœæ²¡æœ‰ç»™[range]é‚£ä¹ˆé»˜è®¤ä¸ºscalar)</span>
    <span class="hljs-keyword">input</span>  [<span class="hljs-number">15</span>:<span class="hljs-number">0</span>] address; 
    <span class="hljs-keyword">begin</span>
    <span class="hljs-comment">// code to extract low-order byte from addressed word</span>
    . . .
    getbyte =  result <span class="hljs-number">_</span>expression;
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">endfunction</span></code></pre><pre><code class="hljs verilog"><span class="hljs-keyword">function</span>  [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>] getbyte ( <span class="hljs-keyword">input</span>  [<span class="hljs-number">15</span>:<span class="hljs-number">0</span>] address); 
    <span class="hljs-keyword">begin</span>
    <span class="hljs-comment">// code to extract low-order byte from addressed word</span>
    . . .
    getbyte =  result <span class="hljs-number">_</span>expression;
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">endfunction</span></code></pre><h3 id="5-2ã€Returning-a-value-from-a-function"><a href="#5-2ã€Returning-a-value-from-a-function" class="headerlink" title="5.2ã€Returning a value from a function"></a>5.2ã€Returning a value from a function</h3><p>The function definition shall implicitly declare a variable, internal to the function, with the same name as the function. This variable either defaults to a 1-bit reg or is the same type as the type specified in the function declaration. The function definition initializes the return value from the function by assigning the function result to the internal variable with the same name as the function.</p><p>å‡½æ•°å®šä¹‰å°±éšå«äº†ä¸€ä¸ªå˜é‡ï¼ˆå³å‡½æ•°åï¼‰</p><p>å‡½æ•°é€šè¿‡ç»™è¿™ä¸ªéšå«å˜é‡èµ‹å€¼è¿”å›å€¼ã€‚</p><h3 id="5-3ã€Calling-a-function"><a href="#5-3ã€Calling-a-function" class="headerlink" title="5.3ã€Calling a function"></a>5.3ã€Calling a function</h3><pre><code class="hljs verilog">function_call ::= (From A<span class="hljs-variable">.8</span><span class="hljs-variable">.2</span>)
        hierarchical_function_identifier{ attribute_instance } ( expression { , expression } )</code></pre><pre><code class="hljs verilog">word = control ? {getbyte(msbyte), getbyte(lsbyte)}:<span class="hljs-number">0</span>;(æŠŠä¸¤æ¬¡å‡½æ•°è°ƒç”¨çš„ç»“æœæ‹¼æ¥èµ·æ¥)</code></pre><h3 id="5-4ã€Function-rules"><a href="#5-4ã€Function-rules" class="headerlink" title="5.4ã€Function rules"></a>5.4ã€Function rules</h3><ol><li><p>A function shall not have any nonblocking assignments or procedural continuous assignments.</p><p>å‡½æ•°ä¸èƒ½æœ‰<code>éé˜»å¡èµ‹å€¼</code>æˆ–è€…<code>è¿‡ç¨‹è¿ç»­èµ‹å€¼</code>ï¼ˆåœ¨ä¸€ä¸ªæ—¶é—´å•ä½å†…å®Œæˆï¼‰</p></li><li><p>A function shall not have any event triggers.</p><p>å‡½æ•°ä¸èƒ½æœ‰ä»»ä½•<code>æ—¶é—´è§¦å‘</code></p></li></ol><pre><code class="hljs verilog"><span class="hljs-keyword">module</span>  tryfact;
<span class="hljs-comment">// define the function</span>
<span class="hljs-keyword">function</span> <span class="hljs-keyword">automatic</span>   <span class="hljs-keyword">integer</span>  factorial;
<span class="hljs-keyword">input</span>  [<span class="hljs-number">31</span>:<span class="hljs-number">0</span>] operand;
<span class="hljs-keyword">integer</span>  i;
<span class="hljs-keyword">if</span>  (operand &gt;= <span class="hljs-number">2</span>) 
	factorial = factorial (operand - <span class="hljs-number">1</span>) * operand;
<span class="hljs-keyword">else</span>
	factorial = <span class="hljs-number">1</span>;
<span class="hljs-keyword">endfunction</span>

<span class="hljs-comment">// test the function</span>
<span class="hljs-keyword">integer</span>  result;
<span class="hljs-keyword">integer</span>  n;
<span class="hljs-keyword">initial</span>   <span class="hljs-keyword">begin</span>
<span class="hljs-keyword">for</span>  (n = <span class="hljs-number">0</span>; n &lt;= <span class="hljs-number">7</span>; n = n+<span class="hljs-number">1</span>)  <span class="hljs-keyword">begin</span>
result = factorial(n);
<span class="hljs-built_in">$display</span> (<span class="hljs-string">"%0d factorial=%0d"</span>, n, result);</code></pre><h3 id="5-5ã€-Use-of-constant-functions-face-with-head-bandage-ï¼ˆå¯ä»¥è·³è¿‡ï¼‰"><a href="#5-5ã€-Use-of-constant-functions-face-with-head-bandage-ï¼ˆå¯ä»¥è·³è¿‡ï¼‰" class="headerlink" title="5.5ã€ Use of constant functions:face_with_head_bandage:ï¼ˆå¯ä»¥è·³è¿‡ï¼‰"></a>5.5ã€ Use of constant functions<span class="github-emoji" style="display:inline;vertical-align:middle;color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f915.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f915.png?v8">ğŸ¤•</span>ï¼ˆå¯ä»¥è·³è¿‡ï¼‰</h3><p>Constant function calls are used to support the building of complex calculations of values at elaboration time</p><p>å¸¸é‡å‡½æ•°è°ƒç”¨ç”¨äºæ”¯æŒåœ¨ç²¾åŒ–é˜¶æ®µæ„å»ºå¤æ‚çš„å€¼è®¡ç®—</p><p><span class="github-emoji" style="display:inline;vertical-align:middle;color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f642.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f642.png?v8">ğŸ™‚</span>o_o â€¦.å¾…å¡«å‘ã€‚</p><h2 id="Renference"><a href="#Renference" class="headerlink" title="Renference"></a>Renference</h2><p>[IEEE Std 1364â„¢-2005ä¸‹è½½ğŸ”—]ï¼šé“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1ryz4IAuQzNPnGifUJ8oAGw" rel="external nofollow noreferrer">https://pan.baidu.com/s/1ryz4IAuQzNPnGifUJ8oAGw</a><br>æå–ç ï¼š2qvb</p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>Digital IC</category>
        <category>verilog</category>
      </categories>
      <tags>
        <tag>specification</tag>
      </tags>
  </entry>
  <entry>
    <title>Unprivileged Spec(1)--RV32I</title>
    <url>/posts/6c2bdcd1/</url>
    <content><![CDATA[<center>RV32I Base Integer Instruction Set</center><h1 id="1-Preface"><a href="#1-Preface" class="headerlink" title="1 Preface"></a>1 Preface</h1><blockquote><ul><li>RV32Iæ˜¯ä¸ºäº†è¶³å¤Ÿæˆä¸ºç¼–è¯‘å™¨ç›®æ ‡å¹¶èƒ½æ”¯æŒç°ä»£æ“ä½œç³»ç»Ÿç¯å¢ƒè€Œè®¾è®¡çš„ä¸€ä¸ªåŸºæœ¬æ•´æ•°æŒ‡ä»¤é›†ã€‚å®ƒä¹Ÿä¸ºäº†å‡å°‘ç¡¬ä»¶å®ç°çš„æœ€å°éœ€æ±‚è€Œè®¾è®¡ã€‚RV32IåŒ…å«40ä¸ªç‹¬ç«‹çš„æŒ‡ä»¤ï¼Œå°½ç®¡ä¸€äº›ç®€å•çš„å®ç°å¯èƒ½ç”¨å•ä¸€çš„ç³»ç»Ÿç¡¬ä»¶æŒ‡ä»¤ï¼ˆa single <a href="#system">SYSTEM hardware instruction</a>)ä»£æ›¿ECALL/EBREAKæŒ‡ä»¤ï¼Œå®ƒæ€»æ˜¯æ•è·å¼‚å¸¸(always traps)å¹¶ä¸”å¯èƒ½å°†FENCEæŒ‡ä»¤å®ç°ä¸ºNOPï¼Œä»¥å‡å°‘æŒ‡ä»¤æ•°åˆ°38ä¸ªã€‚RV32Ièƒ½å¤Ÿæ¨¡æ‹Ÿå‡ ä¹ä»»ä½•çš„ISAæ‰©å±•ï¼ˆé™¤äº†Aæ‰©å±•ï¼Œå®ƒéœ€è¦é¢å¤–ç¡¬ä»¶æ”¯æŒåŸå­æ“ä½œ(atomicityï¼‰</li></ul><ul><li>åœ¨å®è·µä¸­ï¼ŒåŒ…å«æœºå™¨æ¨¡å¼ç‰¹æƒæ¶æ„çš„ç¡¬ä»¶å®ç°å°†éœ€è¦9ä¸ªCSRæŒ‡ä»¤ã€‚</li></ul><ul><li>åŸºæœ¬æ•´æ•°æŒ‡ä»¤é›†çš„å­é›†ä¹Ÿè®¸å¯¹äºæ•™å­¦ç›®çš„å¾ˆæœ‰ç”¨(pedagogical purposes), ä½†æ˜¯åŸºç¡€å·²ç»è¢«å®šä¹‰ï¼Œå¯¹å®ç°å…¶å­é›†çš„çœŸæ­£çš„ç¡¬ä»¶é™¤äº†å¿½ç•¥éå¯¹é½å†…å­˜è®¿é—®å¹¶æŠŠæ‰€æœ‰çš„SYSTEM instructionè§†ä¸ºå•ä¸€çš„å¼‚å¸¸(single trap)ï¼Œæˆ‘ä»¬ä¸åº”è¯¥æœ‰ä»€ä¹ˆå…¶å®ƒçš„åŠ¨æœºã€‚</li></ul><hr><p>å…³äºRV32Içš„å¤§å¤šæ³¨é‡Šä¹Ÿé€‚ç”¨äºRV64I baseã€‚</p></blockquote><h1 id="2-Programmerâ€™s-Model"><a href="#2-Programmerâ€™s-Model" class="headerlink" title="2 Programmerâ€™s Model"></a>2 Programmerâ€™s Model</h1><blockquote><p>å¯¹äºRV32Iéç‰¹æƒçŠ¶æ€ä¸€å…±æœ‰32ä¸ªå¯„å­˜å™¨(éƒ½æ˜¯32ä½å®½ï¼Œi.e. ,XLEN=32)ï¼š<code>x0~x31</code>;x0è¢«ç¡¬ç¼–ç åˆ°0ã€‚å¦å¤–31ä¸ªå¯„å­˜å™¨ä¿å­˜çš„å€¼å¯ä»¥è¢«è§£é‡Šä¸ºï¼šâ… ã€å¸ƒå°”å€¼çš„é›†åˆï¼Œâ…¡ã€è¡¥ç çš„æœ‰ç¬¦å·äºŒè¿›åˆ¶æ•´æ•°ï¼Œâ…¢ã€æ— ç¬¦å·äºŒè¿›åˆ¶æ•´æ•°</p><p>æœ‰ä¸€ä¸ªé¢å¤–çš„éç‰¹æƒå¯„å­˜å™¨ï¼Œ<code>pc</code>(program counter)ï¼šä¿å­˜å½“å‰æŒ‡ä»¤çš„åœ°å€</p></blockquote><ul><li>åœ¨Base Integer ISAä¸­ï¼Œæ²¡æœ‰æŒ‡å®šçš„æ ˆæŒ‡é’ˆæˆ–è€…å­ä¾‹ç¨‹è¿”å›åœ°å€é“¾æ¥å¯„å­˜å™¨(link register)ï¼›æŒ‡ä»¤ç¼–ç å…è®¸ä»»ä½•å¯„å­˜å™¨è¢«ç”¨äºè¿™ä¸ªç›®çš„ï¼›ä½†æ˜¯ï¼Œæ ‡å‡†è½¯ä»¶è°ƒç”¨æƒ¯ä¾‹(calling convention)ä½¿ç”¨å¯„å­˜å™¨<code>x1</code>ä¿å­˜è°ƒç”¨çš„è¿”å›åœ°å€ï¼Œ<code>x5</code>ä½œä¸ºå¤‡ç”¨é“¾æ¥å¯„å­˜å™¨ã€‚æ ‡å‡†è°ƒç”¨ä¾‹ç¨‹ä½¿ç”¨<code>x2</code>ä½œä¸ºæ ˆæŒ‡é’ˆ(stack pointer)</li><li>ç¡¬ä»¶å¯ä»¥ä½¿ç”¨<code>x1</code>æˆ–<code>x2</code>æ¥åŠ é€Ÿå‡½æ•°è°ƒç”¨å’Œè¿”å›(å› ä¸ºå¯ä»¥å°½æ—©è§£ç )ï¼›<a href="#jal">è¯¦æƒ…è§<code>JAL</code>å’Œ<code>JALR</code>æŒ‡ä»¤</a></li><li>å¯é€‰çš„å‹ç¼©16-bitæŒ‡ä»¤æ ¼å¼åŸºäºè¿™æ ·çš„å‡è®¾è®¾è®¡çš„ï¼š<code>x1</code>ï¼šè¿”å›åœ°å€å¯„å­˜å™¨ï¼›<code>x2</code>:æ ˆæŒ‡é’ˆã€‚ä½¿ç”¨å…¶ä»–çº¦å®šçš„è½¯ä»¶å°†æ­£å¸¸è¿è¡Œï¼Œä½†å¯èƒ½æœ‰è¾ƒå¤§çš„ä»£ç å¤§å°ã€‚</li></ul><hr><p><strong><font color="red">notesï¼š</font></strong></p><ul><li>å¯ç”¨æ¶æ„å¯„å­˜å™¨(available architectural registers)çš„æ•°é‡èƒ½å¤Ÿå¯¹<code>ä»£ç å¤§å°</code>ï¼Œ<code>æ€§èƒ½</code>ï¼Œ<code>èƒ½è€—</code>äº§ç”Ÿé‡å¤§å½±å“ã€‚å°½ç®¡16ä¸ªå¯„å­˜å™¨å¯¹äºè¿è¡Œç¼–è¯‘ä»£ç çš„æ•´æ•°ISAæ¥è¯´æ˜¯è¶³å¤Ÿçš„ï¼Œä½†æ˜¯åœ¨é•¿åº¦ä¸º16ä½ä½¿ç”¨3-addressæ ¼å¼çš„æŒ‡ä»¤ä¸­ç¼–ç æ‹¥æœ‰16ä¸ªå¯„å­˜å™¨å®Œæ•´çš„ISAæ˜¯ä¸å¯èƒ½çš„ã€‚(â­PS:16ä¸ªå¯„å­˜å™¨ï¼Œaddressè‡³å°‘4ä½ï¼Œä¸‰åœ°å€å°±12ä½ï¼Œé‚£ä¹ˆåªå‰©ä¸‹4ä½åŒºåˆ†ä¸åŒçš„æŒ‡ä»¤äº†,å³æœ€å¤š16æ¡ä¸åŒçš„æŒ‡ä»¤)ã€‚</li><li>å°½ç®¡2-addressæ˜¯å¯èƒ½çš„ã€‚ä½†å®ƒå¢åŠ æŒ‡ä»¤æ¡æ•°å¹¶ä¸”é™ä½æ•ˆç‡ã€‚æˆ‘ä»¬æƒ³è¦é¿å…ç«‹å³æ•°æŒ‡ä»¤çš„å¤§å°æ¥ç®€åŒ–ç¡¬ä»¶å®ç°ï¼Œä¸€æ—¦32-bitçš„æŒ‡ä»¤å¤§å°è¢«é‡‡ç”¨ï¼Œæ”¯æŒ32ä¸ªæ•´æ•°å¯„å­˜å™¨å°±å¾ˆæ˜¾è€Œæ˜“è§äº†ã€‚ä¸€ä¸ªæ›´å¤§æ•°é‡çš„æ•´æ•°å¯„å­˜å™¨ä¹Ÿæœ‰åŠ©äºæé«˜é«˜æ€§èƒ½ä»£ç çš„æ€§èƒ½ï¼Œå¯å¹¿æ³›ä½¿ç”¨<code>å¾ªç¯å±•å¼€</code>ï¼ˆloop unrolling)ã€<code>è½¯ä»¶æµæ°´çº¿</code>(software pipelining)å’Œ<code>ç¼“å­˜å¹³é“º</code>(cache tiling)ã€‚â“</li><li>åŸºäºä¸Šé¢è¿™äº›åŸå› ï¼Œæˆ‘ä»¬ä¸ºåŸºç¡€ISAé€‰æ‹©äº†ä¸€ä¸ªå¸¸è§„å¤§å°ï¼ˆconventional size)â€”â€”32ä¸ªæ•´æ•°å¯„å­˜å™¨ã€‚åŠ¨æ€å¯„å­˜å™¨ä½¿ç”¨è¶‹å‘äºè¢«ä¸€äº›ç»å¸¸è®¿é—®çš„å¯„å­˜å™¨ä¸»å®°ï¼Œå¹¶ä¸”<code>regfile</code>(å¯„å­˜å™¨å †)çš„å®ç°å¯è¢«ä¼˜åŒ–ä»¥å‡å°‘é¢‘ç¹è®¿é—®å¯„å­˜å™¨çš„è®¿é—®èƒ½é‡(access energy)ã€‚</li><li>å¯é€‰çš„16ä½å‹ç¼©æŒ‡ä»¤æ ¼å¼ç»å¤§éƒ¨åˆ†åªä½¿ç”¨8ä¸ªå¯„å­˜å™¨ï¼Œå› æ­¤èƒ½æä¾›ç¨ å¯†çš„æŒ‡ä»¤ç¼–ç (dense instruction encoding),ä½†æ˜¯å¦‚æœæƒ³è¦çš„è¯ï¼Œé¢å¤–çš„æŒ‡ä»¤é›†æ‰©å±•èƒ½æ”¯æŒæ›´å¤§çš„å¯„å­˜å™¨ç©ºé—´(è¦ä¹ˆæ‰å¹³çš„è¦ä¹ˆåˆ†å±‚æ¬¡çš„)ã€‚</li></ul><h1 id="3-Base-Instruction-Formats"><a href="#3-Base-Instruction-Formats" class="headerlink" title="3 Base Instruction Formats"></a>3 Base Instruction Formats</h1><blockquote><p>æœ‰4ç§æ ¸å¿ƒçš„æŒ‡ä»¤æ ¼å¼ï¼šR/I/S/Uã€‚æŒ‡ä»¤é•¿åº¦éƒ½æ˜¯32ä½ï¼Œå¹¶ä¸”å¿…é¡»åœ¨å†…å­˜ä¸­ä»¥4å­—èŠ‚ä¸ºè¾¹ç•Œå¯¹é½ã€‚æŒ‡ä»¤åœ°å€éå¯¹é½çš„å¼‚å¸¸ï¼Œå¸¸å¸¸æ˜¯ç”±äºåˆ†æ”¯çš„å‘ç”Ÿ(taken branch)æˆ–è€…éæ¡ä»¶è·³è½¬çš„ç›®æ ‡åœ°å€ä¸æ˜¯4å­—èŠ‚å¯¹é½ã€‚</p></blockquote><ul><li><p>å¯¹äºè§£ç ä¸€ä¸ªä¿ç•™æŒ‡ä»¤çš„è¡Œä¸ºæ˜¯æ²¡æœ‰è§„å®šçš„(unspecified)</p></li><li><p>RISC-V ISAä¿æŒæºå¯„å­˜å™¨(<code>rs1</code>å’Œ<code>rs2</code>)å’Œç›®æ ‡å¯„å­˜å™¨(<code>rd</code>)çš„ä½ç½®åœ¨æ‰€æœ‰æŒ‡ä»¤æ ¼å¼ä¸­ç›¸åŒä»¥ç®€åŒ–è§£ç ã€‚é™¤äº†ä½¿ç”¨åœ¨CSRæŒ‡ä»¤ä¸­çš„5bitçš„ç«‹å³æ•°ï¼Œç«‹å³æ•°æ€»æ˜¯<code>sign-extended</code>ï¼Œé€šå¸¸æ˜¯æ‰“åŒ…åˆ°æŒ‡ä»¤ä¸­æœ€å·¦è¾¹çš„å¯ç”¨ä½ï¼Œè¿™æ ·åˆ†é…ä»¥å‡å°‘ç¡¬ä»¶çš„å¤æ‚ç¨‹åº¦ã€‚ç‰¹åˆ«æ˜¯ï¼Œå¯¹äºæ‰€æœ‰ç«‹å³æ•°çš„ç¬¦å·ä½æ€»æ˜¯åœ¨æœ€é«˜ä½(ä¹Ÿå°±æ˜¯Ins[31])æ¥åŠ é€Ÿç¬¦å·æ‰©å±•ç”µè·¯ã€‚</p><p><img src="https://image.beenli.cn/img/20200930/F4vpswvD8a17.jpg?imageslim" srcset="/img/loading.gif" alt="mark"><br><strong><i></i></strong></p><center><strong><i>imm[x]æŒ‡çš„æ˜¯å½“å‰ä½åœ¨æ‰©å±•æˆ32ä½ç«‹å³æ•°ä¸­çš„ä½ç½®</i></strong></center><p></p><ul><li>å®é™…åº”ç”¨ä¸­ï¼Œå¤§éƒ¨åˆ†ç«‹å³æ•°è¦ä¹ˆå¾ˆå°ï¼Œè¦ä¹ˆéœ€è¦æ‰€æœ‰çš„ä½æ•°(XLEN bits)ã€‚æˆ‘ä»¬é€‰æ‹©éå¯¹ç§°ç«‹å³æ•°åˆ†å‰²ï¼šå¸¸è§„æŒ‡ä»¤ä¸­ç«‹å³æ•°å 12bits;ç‰¹æ®Šçš„ load-upper-immediate æŒ‡ä»¤ä¸­ç«‹å³æ•°å 20bitsã€‚è¿™æ ·åšæ˜¯ä¸ºäº†ç»™å¸¸è§„æŒ‡ä»¤æ›´å¤šçš„opcodeç©ºé—´ã€‚</li></ul></li></ul><h1 id="4-Immediate-Encoding"><a href="#4-Immediate-Encoding" class="headerlink" title="4 Immediate Encoding"></a>4 Immediate Encoding</h1><blockquote><p>æŒ‡ä»¤æ ¼å¼è¿˜æœ‰ä¸¤ä¸ªå˜ç§(variants)ï¼šB/Jï¼Œå®ƒä»¬åŸºäºç«‹å³æ•°çš„å¤„ç†è¡ç”Ÿå‡ºæ¥ã€‚</p></blockquote><p><img src="https://image.beenli.cn/img/20200930/NR78wxr6Nbb8.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ul><li>Så’ŒBä»…æœ‰çš„åŒºåˆ«ï¼šåœ¨Bæ ¼å¼ä¸­12bitç«‹å³æ•°åŸŸä¹˜ä»¥2ç”¨äºç¼–ç åˆ†æ”¯åç§»ã€‚è€Œä¸æ˜¯åƒä¼ ç»Ÿåšæ³•é‚£æ ·ï¼Œå°†æŒ‡ä»¤ç¼–ç ä¸­çš„æ‰€æœ‰ç«‹å³æ•°ä½ç”¨ç¡¬ä»¶å·¦ç§»ä¸€ä½,ä¸­é—´çš„ä½æ•°(imm[10:1])å’Œç¬¦å·ä½ä¿ç•™åœ¨å›ºå®šä½ç½®ï¼Œè€ŒSæ ¼å¼ä¸­çš„æœ€ä½ä½(inst[7])åœ¨Bæ ¼å¼ä¸­ç¼–ç ä¸€ä¸ªé«˜é˜¶ä½ã€‚</li><li>Uå’ŒJçš„ä»…æœ‰åŒºåˆ«ï¼šUè¦å‘å·¦ç§»12ä½ï¼›è€ŒJåªç”¨ç§»åŠ¨1ä½ã€‚åœ¨Uå’ŒJæŒ‡ä»¤ç«‹å³æ•°ä¸­æŒ‡ä»¤çš„ä½ç½®å°½é‡è·Ÿå…¶ä»–æ ¼å¼çš„æŒ‡ä»¤æˆ–è€…å®ƒä»¬äº’ç›¸é‡å ã€‚</li></ul><p><img src="https://image.beenli.cn/img/20200930/CoSeYfK4wdG4.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><h1 id="5-Computational"><a href="#5-Computational" class="headerlink" title="5 Computational "></a>5 <a name="compute">Computational</a></h1><blockquote><p>å¤§å¤šæ•°çš„<code>æ•´æ•°ç®—æœ¯æŒ‡ä»¤</code>(Integer computational instruction)å¯¹ä¿å­˜åœ¨æ•´æ•°å¯„å­˜å™¨ä¸­çš„<code>XLEN</code>ä½çš„å€¼è¿›è¡Œæ“ä½œã€‚æ•´æ•°è®¡ç®—æŒ‡ä»¤è¦ä¹ˆè¢«ç¼–ç ä¸ºä½¿ç”¨Iæ ¼å¼çš„å¯„å­˜å™¨-ç«‹å³æ•°æ“ä½œï¼›è¦ä¹ˆä½¿ç”¨Ræ ¼å¼çš„å¯„å­˜å™¨-å¯„å­˜å™¨æ“ä½œã€‚å¯¹äºè¿™ä¸¤ç§ç±»å‹æŒ‡ä»¤çš„ç›®çš„å¯„å­˜å™¨éƒ½æ˜¯<code>rd</code>ã€‚æ²¡æœ‰æ•´å‹è®¡ç®—æŒ‡ä»¤ä¼šå¯¼è‡´ç®—æœ¯å¼‚å¸¸</p></blockquote><ul><li><p>åŸºæœ¬æŒ‡ä»¤é›†ä¸åŒ…æ‹¬å¯¹æ•´æ•°ç®—æœ¯è¿ç®—ä¸Šåš<code>æº¢å‡ºæ£€æŸ¥</code>(overflow checks)æ”¯æŒçš„ç‰¹æ®ŠæŒ‡ä»¤é›†ã€‚å› ä¸ºè®¸å¤šæº¢å‡ºæ£€æŸ¥èƒ½å¤Ÿæ›´ä¾¿å®œåœ°(cheaply)ä½¿ç”¨RISC-Våˆ†æ”¯æ¥å®ç°</p></li><li><p>å¯¹<code>æ— ç¬¦å·åŠ æ³•</code>çš„æº¢å‡ºæ£€æŸ¥ä»…ä»…éœ€è¦åœ¨åŠ æ³•æŒ‡ä»¤ååŠ ä¸Šä¸€æ¡é¢å¤–çš„åˆ†æ”¯æŒ‡ä»¤</p><pre><code class="hljs assembly">add t0,t1,t2
blut t0, t1, overflow</code></pre></li><li><p>å¯¹äºæœ‰ç¬¦å·åŠ æ³•ï¼šå¦‚æœä¸€ä¸ªæ“ä½œæ•°çš„ç¬¦å·å·²çŸ¥ï¼Œæº¢å‡ºæ£€æŸ¥ä»…éœ€è¦åŠ æ³•ä¹‹åçš„ä¸€ä¸ªåˆ†æ”¯ï¼ˆè¦†ç›–äº†å¸¦æœ‰ç«‹å³æ•°æ“ä½œæ•°çš„å¸¸è§åŠ æ³•æƒ…å½¢ï¼‰</p><pre><code class="hljs assembly">addi t0, t1, +imm
blt t0, t1, overflow</code></pre></li><li><p>å¯¹äºå¸¸è§„çš„<code>æœ‰ç¬¦å·åŠ æ³•</code>ï¼ŒåŠ æ³•ä¹‹åéœ€è¦ä¸‰æ¡é¢å¤–çš„æŒ‡ä»¤ã€‚åˆ©ç”¨å½“ä¸”ä»…å½“å¦ä¸€ä¸ªæ“ä½œæ•°ä¸ºè´Ÿæ—¶ï¼Œè¯¥å’Œåº”å°äºå…¶ä¸­ä¸€ä¸ªæ“ä½œæ•°çš„è§‚å¯Ÿã€‚</p><pre><code class="hljs assembly">add t0, t1, t2
slti t3, t2, 0
slt t4, t0, t1
bne t3, t4, overflow</code></pre></li><li><p>åœ¨RV64Iä¸­ï¼Œ32ä½æœ‰ç¬¦å·çš„åŠ æ³•æº¢å‡ºå¯ä»¥é€šè¿‡æ¯”è¾ƒADDå’ŒADDWæ“ä½œçš„ç»“æœæ¥è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚(ADDWè‚¯å®šä¸ä¼šæº¢å‡º)</p></li></ul><h2 id="Register-Immediate"><a href="#Register-Immediate" class="headerlink" title="Register-Immediate"></a><a name="arith">Register-Immediate</a></h2><p><img src="https://image.beenli.cn/img/20200930/9lWr2QpMilov.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ol><li><p><code>ADDI</code>ï¼šå°†12ä½ç«‹å³æ•°ç¬¦å·æ‰©å±•åä¸<code>rs1</code>ä¸­çš„å€¼ç›¸åŠ ï¼Œç®—æœ¯æº¢å‡ºå¿½ç•¥ï¼Œç»“æœçš„ä½32ä½å­˜åˆ°<code>rd</code>å¯„å­˜å™¨ä¸­ã€‚</p><pre><code class="hljs assembly">/* ä¸¤æ¡æŒ‡ä»¤ç­‰æ•ˆ */
ADDI rd, rs1, 0
MV rd , rs1(æ±‡ç¼–ä¼ªæŒ‡ä»¤ï¼šå°†rs1ä¸­çš„å€¼å¤åˆ¶ç»™rd)</code></pre></li><li><p><code>SLTI</code>(set less than immediate): å½“å¯„å­˜å™¨<code>rs1</code>ä¸­çš„å€¼å°äºç«‹å³æ•°ï¼ˆä¿©è€…éƒ½è§†ä¸ºæœ‰ç¬¦å·æ•°)ï¼Œå°†å¯„å­˜å™¨<code>rd</code>ç½®ä¸º1ï¼›å¦åˆ™ç½®0ã€‚<code>SLTIU</code>: åŠŸèƒ½ä¸€æ ·ï¼Œä½†æ˜¯æŠŠæ¯”è¾ƒçš„å¯¹è±¡è§†ä¸ºæ— ç¬¦å·æ•°ã€‚</p><pre><code class="hljs assembly">/* ä¸¤æ¡æŒ‡ä»¤ç­‰æ•ˆ */
SLTIU rd, rs1, 1(å½“rs1ç­‰äº0,rdä¸º1,å¦åˆ™ä¸º0)
SEQZ rd, rs</code></pre></li><li><p><code>ANDI, ORI, XORI</code>: ä¸‰ä¸ªé€»è¾‘è¿ç®—ç¬¦ï¼Œåˆ†åˆ«å¯¹rs1å’Œç«‹å³æ•°æ‰§è¡Œ<code>æŒ‰ä½</code>(bitwise)çš„ä¸ï¼Œæˆ–ï¼Œå¼‚æˆ–è¿ç®—ã€‚</p><pre><code class="hljs assembly">/* ä¸¤æ¡æŒ‡ä»¤ç­‰æ•ˆ */
XORI rd, rs1, -1(-1çš„è¡¥ç ä¸ºå…¨1)
NOT rd, rs(å°†rså„ä½å–åèµ‹å€¼ç»™rd)</code></pre><hr><p><img src="https://image.beenli.cn/img/20200930/ohbIXFmmows6.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p></li></ol><blockquote><p><code>ç§»ä½</code>è¢«ç¼–ç ä¸€ç§ç‰¹æ®Šçš„Iç±»å‹æŒ‡ä»¤æ ¼å¼ã€‚</p><ul><li>è¢«ç§»ä½çš„æ“ä½œæ•°ä¸º<code>rs1</code>ï¼›ç§»ä½çš„ä½æ•°è¢«ç¼–ç åœ¨ç«‹å³æ•°åŸŸçš„ä½äº”ä½ä¸Šã€‚</li><li>ğŸ‘‰ç§»ç±»å‹è¢«ç¼–ç åœ¨ç¬¬30ä½ä¸Šï¼›</li><li><code>SLLI</code>(shift left logical)ï¼š0è¢«ç§»åŠ¨åˆ°ä½ä½</li><li><code>SRLI</code>: 0è¢«ç§»åŠ¨åˆ°é«˜ä½</li><li><code>SRAI</code>: (shift right arithmetic): åŸç¬¦å·ä½å¤åˆ¶åˆ°ç©ºå‡ºçš„é«˜ä½</li></ul></blockquote><hr><p><img src="https://image.beenli.cn/img/20200930/HH9oFeg4OyQC.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ol><li><code>LUI</code>(load upper immediate): ç”¨äºæ„å»º32ä½å¸¸æ•°å¹¶ä½¿ç”¨Uæ ¼å¼æŒ‡ä»¤ã€‚æŠŠU-immediateçš„å€¼æ”¾åœ¨ç›®çš„å¯„å­˜å™¨çš„é«˜20ä½ï¼Œå…¶å®ƒä½ä½ç”¨0å¡«å……ã€‚</li><li><code>AUIPC</code>(add upper immediate to pc)ï¼šç”¨äºæ„å»ºä¸pcç›¸å…³çš„åœ°å€ï¼Œå¹¶ä½¿ç”¨Uæ ¼å¼æŒ‡ä»¤ã€‚å½¢æˆ32ä½çš„åç§»(é«˜20ä½æ¥è‡ªç«‹å³æ•°ï¼Œä½12ä½ç”¨0å¡«å……)ï¼ŒæŠŠè¿™ä¸ªåç§»åŠ åˆ°AUIPCæŒ‡ä»¤çš„åœ°å€ä¸Šï¼Œç„¶åæŠŠç»“æœæ”¾åˆ°<code>rd</code>ä¸­ã€‚ï¼ˆrd = pc-4+im)<ul><li>AUIPCæŒ‡ä»¤æ”¯æŒ<code>åŒæŒ‡ä»¤åºåˆ—</code>(two-instruction sequences)è®¿é—®ç›¸å¯¹PCçš„ä»»æ„åç§»(for both control-flow transfers and data accesses)</li><li>ä¸€ä¸ªAUIPCå’ŒJALRä¸­12ä½åç§»çš„ç»„åˆèƒ½å¤Ÿè½¬æ¢æ§åˆ¶ç»™ä»»æ„32ä½çš„PCç›¸å¯¹åœ°å€(PC-relative address)ï¼Œè€Œä¸€ä¸ªALIPCåŠ ä¸Šä¸€ä¸ªå¸¸è§„loadå’ŒstoreæŒ‡ä»¤ä¸­çš„12ä½ç«‹å³æ•°åç§»èƒ½ä¾›è®¿é—®ä»»æ„32ä½PCç›¸å¯¹åœ°å€çš„æ•°æ®åœ°å€(PC-relative data address)</li><li>å½“å‰PCå€¼å¯ä»¥é€šè¿‡è®¾ç½®ç«‹å³æ•°ä¸º0è·å¾—ï¼Œå°½ç®¡JAL+4æŒ‡ä»¤ä¹Ÿèƒ½è·å¾—æœ¬åœ°PC(JALä¸‹ä¸€æŒ‡ä»¤)ï¼Œå®ƒå¯èƒ½åœ¨ç®€å•å¾®æ¶æ„ä¸­é€ æˆæµæ°´çº¿å´©æºƒï¼Œæˆ–è€…åœ¨æ›´å¤æ‚çš„å¾®æ¶æ„ä¸­æ±¡æŸ“BTB(â“)</li></ul></li></ol><h2 id="Register-Register"><a href="#Register-Register" class="headerlink" title="Register-Register"></a>Register-Register</h2><blockquote><p>RV32Iå®šä¹‰äº†å‡ ä¸ªRå‹ç®—æœ¯è¿ç®—ã€‚æ‰€æœ‰çš„è¿ç®—éƒ½è¯»å–<code>rs1</code>,<code>rs2</code>å¯„å­˜å™¨çš„å€¼ä½œä¸ºæºæ“ä½œæ•°ï¼ŒæŠŠç»“æœå†™å›<code>rd</code>å¯„å­˜å™¨ã€‚<code>funct7</code>å’Œ<code>funct3</code>åŸŸé€‰æ‹©åˆé€‚çš„è¿ç®—ã€‚</p></blockquote><p><img src="https://image.beenli.cn/img/20200930/cdJ8aBabLVTk.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><p><a href="#arith">æ„ä¹‰åŒğŸ‘†ã€‚</a></p><h2 id="NOP-Instruction"><a href="#NOP-Instruction" class="headerlink" title="NOP Instruction"></a>NOP Instruction</h2><p><img src="https://image.beenli.cn/img/20200930/QOhQFMEFTYs1.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ul><li>NOPæŒ‡ä»¤ï¼šä¸ä¼šæ”¹å˜ä»»ä½•æ¶æ„ä¸Šå¯è§çš„çŠ¶æ€ã€‚å‡ºæ¥æ¨è¿›PCï¼Œå¢åŠ ä»»ä½•é€‚ç”¨çš„æ€§èƒ½è®¡æ•°å™¨ã€‚NOPè¢«ç¼–ç ä¸º`ADDI x0, x0, 0</li><li>NOPså¯ä»¥è¢«ç”¨æ¥å¯¹é½ä»£ç æ®µä¸é‡è¦çš„å¾®æ¶æ„åœ°å€è¾¹ç•Œã€‚æˆ–è€…ä¸ºå†…è”ä»£ç ä¿®æ”¹(inline code modification)æµå‡ºç©ºé—´ã€‚å°½ç®¡æœ‰è®¸å¤šå¯èƒ½çš„æ–¹æ³•å»ç¼–ç NOP,æˆ‘ä»¬ä½¿ç”¨äº†è§„èŒƒçš„NOPç¼–ç æ¥å…è®¸å¾®æ¶æ„ä¼˜åŒ–ä»¥åŠæ›´æ˜“è¯»çš„åæ±‡ç¼–è¾“å‡ºã€‚å…¶å®ƒçš„NOPç¼–ç å¯ä»¥ç”¨ä½œæŒ‡ç¤ºæŒ‡ä»¤(HINT instruction)</li><li>é€‰æ‹©ADDIä½œä¸ºNOPç¼–ç æ˜¯å› ä¸ºå®ƒåœ¨è·¨ä¸€ç³»åˆ—ç³»ç»Ÿæ‰§è¡Œæ—¶æœ€å¯èƒ½å ç”¨æœ€å°‘çš„èµ„æº;é™¤æ­¤ä¹‹å¤–ï¼Œè¯¥æŒ‡ä»¤ä»…è¯»å–ä¸€ä¸ªå¯„å­˜å™¨ã€‚å¹¶ä¸”ï¼Œä¸€ä¸ªADDIåŠŸèƒ½å•å…ƒåœ¨è¶…æ ‡é‡è®¾è®¡ä¸­æ›´å®¹æ˜“å¯ç”¨ï¼Œå› ä¸ºaddsæ˜¯æœ€å¸¸è§çš„è¿ç®—</li><li>åœ°å€ç”Ÿæˆå•å…ƒå¯ä»¥ä½¿ç”¨ç›¸åŒçš„ç¡¬ä»¶å¤Ÿæ‰§è¡ŒADDIï¼Œè¯¥ç¡¬ä»¶è¢«ç”¨äºbase+offsetåœ°å€è®¡ç®—ï¼Œè€Œregister-register ADDï¼Œé€»è¾‘è¿ç®—æˆ–ç§»ä½è¿ç®—æ“ä½œéœ€è¦é¢å¤–çš„ç¡¬ä»¶ã€‚</li></ul><h1 id="6-Control-Transfer"><a href="#6-Control-Transfer" class="headerlink" title="6 Control Transfer"></a>6 Control Transfer</h1><blockquote><p>RV32Iæä¾›ä¸¤ç§æ§åˆ¶è½¬ä¹‰æŒ‡ä»¤ï¼š<code>æ— æ¡ä»¶è·³è½¬</code>ï¼Œ<code>æ¡ä»¶åˆ†æ”¯</code></p><p>RV32Iæ§åˆ¶è½¬ä¹‰æŒ‡ä»¤æ²¡æœ‰æ¶æ„ä¸Šå¯è§çš„<code>å»¶è¿Ÿæ§½</code>(delay slot)</p></blockquote><h2 id="Unconditional-Jumps"><a href="#Unconditional-Jumps" class="headerlink" title="Unconditional Jumps"></a>Unconditional Jumps</h2><p><img src="https://image.beenli.cn/img/20200930/qCmY8sLbKGDK.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><p><code>JAL</code>(jump and link)æŒ‡ä»¤ä½¿ç”¨<code>J-type</code>æ ¼å¼ï¼ŒJ-immediateä»¥ä¸¤å­—èŠ‚çš„å€æ•°ç¼–ç ä¸€ä¸ªæœ‰ç¬¦å·åç§»ã€‚(in multiple of 2 bytesï¼›åˆ™è¯¥åç§»è¦ä¹˜ä»¥2)ã€‚åç§»ç¬¦å·æ‰©å±•ï¼Œç„¶ååŠ ä¸Šå½“å‰æŒ‡ä»¤çš„åœ°å€å½¢æˆ<code>è·³è½¬ç›®æ ‡åœ°å€</code>(jump target address)ã€‚Jumpså› æ­¤èƒ½å¤Ÿè®¿é—®Â±1 MiBèŒƒå›´ã€‚JALå­˜å‚¨ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€(pc+4)åˆ°<code>rd</code>ï¼›</p><p>æ ‡å‡†è½¯ä»¶è°ƒç”¨çº¦å®šä½¿ç”¨x1ä½œä¸ºè¿”å›åœ°å€å¯„å­˜å™¨ï¼Œx5ä½œä¸ºå¤‡ç”¨é“¾æ¥å¯„å­˜å™¨ã€‚</p><p><img src="https://image.beenli.cn/img/20200930/VUjOV9BMhinO.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><p><code>JALR</code>(jump and link register)ï¼šé—´æ¥è·³è½¬æŒ‡ä»¤ï¼šä½¿ç”¨<code>I-type</code>ï¼Œç›®æ ‡åœ°å€é€šè¿‡æŠŠç¬¦å·æ‰©å±•çš„12æ¯”ç‰¹ç«‹å³æ•°åŠ åˆ°rs1ä¸Šï¼Œç„¶åç½®ç»“æœçš„æœ€ä½ä½ä¸º0è·å¾—ï¼›ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€(pc+4)å†™åˆ°å¯„å­˜å™¨rdã€‚å¦‚æœç»“æœä¸éœ€è¦ï¼Œå¯ä»¥æŠŠ<code>x0</code>å½“ä½œç›®çš„å¯„å­˜å™¨ã€‚</p><p>å¦‚æœç›®æ ‡åœ°å€æ²¡æœ‰å¯¹é½å››å­—èŠ‚è¾¹ç•Œï¼Œjarå’ŒjarlæŒ‡ä»¤å°†äº§ç”Ÿ<code>æŒ‡ä»¤åœ°å€éå¯¹é½</code>å¼‚å¸¸ã€‚</p><p>è¿”å›åœ°å€<code>é¢„æµ‹æ ˆ</code>(prediction stack)æ˜¯é«˜æ€§èƒ½å–å€¼å•å…ƒçš„ä¸€ä¸ªå¸¸è§ç‰¹ç‚¹ï¼Œè¦æ±‚å‡†ç¡®æ£€æµ‹ç”¨äºè¿‡ç¨‹è°ƒç”¨å’Œè¿”å›çš„æŒ‡ä»¤æ˜¯æœ‰æ•ˆçš„ã€‚</p><ul><li>å¯¹äºRISC-V,å…³äºæŒ‡ä»¤ä½¿ç”¨çš„çº¿ç´¢é€šè¿‡å¯„å­˜å™¨å·çš„ä½¿ç”¨è¢«ç®€å•çš„ç¼–ç ã€‚</li><li>JALæŒ‡ä»¤åº”è¯¥æŠŠè¿”å›åœ°å€å‹è¿›è¿”å›åœ°å€æ ˆ(RAS)ä¸­ï¼Œå½“ä¸”ä»…å½“<code>rd = x1/x5</code>ï¼›</li><li>JALRæŒ‡ä»¤åº”è¯¥push/pop a RAS</li></ul><p><img src="https://image.beenli.cn/img/20200930/WC8l9YmmyroI.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><center>link is true when the register is either x1 or x5</center><h2 id="Conditional-Branches"><a href="#Conditional-Branches" class="headerlink" title="Conditional Branches"></a>Conditional Branches</h2><blockquote><p>æ‰€æœ‰åˆ†æ”¯æŒ‡ä»¤ä½¿ç”¨<code>B-type</code>æ ¼å¼ã€‚</p><p>12æ¯”ç‰¹çš„ç«‹å³æ•°ç”¨2å­—èŠ‚çš„å€æ•°ç¼–ç æœ‰ç¬¦å·åç§»</p><p>ç«‹å³æ•°ç¬¦å·æ‰©å±•åä¸å½“å‰æŒ‡ä»¤åœ°å€ç›¸åŠ ï¼Œå¯ä»¥è®¿é—®çš„åœ°å€èŒƒå›´ï¼š<code>Â±4 KiB</code></p></blockquote><p><img src="https://image.beenli.cn/img/20200930/PR0CJpoojIFU.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><p><code>BEQ</code>:branch equal;&nbsp;&nbsp;<code>BNE</code>: branch not equal;&nbsp;&nbsp;<code>BLT</code>: branch less than;&nbsp;&nbsp;<code>BGE</code>: branch greater than;</p><ul><li>åº”è¯¥å¯¹è½¯ä»¶è¿›è¡Œä¼˜åŒ–ï¼Œä½¿é¡ºåºä»£ç è·¯å¾„æˆä¸ºæœ€å¸¸è§çš„è·¯å¾„ï¼Œå¹¶å°†è¾ƒä¸ç»å¸¸ä½¿ç”¨çš„åˆ†æ”¯ä»£ç è·¯å¾„ç½®äºè¡Œå¤–ã€‚è½¯ä»¶è¿˜åº”è¯¥å‡è®¾ï¼Œè‡³å°‘åœ¨ç¬¬ä¸€æ¬¡é‡åˆ°åˆ†æ”¯æ—¶ï¼Œé¢„æµ‹å‘åè·³è½¬çš„åˆ†æ”¯å‘ç”Ÿï¼Œå‘å‰è·³è½¬çš„åˆ†æ”¯ä¸å‘ç”Ÿã€‚åŠ¨æ€é¢„æµ‹å™¨åº”è¯¥å¿«é€Ÿå­¦ä¹ ä»»ä½•å¯é¢„æµ‹çš„åˆ†æ”¯è¡Œä¸ºã€‚</li><li>ä¸åƒä¸€äº›å…¶å®ƒçš„æ¶æ„ï¼ŒRISC-Vä¸­å¯¹äº<code>éæ¡ä»¶åˆ†æ”¯</code>åº”è¯¥æ€»æ˜¯ä½¿ç”¨<code>jump</code>(JAL with rd=x0)æŒ‡ä»¤è€Œä¸æ˜¯æ¡ä»¶æ€»æ˜¯æ»¡è¶³çš„æœ‰æ¡ä»¶åˆ†æ”¯æŒ‡ä»¤</li><li>RISC-Vè·³è½¬ä¹Ÿæ˜¯ä¸pcç›¸å…³çš„ï¼Œå¹¶ä¸”æ¯”åˆ†æ”¯æ”¯æŒæ›´å¤§çš„åç½®èŒƒå›´ï¼Œè€Œä¸”ä¸ä¼šæ±¡æŸ“æ¡ä»¶åˆ†æ”¯é¢„æµ‹è¡¨ã€‚</li></ul><h1 id="7-Load-and-Store-ğŸ˜³"><a href="#7-Load-and-Store-ğŸ˜³" class="headerlink" title="7 Load and Store(ğŸ˜³)"></a>7 Load and Store(ğŸ˜³)</h1><blockquote><p>RV32Iæ˜¯ä¸€ä¸ªè£…è½½å’Œå­˜å‚¨æ¶æ„ï¼šåªæœ‰<code>load</code>å’Œ<code>store</code>æŒ‡ä»¤èƒ½å¤Ÿè®¿é—®å†…å­˜ï¼Œç®—æœ¯æŒ‡ä»¤åªèƒ½æ“ä½œCPUå¯„å­˜å™¨ã€‚</p></blockquote><ul><li>RV32Iæä¾›äº†32-bitçš„åœ°å€ç©ºé—´ï¼Œç”¨å­—èŠ‚ç¼–ç ã€‚</li><li><code>EEI</code>å®šä¹‰äº†åœ°å€ç©ºé—´çš„é‚£éƒ¨åˆ†å¯ä»¥è¢«å“ªäº›æŒ‡ä»¤åˆæ³•è®¿é—®ã€‚(e.g.ï¼Œä¸€äº›åœ°å€å¯èƒ½åªèƒ½è¢«è¯»ï¼Œæˆ–ä»…æ”¯æŒæŒ‰å­—è®¿é—®)</li><li>ç›®çš„å¯„å­˜å™¨ä¸º<code>x0</code>çš„è£…è½½æŒ‡ä»¤å°†æŠ›å‡ºå¼‚å¸¸ï¼Œå³ä½¿è£…è½½çš„å€¼è¢«ä¸¢å¼ƒä¹Ÿä¼šé€ æˆå…¶å®ƒçš„å‰¯ä½œç”¨ã€‚</li></ul><blockquote><p>In RISC-Vï¼Œendianness is byte-address invariant</p></blockquote><ul><li><p>å¦‚æœä¸€ä¸ªå­—èŠ‚ä»¥æŸç§é¡ºåº(at some endianness)å­˜å‚¨åˆ°å†…å­˜æŸä¸ªåœ°å€å¤„ï¼Œé‚£ä¹ˆä»¥å­—èŠ‚å¤§å°ä»é‚£ä¸ªåœ°å€ä»¥ä»»æ„çš„é¡ºåº(in any endianness)è£…è½½çš„ç»“æœæ˜¯å­˜å‚¨çš„å€¼ã€‚</p></li><li><p>å°ç«¯(little-endian): å¤šå­—èŠ‚å­˜å‚¨æ—¶æŠŠå¯„å­˜å™¨æœ€ä½ä¸ºå­—èŠ‚å†™åˆ°å†…å­˜å­—èŠ‚åœ°å€çš„æœ€ä½ä¸ºï¼Œéšåå¯„å­˜å™¨çš„å…¶å®ƒå­—èŠ‚ä»¥æƒé‡å‡åºå†™å…¥ã€‚ï¼ˆæƒé‡è¶Šå¤§çš„å­—èŠ‚å æ®çš„å†…å­˜åœ°å€è¶Šå¤§ï¼‰</p></li></ul><hr><p><img src="https://image.beenli.cn/img/20200930/gJvyXMYKv7Ov.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><blockquote><p>è£…è½½å’Œå­˜å‚¨æŒ‡ä»¤ç”¨äºåœ¨å¯„å­˜å™¨å’Œå†…å­˜ä¸­è½¬æ¢æ•°æ®ã€‚</p><p>Loads: <code>I-type</code></p><p>Stores: <code>S-type</code></p><p>æœ‰æ•ˆåœ°å€ï¼šç«‹å³æ•°ç¬¦å·æ‰©å±•åŠ ä¸ŠåŸºå€å¯„å­˜å™¨<code>rs1</code></p><p>ç›®çš„åœ°å€ï¼šâ… ã€for load:ä»å†…å­˜å–å€¼åˆ°<code>rd</code>;â…¡ã€for storeï¼šå¤åˆ¶<code>rs2</code>çš„å€¼åˆ°å†…å­˜</p></blockquote><h1 id="8-Memory-Ordering"><a href="#8-Memory-Ordering" class="headerlink" title="8 Memory Ordering"></a>8 Memory Ordering</h1><p><img src="https://image.beenli.cn/img/20200930/8gVkNfBMa1IW.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ul><li><p><code>FENCE</code>ï¼šç”¨äºæ’åºè¢«å…¶å®ƒRISC-Vçº¿ç¨‹ï¼Œå¤–éƒ¨è®¾å¤‡æˆ–è€…åå¤„ç†å™¨å¯è§çš„è®¾å¤‡I/Oå’Œå­˜å‚¨å™¨è®¿é—®ã€‚</p></li><li><p>ä»»ä½•è®¾å¤‡è¾“å…¥(I)ï¼Œè®¾å¤‡è¾“å‡º(O)ï¼Œå­˜å‚¨å™¨è¯»å–(R),å­˜å‚¨å™¨å†™(W)çš„ç»„åˆèƒ½å¤Ÿè¢«æ’åºæˆä»»ä½•ç›¸åŒçš„ç»„åˆã€‚</p></li><li>é€šä¿—åœ°è¯´ï¼Œæ²¡æœ‰å…¶å®ƒçº¿ç¨‹æˆ–è€…å¤–éƒ¨è®¾å¤‡èƒ½å¤Ÿåœ¨<code>fence</code>ä¹‹å‰çš„æŒ‡ä»¤é›†è¿›è¡Œä»»ä½•æ“ä½œä¹‹å‰ï¼Œè§‚æµ‹åˆ°åœ¨<code>fence</code>åè€…çš„æŒ‡ä»¤é›†åˆæ‰€åšçš„ä»»ä½•æ“ä½œã€‚å°±åƒä¸€ä¸ªå±éšœä¸€æ ·ï¼Œå‰é¢çš„æ“ä½œåªæœ‰å…ˆå®Œæˆï¼Œåé¢çš„æŒ‡ä»¤ç»“æœæ‰èƒ½è¢«å…¶å®ƒå¤„ç†å™¨è§‚å¯Ÿåˆ°ã€‚</li><li>memory-mapped I/Oè®¾å¤‡å¾ˆå…¸å‹åœ°è¢«æ²¡æœ‰cacheçš„loadså’Œstoreè®¿é—®ï¼Œå®ƒä»¬ä½¿ç”¨Iå’ŒOè€Œä¸æ˜¯Rå’ŒWã€‚</li><li>æŒ‡ä»¤é›†æ‰©å±•ä¹Ÿå¯ä»¥æè¿°æ–°çš„I/OæŒ‡ä»¤ï¼Œä½¿ç”¨fenceæŒ‡ä»¤ä¸­Iå’ŒOä½è¿›è¡Œæ’åº</li></ul><p><img src="https://image.beenli.cn/img/20200930/6dnc1SCYbwDA.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ul><li>fence modeåŸŸåœ¨ins[31:28]ï¼›å½“fm=0000æ—¶æ’åºæ‰€æœ‰çš„å†…å­˜æ“ä½œã€‚</li><li>å¯é€‰çš„<code>FENCE.TSO</code>æŒ‡ä»¤å…¶fm=1000ï¼›predecessor=RW,å¹¶ä¸”successor=RWã€‚TSOå‘½ä»¤å®ƒçš„å‰é¢é›†åˆä¸­çš„æ‰€æœ‰åŠ è½½æ“ä½œå…ˆäºå®ƒçš„åç»§é›†åˆä¸­çš„æ‰€æœ‰å†…å­˜æ“ä½œï¼›å®ƒçš„å‰é¢é›†åˆä¸­çš„æ‰€æœ‰å­˜å‚¨æ“ä½œ(store operation)éƒ½è¦å…ˆäºå®ƒçš„åç»§é›†åˆä¸­çš„æ‰€æœ‰å­˜å‚¨æ“ä½œ</li></ul><h1 id="9-Call-and-Breakpoints"><a href="#9-Call-and-Breakpoints" class="headerlink" title="9 Call and Breakpoints"></a>9 Call and Breakpoints</h1><blockquote><p><a name="system">SYSTEM instruction</a>ï¼šè¢«ç”¨äºè®¿é—®éœ€è¦ç‰¹æƒè®¿é—®çš„ç³»ç»ŸåŠŸèƒ½ï¼Œä½¿ç”¨<code>I-type</code>ã€‚</p><p>åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p><ul><li>è‡ªåŠ¨è¯»-ä¿®æ”¹-å†™(read-modify-write)<code>æ§åˆ¶çŠ¶æ€å¯„å­˜å™¨</code>(CSRs)ã€‚</li><li>æ½œåœ¨çš„ç‰¹æƒæŒ‡ä»¤(potentially privileged instructions)</li></ul><p>ç³»ç»ŸæŒ‡ä»¤è¢«å®šä¹‰æˆè¿è¡Œç¨ç®€å•çš„å®ç°æ€»æ˜¯æ•è·å¼‚å¸¸ç»™å•ä¸€çš„<code>è½¯ä»¶å¼‚å¸¸å¤„ç†å™¨</code>(software trap handle)ï¼›æ›´åŠ å¤æ‚çš„å®ç°å¯èƒ½éœ€è¦æ‰§è¡Œæ›´å¤šæ¡ç³»ç»ŸæŒ‡ä»¤</p></blockquote><p><img src="https://image.beenli.cn/img/20200930/Wf33chpE3JIQ.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><p>è¿™ä¸¤ä¸ªæŒ‡ä»¤ä¼šå‘<code>é…å¥—æ‰§è¡Œç¯å¢ƒ</code>(supporting execution environment)å¼•èµ·ä¸€ä¸ªç²¾ç¡®çš„<code>è¯·æ±‚å¼‚å¸¸</code>(requested trap)ã€‚</p><h2 id="ECALL"><a href="#ECALL" class="headerlink" title="ECALL"></a>ECALL</h2><blockquote><p><code>ECALL</code>ï¼šå‘è¿è¡Œç¯å¢ƒæå‡ºæœåŠ¡è¯·æ±‚(service request)</p><p>EElå°†å®šä¹‰æœåŠ¡è¯·æ±‚çš„å‚æ•°å¦‚ä½•ä¼ é€’ï¼Œä½†é€šå¸¸è¿™äº›éƒ½æ˜¯åœ¨æ•´æ•°å¯„å­˜å™¨ä¸­æŒ‡å®šçš„ä½ç½®</p></blockquote><h2 id="EBREAK"><a href="#EBREAK" class="headerlink" title="EBREAK"></a>EBREAK</h2><blockquote><p><code>EBREAK</code>ï¼šè¿”å›æ§åˆ¶æƒç»™è°ƒè¯•å™¨ç¯å¢ƒ(debugging environment)</p></blockquote><h1 id="10-Hint"><a href="#10-Hint" class="headerlink" title="10 Hint"></a>10 Hint</h1><blockquote><p>RV32Iä¸º<code>HINT</code>æŒ‡ä»¤ä¿ç•™äº†å¤§çš„ç¼–ç ç©ºé—´ï¼Œé€šå¸¸æ˜¯ç”¨æ¥å’Œå¾®æ¶æ„æ²Ÿé€šæ€§èƒ½æç¤ºã€‚HINTsè¢«ç¼–ç ä¸º<a href="#compute">æ•´æ•°è®¡ç®—æŒ‡ä»¤</a>,å…¶ä¸­<code>rd=x0</code>ã€‚å› æ­¤ï¼ŒåƒnopæŒ‡ä»¤ä¸€æ ·ï¼ŒHINTsä¸ä¼šæ”¹å˜æ¶æ„å¯è§çš„çŠ¶æ€ï¼Œé™¤äº†å¢åŠ pcå’Œä»»ä½•é€‚ç”¨çš„æ€§èƒ½è®¡æ•°å™¨ã€‚</p></blockquote><p><img src="https://image.beenli.cn/img/20200930/nVtEvPja9AXi.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>RISC-V</category>
        <category>spec</category>
      </categories>
  </entry>
  <entry>
    <title>SSH</title>
    <url>/posts/782a8ece/</url>
    <content><![CDATA[<h2 id="SSH-Protocol"><a href="#SSH-Protocol" class="headerlink" title="SSH Protocol"></a><center>SSH Protocol</center></h2><blockquote><p><strong>Secure Shell</strong> (<strong>SSH</strong>) is a <a href="https://en.wikipedia.org/wiki/Cryptography" rel="external nofollow noreferrer">cryptographic</a> <a href="https://en.wikipedia.org/wiki/Network_protocol" rel="external nofollow noreferrer">network protocol</a> for operating network services securely over an unsecured network.<a href="https://en.wikipedia.org/wiki/Secure_Shell#cite_note-rfc4251-1" rel="external nofollow noreferrer">[1]</a> Typical applications include remote <a href="https://en.wikipedia.org/wiki/Command-line_interface" rel="external nofollow noreferrer">command-line</a>, <a href="https://en.wikipedia.org/wiki/Login" rel="external nofollow noreferrer">login</a>, and remote command execution, but any <a href="https://en.wikipedia.org/wiki/Network_service" rel="external nofollow noreferrer">network service</a> can be secured with SSH.</p></blockquote><p>æ‘˜è‡ªç»´åŸºç™¾ç§‘ã€‚ä¸»è¦ä¸ºè¿œç¨‹ç™»å½•å»ºç«‹å®‰å…¨çš„é€šé“ã€‚</p><h3 id="1ã€ç®€è¦çš„å·¥ä½œåŸç†"><a href="#1ã€ç®€è¦çš„å·¥ä½œåŸç†" class="headerlink" title="1ã€ç®€è¦çš„å·¥ä½œåŸç†"></a>1ã€ç®€è¦çš„å·¥ä½œåŸç†</h3><p><code>ssh</code>æœ‰ä¸¤ç§å·¥ä½œæ–¹å¼</p><ol><li><p>åŸºäºå£ä»¤éªŒè¯</p><p>åªè¦çŸ¥é“å¸å·å’Œå£ä»¤ï¼Œå°±å¯ä»¥ç™»å½•åˆ°è¿œç¨‹ä¸»æœºã€‚æ‰€æœ‰ä¼ è¾“çš„æ•°æ®éƒ½ä¼šè¢«åŠ å¯†ï¼Œä½†ç¼ºç‚¹æ˜¯ï¼šä¸èƒ½ä¿è¯ä½ æ­£åœ¨è¿æ¥çš„æœåŠ¡å™¨å°±æ˜¯ä½ æƒ³è¿æ¥çš„æœåŠ¡å™¨ã€‚ä»¥ä¸‹æ˜¯ç™»å½•éªŒè¯æµç¨‹ï¼š</p><p><img src="http://image.beenli.cn/img/20200408/sdKikYkDIiNa.jpg?imageslim" srcset="/img/loading.gif" alt="å£ä»¤éªŒè¯"></p></li><li><p>åŸºäºå¯†é’¥éªŒè¯</p><p><img src="http://image.beenli.cn/img/20200408/XLDkiwcJXaOS.jpg?imageslim" srcset="/img/loading.gif" alt="å¯†é’¥éªŒè¯"></p></li></ol><h3 id="2ã€æ“ä½œè¿‡ç¨‹-æœ¬åœ°win10-æœåŠ¡å™¨centos"><a href="#2ã€æ“ä½œè¿‡ç¨‹-æœ¬åœ°win10-æœåŠ¡å™¨centos" class="headerlink" title="2ã€æ“ä½œè¿‡ç¨‹(æœ¬åœ°win10+æœåŠ¡å™¨centos)"></a>2ã€æ“ä½œè¿‡ç¨‹(æœ¬åœ°win10+æœåŠ¡å™¨centos)</h3><ol><li><p>æœ¬åœ°ç”Ÿæˆå¯†é’¥å¯¹</p><pre><code class="hljs bash"><span class="hljs-string">"Git Bash Hear"</span>
ssh-keygen -t rsa</code></pre><p><img src="http://image.beenli.cn/img/20200408/v40J7WztY0xm.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><p>å¯ä»¥è®¾ç½®å¯†ç ï¼Œä¹Ÿå¯ä»¥ä¸ºç©ºï¼ˆæ—¢ç„¶ä¸ºäº†å…å¯†é‚£å°±è®¾ç½®ä¸ºç©ºå§ï¼Œä¸ç„¶æ²¡æ„ä¹‰äº†ï¼‰</p><p>æ–‡ä»¶è·¯å¾„å¯é€‰ã€‚é»˜è®¤æ”¾åœ¨<code>~/.ssh/</code></p></li><li><p>ä¸Šä¼ å…¬é’¥åˆ°æœåŠ¡å™¨ä¸Š<a href="#link"><sup>1</sup></a></p><p>æœ‰ä¸¤ç§åŠæ³•ï¼š</p><ol><li><p>è‡ªè¡ŒæŠŠåˆšåˆšä¸Šä¼ çš„å…¬é’¥ä¸Šä¼ åˆ°æœåŠ¡å™¨æŒ‡å®šç”¨æˆ·<code>.ssh/</code>ç›®å½•ä¸‹çš„<code>authorized_keys</code>ä¸‹ã€‚ï¼ˆè®¤è¯å¯†é’¥å¯ä»¥æœ‰å¾ˆå¤šæŠŠï¼Œå¤šä¸ªlocalhostå¯ä»¥å„è‡ªä¸Šä¼ è‡ªå·±çš„ğŸ”’åˆ°æœåŠ¡å™¨ä¸Šã€‚ä¹Ÿå¯ä»¥æ‰€æœ‰äººå…¬ç”¨ä¸€æŠŠé”ã€‚ï¼‰</p></li><li><p><code>ssh-copy-id -i [./y.pub] username@vps ip(-iæŒ‡å®šè·¯å¾„ï¼Œé»˜è®¤æ˜¯åœ¨.sshä¸‹)</code></p><p>è¿™ä¸€æ­¥ä¹Ÿæ˜¯è¦è®¤è¯å¯†ç çš„ã€‚ä¸ç„¶ä»€ä¹ˆäººéƒ½å¯ä»¥ä¸Šé”å°±ä¹±å¥—ã€‚</p></li></ol></li><li><p>å…å¯†ç™»å½•æœåŠ¡å™¨</p><pre><code class="hljs bash">ssh -i[dir] username@vps ip(-iæŒ‡å®šå¯†é’¥æ‰€åœ¨ï¼Œé»˜è®¤åœ¨.ssh/ä¸‹)</code></pre><p class="note note-success">å¦‚æœä¹‹å‰äº§ç”Ÿå¯†é’¥å¯¹æ—¶è®¾ç½®äº†å¯†ç ï¼Œè¿™é‡Œè¿˜æ˜¯è¦è¾“å…¥ä¸€éå“ªä¸ªå¯†ç çš„ã€‚å¦‚æœä¸ºç©ºå°±å¯ä»¥ç›´æ¥å…å¯†è¿›å…¥äº†</p></li><li><p>è„šæœ¬æ–‡ä»¶åŠ é€Ÿç™»å½•<a href="#link"><sup>2</sup></a></p><ol><li><p>éšä¾¿é€‰æ‹©ä¸ªæ–‡ä»¶å¤¹ï¼Œå†™ä¸€ä¸ªconfigæ–‡ä»¶</p></li><li><pre><code class="lang-bash">Host vps                              # ä¸€ä¸ªä¾¿äºä½ åŒºåˆ«è¿™æ˜¯å“ªå°æœºå™¨çš„åå­—
    HostName 47.95.247.18               
    User git                          # ç™»å½•ä¸»æœºçš„ç”¨æˆ·åç§°
    Port 22                                      
    IdentityFile ~/.ssh/id_rsa        # å¯†é’¥æ‰€åœ¨çš„æ–‡ä»¶ä½ç½®
</code></pre></li><li><p><code>ssh -F [config file] vps</code>(æŒ‡å®šé…ç½®æ–‡ä»¶ä½ç½®)å°±å¯ä»¥ç›´æ¥ç™»å½•ä½ è®¾ç½®çš„é‚£å°ä¸»æœº</p></li></ol></li></ol><hr><h5 id="å¯èƒ½é‡åˆ°çš„é—®é¢˜3"><a href="#å¯èƒ½é‡åˆ°çš„é—®é¢˜3" class="headerlink" title="å¯èƒ½é‡åˆ°çš„é—®é¢˜3"></a>å¯èƒ½é‡åˆ°çš„é—®é¢˜<a href="#link"><sup>3</sup></a></h5><ol><li><p>Authentication refused: bad ownership or modes for directory /root/.ssh</p><blockquote><p>ls -l /root/.ssh</p><p>å‘ç°æ”¹ç›®å½•çš„æ‰€æœ‰è€…ä¸æ˜¯rootã€‚åªç”¨æ”¹æˆrootå³å¯</p><p>chown -R root.root /root/.ssh</p></blockquote></li></ol><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><div id="link"></div><p>[1] <a href="https://blog.csdn.net/jeikerxiao/article/details/84105529" rel="external nofollow noreferrer">SSH ä¸‰æ­¥è§£å†³å…å¯†ç™»å½•</a></p><p>[2] <a href="https://blog.csdn.net/ky1in93/article/details/83093981" rel="external nofollow noreferrer">sshé…ç½®configå¿«é€Ÿç™»å½•</a></p><p>[3] <a href="https://www.howtogeek.com/168156/fixing-authentication-refused-bad-ownership-or-modes-for-directory/" rel="external nofollow noreferrer">è§£å†³æƒé™é—®é¢˜</a></p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CS</category>
        <category>Computer Network</category>
      </categories>
      <tags>
        <tag>protocols</tag>
      </tags>
  </entry>
  <entry>
    <title>VIM Plug-in</title>
    <url>/posts/b71407e8/</url>
    <content><![CDATA[<h2 id="VIM-Plugs"><a href="#VIM-Plugs" class="headerlink" title="VIM-Plugs"></a><center>VIM-Plugs</center></h2><h5 id="1ã€vim-plug-æ’ä»¶ç®¡ç†å™¨"><a href="#1ã€vim-plug-æ’ä»¶ç®¡ç†å™¨" class="headerlink" title="1ã€vim-plug: æ’ä»¶ç®¡ç†å™¨"></a>1ã€<a href="https://github.com/junegunn/vim-plug" rel="external nofollow noreferrer">vim-plug</a>: æ’ä»¶ç®¡ç†å™¨</h5><pre><code class="hljs CQL">call plug#begin('D:/App/vim/vim81/vimfiles/plugs')//æ’ä»¶å®‰è£…ç›®å½•(å¯ä»¥éšæ„å®š)

" Shorthand notation for plugin
Plug 'foo/bar'                   //æ’ä»¶ä¸‹è½½åœ°å€ï¼ŒGitHubå¯ä»¥ç®€å†™

call plug#end()					// å‡½æ•°ç»“æŸæ ‡å¿—</code></pre><blockquote><p>command</p></blockquote><ol><li>:PlugInstall // å®‰è£…æ’ä»¶</li><li>:PlugClean // æ¸…ç†invalidæ’ä»¶</li><li>:PlugUpgrade // å‡çº§æ’ä»¶</li><li>:PlugDiff // æŸ¥çœ‹ç°æœ‰æ’ä»¶ä¸ä¸‹è½½åœ°å€å¤„æ’ä»¶ä¸åŒï¼Œå³æ£€æµ‹æ›´æ–°ç»†èŠ‚</li><li>:PlugStatus // æŸ¥çœ‹æ’ä»¶åŠ è½½æƒ…å†µ</li><li>:PlugSnapshot // ç”Ÿæˆç”¨äºæ¢å¤å½“å‰æ’ä»¶å¿«ç…§çš„è„šæœ¬</li></ol><blockquote><p>feature</p></blockquote><pre><code class="hljs typescript">Plug <span class="hljs-string">'zhuzhzh/verilog_emacsauto.vim'</span>, {<span class="hljs-string">'for'</span>: [<span class="hljs-string">'verilog'</span>, <span class="hljs-string">'systemverilog'</span>] }
<span class="hljs-comment">// å½“ä¸”ä»…å½“æ‰“å¼€çš„æ–‡ä»¶ä¸ºVerilogæˆ–è€…systemVerilogæ—¶åŠ è½½æ­¤æ’ä»¶</span>

Plug <span class="hljs-string">'scrooloose/nerdtree'</span>, { <span class="hljs-string">'on'</span>: <span class="hljs-string">'NERDTreeToggle'</span> }
<span class="hljs-comment">//å½“ä¸”ä»…å½“è§¦å‘toggleå‘½ä»¤æ—¶åŠ è½½æ­¤æ’ä»¶</span></code></pre><hr><h5 id="2ã€lightline-å½©è‰²çŠ¶æ€æ "><a href="#2ã€lightline-å½©è‰²çŠ¶æ€æ " class="headerlink" title="2ã€lightline:å½©è‰²çŠ¶æ€æ "></a>2ã€<a href="https://github.com/itchyny/lightline.vim" rel="external nofollow noreferrer">lightline</a>:å½©è‰²çŠ¶æ€æ </h5><p><img src="http://image.beenli.cn/img/20200406/5NePjt0zYxFR.png?imageslim" srcset="/img/loading.gif" alt="mark"></p><hr><h5 id="3ã€vim-colors-solarized-æ¯”è¾ƒèˆ’æœçš„é…è‰²æ–¹æ¡ˆ"><a href="#3ã€vim-colors-solarized-æ¯”è¾ƒèˆ’æœçš„é…è‰²æ–¹æ¡ˆ" class="headerlink" title="3ã€vim-colors-solarized:æ¯”è¾ƒèˆ’æœçš„é…è‰²æ–¹æ¡ˆ"></a>3ã€<a href="https://github.com/altercation/vim-colors-solarized" rel="external nofollow noreferrer">vim-colors-solarized</a>:æ¯”è¾ƒèˆ’æœçš„é…è‰²æ–¹æ¡ˆ</h5><p><img src="http://image.beenli.cn/img/20200406/daLnl7t2NSCK.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><p>æ­¤æ’ä»¶å«æœ‰ä¸¤ç§è‰²è°ƒï¼šdarkï¼›light</p><blockquote><p>call togglebg#map(â€œ<f1>â€œ) // å¯ä»¥è®¾ç½®å¿«æ·é”®è‡ªè¡Œåˆ‡æ¢</f1></p></blockquote><hr><h5 id="4ã€youcompletemeï¼šè‡ªåŠ¨è¡¥å…¨"><a href="#4ã€youcompletemeï¼šè‡ªåŠ¨è¡¥å…¨" class="headerlink" title="4ã€youcompletemeï¼šè‡ªåŠ¨è¡¥å…¨"></a>4ã€<a href="https://github.com/ycm-core/YouCompleteMe" rel="external nofollow noreferrer">youcompleteme</a>ï¼šè‡ªåŠ¨è¡¥å…¨</h5><hr><h5 id="5ã€vim-snippets-SirVer-ultisnips-ä»£ç ç‰‡å¡«å……"><a href="#5ã€vim-snippets-SirVer-ultisnips-ä»£ç ç‰‡å¡«å……" class="headerlink" title="5ã€vim-snippets+SirVer/ultisnips : ä»£ç ç‰‡å¡«å……"></a>5ã€<a href="https://github.com/honza/vim-snippets" rel="external nofollow noreferrer">vim-snippets</a>+<a href="https://github.com/SirVer/ultisnips" rel="external nofollow noreferrer">SirVer/ultisnips</a> : ä»£ç ç‰‡å¡«å……</h5><p>ç¬¬ä¸€ä¸ªæ’ä»¶æä¾›å¥½å¤šè¯­è¨€çš„ä»£ç ç‰‡æ–‡ä»¶ã€‚ç¬¬äºŒæ’ä»¶æä¾›çš„å¡«å……å¼•æ“ã€‚</p><p>snippetæœ‰ä¸¤ç§æ ¼å¼ï¼š</p><ul><li><code>snippets/*</code>: snippets using snipMate format</li><li><code>UltiSnips/*</code>: snippets using UltiSnips format</li></ul><p><img src="http://image.beenli.cn/img/20200406/lWeLOp6hU7Na.gif" srcset="/img/loading.gif" alt="mark"></p><pre><code class="hljs livescript">å¯ä»¥è‡ªå·±ç¼–å†™snippetsæ–‡ä»¶	{n}ä»£è¡¨è¦å¡«å†™çš„ç©ºç™½å¤„ã€‚<span class="hljs-comment">/* placeholder*/</span>
snippet test
	<span class="hljs-regexp">// Author: Wan Li</span>
<span class="hljs-regexp">	//</span> time: `strftime(<span class="hljs-string">"%Y-%m-%d"</span>)`
	<span class="hljs-regexp">// function: ${1:/*å†™ä¸‹æµ‹è¯•çš„åŠŸèƒ½*/}</span>
<span class="hljs-regexp">	//</span> ---------------------------------------------------
	<span class="hljs-string">\`timescale</span> <span class="hljs-number">1ns</span>/<span class="hljs-number">1ns</span>
	<span class="hljs-string">\`include</span> <span class="hljs-string">"${2:/*åŒ…å«çš„æ¨¡å—æ–‡ä»¶*/}"</span>

    
é…ç½®_vimrcæ–‡ä»¶
<span class="hljs-keyword">let</span> g:UltiSnipsExpandTrigger=<span class="hljs-string">"&lt;c-j&gt;"</span>		<span class="hljs-regexp">//ctrl + j è§¦å‘</span>
<span class="hljs-regexp">let g:UltiSnipsJumpForwardTrigger="&lt;c-b&gt;"	//</span>ctrl + b è·³åˆ°ä¸‹ä¸€ä¸ªéœ€è¦å¡«å†™çš„ç©ºå¤„
<span class="hljs-keyword">let</span> g:UltiSnipsJumpBackwardTrigger=<span class="hljs-string">"&lt;c-z&gt;"</span>	<span class="hljs-regexp">//ctrl + z è·³åˆ°ä¸Šä¸€ä¸ªéœ€è¦å¡«å†™çš„ç©ºå‡º</span></code></pre><hr><h5 id="6ã€nerdtree-å¯è§†åŒ–ç›®å½•æ ‘"><a href="#6ã€nerdtree-å¯è§†åŒ–ç›®å½•æ ‘" class="headerlink" title="6ã€nerdtree: å¯è§†åŒ–ç›®å½•æ ‘"></a>6ã€<a href="https://github.com/preservim/nerdtree" rel="external nofollow noreferrer">nerdtree</a>: å¯è§†åŒ–ç›®å½•æ ‘</h5><p><img src="http://image.beenli.cn/img/20200406/GAYHOnmiPSIj.png?imageslim" srcset="/img/loading.gif" alt="mark"></p><p><img src="http://image.beenli.cn/img/20200406/zU1CDLe23EOh.png?imageslim" srcset="/img/loading.gif" alt="mark"></p><p><img src="http://image.beenli.cn/img/20200406/36WBczsR3bS2.png?imageslim" srcset="/img/loading.gif" alt="mark"></p><hr><h5 id="7ã€tabbar-æ•´é½çš„æ ‡ç­¾çª—å£"><a href="#7ã€tabbar-æ•´é½çš„æ ‡ç­¾çª—å£" class="headerlink" title="7ã€tabbar: æ•´é½çš„æ ‡ç­¾çª—å£"></a>7ã€<a href="https://github.com/majutsushi/tagbar" rel="external nofollow noreferrer">tabbar</a>: æ•´é½çš„æ ‡ç­¾çª—å£</h5><p><img src="http://image.beenli.cn/img/20200406/9PX5LoRQveLS.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><hr><h5 id="8ã€tpope-vim-commentary-å¿«é€Ÿæ³¨é‡Š"><a href="#8ã€tpope-vim-commentary-å¿«é€Ÿæ³¨é‡Š" class="headerlink" title="8ã€tpope/vim-commentary: å¿«é€Ÿæ³¨é‡Š"></a>8ã€<a href="https://github.com/tpope/vim-commentary" rel="external nofollow noreferrer">tpope/vim-commentary</a>: å¿«é€Ÿæ³¨é‡Š</h5><blockquote><p>gcc ï¼šæ³¨é‡Š/å–æ¶ˆæ³¨é‡Šä¸€è¡Œ</p><p>gc{motion}</p><p>gc : æ³¨é‡Šselectionå—</p><p>7ï¼Œ17 Commentary</p></blockquote><hr><h5 id="9ã€vim-gutentagsï¼šå€ŸåŠ©universal-ctags-è‡ªåŠ¨äº§ç”Ÿæ ‡ç­¾æ–‡ä»¶-taco"><a href="#9ã€vim-gutentagsï¼šå€ŸåŠ©universal-ctags-è‡ªåŠ¨äº§ç”Ÿæ ‡ç­¾æ–‡ä»¶-taco" class="headerlink" title="9ã€vim-gutentagsï¼šå€ŸåŠ©universal ctags è‡ªåŠ¨äº§ç”Ÿæ ‡ç­¾æ–‡ä»¶:taco:"></a>9ã€<a href="https://github.com/ludovicchabant/vim-gutentags" rel="external nofollow noreferrer">vim-gutentags</a>ï¼šå€ŸåŠ©<a href="https://docs.ctags.io/en/latest/" rel="external nofollow noreferrer">universal ctags</a> è‡ªåŠ¨äº§ç”Ÿæ ‡ç­¾æ–‡ä»¶<span class="github-emoji" style="display:inline;vertical-align:middle;color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f32e.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f32e.png?v8">ğŸŒ®</span></h5><p>æœ‰äº†è¿™ä¸ªæ ‡ç­¾æ–‡ä»¶ï¼Œä½ åˆå¯ä»¥<code>&lt;C+]&gt;</code>è·³è½¬</p><hr><h5 id="10ã€vim-easy-alignï¼šè‡ªåŠ¨å¯¹é½"><a href="#10ã€vim-easy-alignï¼šè‡ªåŠ¨å¯¹é½" class="headerlink" title="10ã€vim-easy-alignï¼šè‡ªåŠ¨å¯¹é½"></a>10ã€<a href="https://github.com/junegunn/vim-easy-align" rel="external nofollow noreferrer"><strong>vim-easy-align</strong></a>ï¼šè‡ªåŠ¨å¯¹é½</h5><p>æŒ‰å®˜æ–¹é…ç½®æ¥è®¾ç½®å¿«æ·é”®/gaè§¦å‘</p><blockquote><p>â€œ Start interactive EasyAlign in visual mode (e.g. vipga)<br>xmap ga<plug>(EasyAlign)</plug></p><p>â€œ Start interactive EasyAlign for a motion/text object (e.g. gaip)<br>nmap ga<plug>(EasyAlign)</plug></p></blockquote><ul><li><code>1</code> Around the 1st occurrences of delimiters</li><li><code>2</code> Around the 2nd occurrences of delimiters</li><li>â€¦</li><li><code>*</code> Around all occurrences of delimiters</li><li><code>**</code> Left-right alternating alignment around all delimiters</li><li><code>-</code> Around the last occurrences of delimiters (<code>-1</code>)</li><li><code>-2</code> Around the second to last occurrences of delimiters</li></ul><div class="table-container"><table><thead><tr><th style="text-align:center">Key</th><th style="text-align:center">Description/Use cases</th></tr></thead><tbody><tr><td style="text-align:center">``</td><td style="text-align:center">General alignment around whitespaces</td></tr><tr><td style="text-align:center"><code>=</code></td><td style="text-align:center">Operators containing equals sign (<code>=</code>, <code>==,</code> <code>!=</code>, <code>+=</code>, <code>&amp;&amp;=</code>, â€¦)</td></tr><tr><td style="text-align:center"><code>:</code></td><td style="text-align:center">Suitable for formatting JSON or YAML</td></tr><tr><td style="text-align:center"><code>.</code></td><td style="text-align:center">Multi-line method chaining</td></tr><tr><td style="text-align:center"><code>,</code></td><td style="text-align:center">Multi-line method arguments</td></tr><tr><td style="text-align:center"><code>&amp;</code></td><td style="text-align:center">LaTeX tables (matches <code>&amp;</code> and <code>\\</code>)</td></tr><tr><td style="text-align:center"><code>#</code></td><td style="text-align:center">Ruby/Python comments</td></tr><tr><td style="text-align:center"><code>"</code></td><td style="text-align:center">Vim comments</td></tr><tr><td style="text-align:center">``</td><td style="text-align:center">Table markdown</td></tr></tbody></table></div><p><img src="http://image.beenli.cn/img/20200406/fubial5cDLym.gif" srcset="/img/loading.gif" alt="mark"></p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>Software</category>
        <category>VIM</category>
      </categories>
      <tags>
        <tag>toolkits</tag>
      </tags>
  </entry>
  <entry>
    <title>git hooksè‡ªåŠ¨éƒ¨ç½²hexo</title>
    <url>/posts/fb29ac9a/</url>
    <content><![CDATA[<h2 id="git-hooks-è‡ªåŠ¨éƒ¨ç½²hexo"><a href="#git-hooks-è‡ªåŠ¨éƒ¨ç½²hexo" class="headerlink" title="git hooks è‡ªåŠ¨éƒ¨ç½²hexo"></a><center>git hooks è‡ªåŠ¨éƒ¨ç½²hexo</center></h2><h2 id="1ã€åŸç†å¤§è‡´å¦‚ä¸‹"><a href="#1ã€åŸç†å¤§è‡´å¦‚ä¸‹" class="headerlink" title="1ã€åŸç†å¤§è‡´å¦‚ä¸‹"></a>1ã€åŸç†å¤§è‡´å¦‚ä¸‹</h2><p><img src="http://image.beenli.cn/img/20200408/OX4sMTrK26wD.png?imageslim" srcset="/img/loading.gif" alt="git hooks"></p><h2 id="2ã€å®æ–½è¿‡ç¨‹"><a href="#2ã€å®æ–½è¿‡ç¨‹" class="headerlink" title="2ã€å®æ–½è¿‡ç¨‹"></a>2ã€å®æ–½è¿‡ç¨‹</h2><ol><li><p>åœ¨æœåŠ¡å™¨ä¸Šæ­å»ºä¸€ä¸ªgitæœåŠ¡å™¨<a href="#link"><sup>1</sup></a></p><ol><li><p><code>adduser git</code>(åˆ›å»ºä¸€ä¸ªç”¨æˆ·)</p></li><li><p>å¯ä»¥ç»™åˆ›å»ºçš„ç”¨æˆ·è®¾ç½®å¯†é’¥<code>passwd git</code></p></li><li><p>èµ‹äºˆgitç”¨æˆ·sudoæƒé™</p><pre><code class="hljs bash">chmod 740 /etc/sudoers</code></pre></li></ol></li></ol><p>vim /etc/sudoer<br></p><pre><code class="hljs stata">
      `ç»™gitç”¨æˆ·æ·»åŠ å‘½ä»¤æƒé™å¦‚ä¸‹`
    
      ä¿å­˜åé€€å‡ºï¼Œä¿®æ”¹å›æ–‡ä»¶æƒé™`chmod 440 /etc/sudoers`
      
      ![<span class="hljs-keyword">mark</span>](http:<span class="hljs-comment">//image.beenli.cn/img/20200408/cSLiyuqjcxOU.jpg?imageslim)</span>

2. åˆå§‹åŒ–gitä»“åº“

   ```bash
   <span class="hljs-keyword">su</span> git				<span class="hljs-comment">//åˆ‡æ¢è‡³gitç”¨æˆ·</span>
   <span class="hljs-keyword">mkdir</span> blog.git		<span class="hljs-comment">//åˆ›å»ºä»“åº“æ–‡ä»¶å¤¹</span>
   <span class="hljs-keyword">cd</span> blog.git			<span class="hljs-comment">//è¿›å…¥æ–‡ä»¶å¤¹</span>
   git init --bare		<span class="hljs-comment">//ä½¿ç”¨--bareå‚æ•°åˆå§‹åŒ–ä¸ºè£¸ä»“åº“ï¼Œè¿™æ ·åˆ›å»ºçš„ä»“åº“ä¸åŒ…å«å·¥ä½œåŒº</span></code></pre><p></p><ol><li><p>åˆ›å»ºç½‘ç«™ç›®å½•</p><pre><code class="hljs bash">sudo mkdir /var/www/blog					//åˆ›å»ºç½‘ç«™æ ¹ç›®å½•
sudo chown -R git.git /var/www/blog		//æŠŠblogç›®å½•ä»¥åŠå­ç›®å½•å±ç»„æ”¹ä¸ºgit
(è¿™ä¸€æ­¥å¾ˆé‡è¦ï¼Œå¦è€…åç»­æäº¤æ²¡æœ‰æƒé™)</code></pre></li><li><p>é…ç½®å¯†é’¥[è¯¦æƒ…è§:sshåè®®](<a href="https://www.beenli.cn/posts/782a8ece/">https://www.beenli.cn/posts/782a8ece/</a></p><pre><code class="hljs bash">mkdir .ssh				//åˆ›å»º.sshç›®å½•(é»˜è®¤ä½ åœ¨gitç”¨æˆ·çš„~ç›®å½•ä¸‹)
<span class="hljs-built_in">cd</span> .ssh
touch authorized_keys	//æŠŠä½ æœ¬åœ°ç”Ÿæˆçš„å…¬é’¥æ‹·è´åˆ°æ­¤æ–‡ä»¶å¤¹ç§</code></pre></li><li><p>é…ç½®<code>hooks</code>(git ç”¨æˆ·ä¸‹)<a href="#link"><sup>2</sup></a></p><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ~/blog.git/hooks					//åˆ‡æ¢åˆ°hooksç›®å½•
touch post-receive				 //åˆ›å»ºpost-receiveæ–‡ä»¶
chmod +x post-receive			 //èµ‹äºˆå…¶å¯æ‰§è¡Œæƒé™</code></pre><blockquote><p>The <code>post-receive</code> hook runs after the entire process is completed and can be used to update other services or notify users. It takes the same stdin data as the <code>pre-receive</code> hook. Examples include emailing a list, notifying a continuous integration server, or updating a ticket-tracking system â€“ you can even parse the commit messages to see if any tickets need to be opened, modified, or closed. This script canâ€™t stop the push process, but the client doesnâ€™t disconnect until it has completed, so be careful if you try to do anything that may take a long time.</p></blockquote><p>å¤åˆ¶è¯¥æ®µä»£ç åˆ°åˆšåˆšåˆ›å»ºçš„post-receiveæ–‡ä»¶</p><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"post-receive hook is running..."</span>

GIT_REPO=/home/git/blog.git
TMP_GIT_CLONE=/tmp/blog
PUBLIC_WWW=/var/www/blog

rm -rf <span class="hljs-variable">${TMP_GIT_CLONE}</span>
git <span class="hljs-built_in">clone</span> <span class="hljs-variable">$GIT_REPO</span> <span class="hljs-variable">$TMP_GIT_CLONE</span>
rm -rf <span class="hljs-variable">${PUBLIC_WWW}</span>/*
cp -rf <span class="hljs-variable">${TMP_GIT_CLONE}</span>/* <span class="hljs-variable">${PUBLIC_WWW}</span></code></pre><p>åœ¨æ‰§è¡Œ<code>cp</code>ï¼ˆå¤åˆ¶)å‘½ä»¤çš„æ—¶å€™ï¼Œ<code>.git</code> ä½œä¸ºéšè—ç›®å½•ä¸ä¼šè¢«æ‹·è´åˆ° Web æ ¹ç›®å½•ä¸‹ï¼Œä¹Ÿå°±é¿å…äº†å°†æ•´ä¸ªä»“åº“å†å²æš´éœ²åœ¨ Web æœåŠ¡ä¸­ã€‚</p></li><li><p>æœ€åé…ç½®hexoçš„<code>_config.yml</code></p><pre><code class="hljs bash">deploy:
    <span class="hljs-built_in">type</span>: git
    repository: git@VPS IP:/~/blog.git  <span class="hljs-comment"># é»˜è®¤22ç«¯å£</span>
    branch: master</code></pre></li></ol><hr><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><div id="link"></div><p>[1] <a href="https://tding.top/archives/12a4e7e6.html" rel="external nofollow noreferrer">Hexo åšå®¢éƒ¨ç½²åˆ° VPS</a></p><p>[2] <a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks" rel="external nofollow noreferrer">git hooks</a></p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>Software</category>
        <category>Git</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>jupyter notebook</title>
    <url>/posts/2641cf45/</url>
    <content><![CDATA[<center>jupyter notebook</center><h3 id="1ã€å®‰è£…"><a href="#1ã€å®‰è£…" class="headerlink" title="1ã€å®‰è£…"></a>1ã€å®‰è£…</h3><ul><li>å®‰è£…python</li><li>å®‰è£…pip</li><li>ï¼ˆå®‰è£…ipythonï¼‰</li><li>å®‰è£…jupyter notebook(pip install jupyter notebook)</li></ul><h3 id="2ã€jupyterå‘½ä»¤"><a href="#2ã€jupyterå‘½ä»¤" class="headerlink" title="2ã€jupyterå‘½ä»¤"></a>2ã€jupyterå‘½ä»¤</h3><ul><li><p>æŸ¥çœ‹å·²ç»å®‰è£…çš„æ ¸</p><pre><code class="hljs taggerscript">jupyter kernelspec list 
Available kernels:
  py38       C:<span class="hljs-symbol">\U</span>sers<span class="hljs-symbol">\w</span>anli<span class="hljs-symbol">\A</span>ppData<span class="hljs-symbol">\R</span>oaming<span class="hljs-symbol">\j</span>upyter<span class="hljs-symbol">\k</span>ernels<span class="hljs-symbol">\p</span>y38
  python3    C:<span class="hljs-symbol">\P</span>rogramData<span class="hljs-symbol">\j</span>upyter<span class="hljs-symbol">\k</span>ernels<span class="hljs-symbol">\p</span>ython3</code></pre></li><li><p>ç§»é™¤å·²ç»å®‰è£…çš„æ ¸</p><pre><code class="hljs routeros">jupyter kernelspec <span class="hljs-builtin-name">remove</span> [kernelname]</code></pre></li><li><p>å®‰è£…æ ¸</p><pre><code class="hljs brainfuck"><span class="hljs-comment">python</span> <span class="hljs-literal">-</span><span class="hljs-comment">m</span> <span class="hljs-comment">ipykernel</span> <span class="hljs-comment">install</span> <span class="hljs-title">[</span>--<span class="hljs-comment">user</span><span class="hljs-title">]</span> --<span class="hljs-comment">name</span> <span class="hljs-title">[</span><span class="hljs-comment">kernelname</span><span class="hljs-title">]</span></code></pre></li></ul><h3 id="3ã€condaåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"><a href="#3ã€condaåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="3ã€condaåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"></a>3ã€condaåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h3><ul><li><p>æŸ¥çœ‹å·²ç»æœ‰çš„ç¯å¢ƒ</p><pre><code class="hljs taggerscript">$ conda env list
# conda environments:
#
base                  *  D:<span class="hljs-symbol">\A</span>PP<span class="hljs-symbol">\m</span>iniconda
py38                     D:<span class="hljs-symbol">\A</span>PP<span class="hljs-symbol">\m</span>iniconda<span class="hljs-symbol">\e</span>nvs<span class="hljs-symbol">\p</span>y38</code></pre></li><li><p>å®‰è£…æ–°çš„ç¯å¢ƒ</p><pre><code class="hljs routeros">conda create -n py36 <span class="hljs-attribute">python</span>=3.6</code></pre></li><li><p>æ¿€æ´»ç¯å¢ƒ/æ¨å‡ºç¯å¢ƒ</p><pre><code class="hljs maxima">conda <span class="hljs-built_in">activate</span> envname
conda <span class="hljs-built_in">deactivate</span></code></pre></li></ul><h3 id="4ã€é‡åˆ°çš„é—®é¢˜"><a href="#4ã€é‡åˆ°çš„é—®é¢˜" class="headerlink" title="4ã€é‡åˆ°çš„é—®é¢˜"></a>4ã€é‡åˆ°çš„é—®é¢˜</h3><ol><li><p>jupyter ImportError: DLL load failed: æ‰¾ä¸åˆ°æŒ‡å®šçš„ç¨‹åºã€‚(kernel error)</p><ul><li><p>where jupyter</p><p>æˆ‘å‘ç°æˆ‘æœ‰ä¸¤ä¸ªjupyter, ä¸¤ä¸ªpython</p></li><li><p>è¯•è¿‡äº†ç½‘ä¸Šå¥½å¤šåŠæ³•éƒ½ä¸ç®¡ç”¨(å¤§å¤šå«ä½ æ·»åŠ ç¯å¢ƒå˜é‡)</p></li><li><p>æœ€ç»ˆæˆ‘æŠŠå…¶ä¸­ä¸€ä¸ªjupyter(æœ‰é—®é¢˜çš„)å¸è½½äº†ï¼Œç”¨å¦å¤–ä¸€ä¸ªå°±å¥½äº†ã€‚</p></li></ul></li></ol><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>Software</category>
        <category>jupyter</category>
      </categories>
      <tags>
        <tag>toolkits</tag>
      </tags>
  </entry>
  <entry>
    <title>riscv-gnu-toolchain ä¸‹è½½ã€ç¼–è¯‘</title>
    <url>/posts/6c0abcd9/</url>
    <content><![CDATA[<h2 id="1ã€å‰è¨€"><a href="#1ã€å‰è¨€" class="headerlink" title="1ã€å‰è¨€"></a>1ã€å‰è¨€</h2><p><a href="https://hub.fastgit.org/riscv/riscv-gnu-toolchain" rel="external nofollow noreferrer">riscv-gnu-toolchain</a> æ˜¯å­¦ä¹  <code>risc-v</code> çš„å‰æï¼Œä½†æ˜¯ç½‘ä¸Šå¯¹è¿™æ–¹é¢çš„ä»‹ç»å¾ˆå°‘ï¼Œå¹¶ä¸”å·¥å…·é“¾ç§ç±»ç¹å¤šï¼Œå¾ˆå¯èƒ½è®©æˆ‘ä»¬æ‘¸ä¸æ¸…å¤´è„‘ã€‚</p><h2 id="2ã€ä¸‹è½½ç¯‡"><a href="#2ã€ä¸‹è½½ç¯‡" class="headerlink" title="2ã€ä¸‹è½½ç¯‡"></a>2ã€ä¸‹è½½ç¯‡</h2><blockquote><p>ç”±äº<code>riscv-gnu-toolchain</code>åŒ…å«æœ‰å¥½å¤šç¬¬ä¸‰æ–¹åº“ï¼Œæ•´ä¸ªé¡¹ç›®æ–‡ä»¶å¾ˆå¤§[å®˜æ–¹è¯´çš„æ˜¯6.65GB]ï¼ŒåŠ ä¸Šå›½å†…GitHubå ªæ¯”ğŸ¢é€Ÿï¼Œä½ å¤šåŠæ˜¯ä¸å¯èƒ½æŒ‰å®˜æ–¹æ•™ç¨‹ä¸‹ä¸‹æ¥ã€‚</p></blockquote><div class="table-container"><table><thead><tr><th>é¡¹ç›®åç§°</th><th>é¡¹ç›®æè¿°</th><th>é¡¹ç›®ç”¨é€”</th></tr></thead><tbody><tr><td><a href="https://git.qemu.org/git/qemu.git" rel="external nofollow noreferrer">qemu</a></td><td>æ¨¡æ‹Ÿå™¨ï¼ˆç±»ä¼¼bochs,PearPC)</td><td></td></tr><tr><td><a href="https://hub.fastgit.org/riscv/riscv-binutils-gdb.git" rel="external nofollow noreferrer">riscv-binutils</a></td><td>å¼€å‘å·¥å…·(compilerã€assembleã€linkerã€debuggerâ€¦)</td><td></td></tr><tr><td><a href="https://hub.fastgit.org/riscv/riscv-dejagnu.git" rel="external nofollow noreferrer">riscv-dejagnu</a></td><td>æµ‹è¯•å…¶å®ƒç¨‹åºçš„æ¡†æ¶(framework)</td><td></td></tr><tr><td><a href="https://hub.fastgit.org/riscv/riscv-gcc.git" rel="external nofollow noreferrer">riscv-gcc</a></td><td>GNU Compiler Collection</td><td></td></tr><tr><td><a href="https://hub.fastgit.org/riscv/riscv-binutils-gdb.git" rel="external nofollow noreferrer">riscv-gdb</a></td><td>åŒriscv-binutils</td><td></td></tr><tr><td><a href="https://hub.fastgit.org/riscv/riscv-glibc" rel="external nofollow noreferrer">riscv-glibc</a></td><td>GNU C Library(system-API,å…¶å®ƒçš„è¯­è¨€ä¹Ÿé€šè¿‡å®ƒè®¿é—®OS)</td><td></td></tr><tr><td><a href="https://hub.fastgit.org/riscv/riscv-newlib.git" rel="external nofollow noreferrer">riscv-newlib</a></td><td>ä¸€å¥—å¼€å‘å·¥å…·ï¼ˆç”¨çš„åº“æœ‰åˆ«äºriscv-binutils)</td></tr></tbody></table></div><blockquote><p>binutils å’Œ newlib ä¹‹é—´çš„åŒºåˆ«ï¼ˆå‘å¾…å¡«o_o â€¦.ï¼‰</p></blockquote><h3 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h3><p>PC: x86</p><p>OS: Ubuntu 20.04.1 LTS</p><p>VM: wmware15.5Pro</p><hr><ol><li><p>ä¸‹è½½æºä»£ç ï¼ˆæ¨èä½¿ç”¨<code>hub.fastgit.org</code>é•œåƒç«™ï¼Œæ¯”åŸç”Ÿç«™å¿«å‡ ç™¾å€ï¼‰</p><pre><code class="hljs jboss-cli">git clone https:<span class="hljs-string">//hub.fastgit.org/riscv/riscv-gnu-toolchain</span>
<span class="hljs-keyword">cd</span> riscv-gnu-toolchain
git submodule update <span class="hljs-params">--init</span> <span class="hljs-params">--recursive</span></code></pre></li><li><p>å®‰è£…ä¾èµ–ï¼ˆå…¶å®ƒç³»ç»ŸæŸ¥çœ‹å®˜æ–¹readme)</p><pre><code class="hljs q">sudo apt-<span class="hljs-built_in">get</span> install autoconf automake autotools-<span class="hljs-built_in">dev</span> curl python3 libmpc-<span class="hljs-built_in">dev</span> libmpfr-<span class="hljs-built_in">dev</span> libgmp-<span class="hljs-built_in">dev</span> gawk build-essential bison flex texinfo gperf libtool patchutils bc zlib1g-<span class="hljs-built_in">dev</span> libexpat-<span class="hljs-built_in">dev</span></code></pre></li></ol><h3 id="ä¸‹è½½å¤±è´¥è§£å†³æ–¹æ¡ˆ"><a href="#ä¸‹è½½å¤±è´¥è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ä¸‹è½½å¤±è´¥è§£å†³æ–¹æ¡ˆ"></a>ä¸‹è½½å¤±è´¥è§£å†³æ–¹æ¡ˆ</h3><ol><li><p>git clone qemuä¸‹è½½é€Ÿåº¦å¤ªæ…¢å¯¼è‡´å¤±è´¥ï¼ˆå› ä¸ºqemuæ²¡æœ‰æŠŠé¡¹ç›®æ‰˜ç®¡åœ¨GitHubä¸Š)</p><blockquote><p>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1xGrafiu4I0yPAnE0iuTYzw" rel="external nofollow noreferrer">https://pan.baidu.com/s/1xGrafiu4I0yPAnE0iuTYzw</a><br>æå–ç ï¼š3iyy</p></blockquote><p>ä¸‹è½½æºç , è§£å‹åˆ°ç›¸åº”çš„ç›®å½•ä¸Šå³å¯ã€‚</p></li><li><p>å…¶å®ƒæ¨¡å—æ²¡æœ‰æ‹‰ä¸‹æ¥ã€‚</p><p>åœ¨æºé¡¹ç›®ä¸‹æŒ¨ä¸ªæ‰‹åŠ¨å…‹éš†ã€‚</p><pre><code class="hljs awk">cd ~<span class="hljs-regexp">/riscv/</span>riscv-gnu-toolchain
git clone https:<span class="hljs-regexp">//</span>hub.fastgit.org<span class="hljs-regexp">/riscv/</span>riscv-gcc.git</code></pre></li></ol><h2 id="3ã€ç¼–è¯‘ç¯‡"><a href="#3ã€ç¼–è¯‘ç¯‡" class="headerlink" title="3ã€ç¼–è¯‘ç¯‡"></a>3ã€ç¼–è¯‘ç¯‡</h2><h3 id="1ã€Newlib"><a href="#1ã€Newlib" class="headerlink" title="1ã€Newlib"></a>1ã€Newlib</h3><ul><li><p>å»ºç«‹ä¸€ä¸ªå®‰è£…è·¯å¾„ï¼šmakdir /opt/riscv</p></li><li><p>[æœ€å¥½å»ºç«‹ä¸€ä¸ªç¼–è¯‘æ–‡ä»¶å¤¹]ï¼šmakdir build &amp;&amp; cd build</p></li><li><p>é…ç½®ç¯å¢ƒå˜é‡ï¼šexport PATH=$PATH:/opt/riscv/bin(å»ºè®®å†™åˆ°~/.bashrcä¸Šï¼Œæ°¸ä¹…æœ‰æ•ˆ</p><pre><code class="hljs jboss-cli"><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/opt/riscv</span>
make</code></pre></li></ul><h3 id="2ã€Linux"><a href="#2ã€Linux" class="headerlink" title="2ã€Linux"></a>2ã€Linux</h3><ul><li>è·Ÿä¸Šé¢ç›¸åŒçš„æ­¥éª¤ï¼Œä¸è¿‡æœ€å¥½æ¢ä¸€ä¸ªå¹²å‡€çš„æ–‡ä»¶å¤¹ã€‚</li></ul><ul><li><p>é»˜è®¤æ˜¯å®‰è£…RV64GC(64-bit), å³ä½¿åœ¨32-bitçš„æ„å»ºç¯å¢ƒä¸­ã€‚</p><pre><code class="hljs jboss-cli"><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/opt/riscv</span>
make linux</code></pre></li></ul><ul><li><p>Alternativelyï¼šï¼ˆæ„å»º32-bit RV32GC)</p><pre><code class="hljs routeros">./configure <span class="hljs-attribute">--prefix</span>=/opt/riscv <span class="hljs-attribute">--with-arch</span>=rv32gc <span class="hljs-attribute">--with-abi</span>=ilp32d
make linux</code></pre></li><li><p>æ”¯æŒçš„æ¶æ„æœ‰ï¼šrv32iã€rv64i</p></li><li>æ ‡å‡†æ‰©å±•ï¼š (a)tomics, (m)ultiplication and division, (f)loat, (d)ouble, or (g)eneral for MAFD</li><li>æ”¯æŒçš„ABIs: ilp32 (32-bit soft-float), ilp32d (32-bit hard-float), ilp32f (32-bit with single-precision in registers and double in memory, niche use only), lp64 lp64f lp64d (same but with 64-bit long and pointers).</li></ul><h3 id="3ã€Linux-multilib"><a href="#3ã€Linux-multilib" class="headerlink" title="3ã€Linux multilib"></a>3ã€Linux multilib</h3><ul><li><p>åŒæ—¶æ”¯æŒ32-bitå’Œ64-bitçš„Linuxã€‚</p><pre><code class="hljs jboss-cli"><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/opt/riscv</span> <span class="hljs-params">--enable-multilib</span>
make linux</code></pre><blockquote><p>ç¼–è¯‘å‡ºæ¥çš„å·¥å…·å¸¦æœ‰å‰ç¼€ï¼š<code>riscv64-unknown-linux-gnu-</code>, ä½†æ˜¯èƒ½ç¼–è¯‘32ä½å’Œ64ä½ç¨‹åºã€‚</p></blockquote></li></ul><h2 id="4ã€ç¼–è¯‘ç»“æœ"><a href="#4ã€ç¼–è¯‘ç»“æœ" class="headerlink" title="4ã€ç¼–è¯‘ç»“æœ"></a>4ã€ç¼–è¯‘ç»“æœ</h2><blockquote><p>ç»è¿‡æ¼«é•¿çš„ç­‰å¾…ï¼Œæˆ‘ç»ˆäºç¼–è¯‘Linux 64bitç‰ˆæœ¬ã€‚</p></blockquote><p><img src="http://image.beenli.cn/img/20200801/kPGRS3PNVC3f.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><p><img src="http://image.beenli.cn/img/20200801/BoO9SyR2SFa9.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p><a href="https://blog.csdn.net/weiqi7777/article/details/88045720?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-6.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-6.channel_param" rel="external nofollow noreferrer">riscvå„ç§ç‰ˆæœ¬gccå·¥å…·é“¾ç¼–è¯‘ä¸å®‰è£…</a></p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>RISC-V</category>
        <category>environment</category>
      </categories>
      <tags>
        <tag>toolkits</tag>
      </tags>
  </entry>
  <entry>
    <title>testbench(1)</title>
    <url>/posts/26241a85/</url>
    <content><![CDATA[<h2 id="Testbench-1"><a href="#Testbench-1" class="headerlink" title="Testbench(1)"></a><center>Testbench(1)</center></h2><h3 id="1ã€testbenchçš„ç»“æ„"><a href="#1ã€testbenchçš„ç»“æ„" class="headerlink" title="1ã€testbenchçš„ç»“æ„"></a>1ã€testbenchçš„ç»“æ„</h3><p><img src="https://image.beenli.cn/img/20200404/5eSun5gqIQrU.png?imageslim" srcset="/img/loading.gif" alt="testbench"></p><ol><li><p>testbenchæ²¡æœ‰<code>è¾“å…¥è¾“å‡º</code>æ¥å£</p></li><li><p>æµ‹è¯•æ¨¡å—åªè´Ÿè´£å¯¹<code>å¾…æµ‹è¯•ç³»ç»Ÿæ¥å£</code>æä¾›<code>æ¿€åŠ±ä¿¡å·</code>;å¹¶ç›‘æ§<code>è¾“å‡º</code></p></li><li><p>testbenchä»£ç <code>ä¸éœ€è¦å¯ç»¼åˆ</code>ï¼Œå³ä¸è¢«å®ç°æˆç”µè·¯</p></li><li><p>äº§ç”Ÿé€‚å½“çš„æ¿€åŠ±å¹¶è¾¾åˆ°<code>è¦†ç›–ç‡</code>è¦æ±‚</p><hr></li></ol><h3 id="2ã€æµ‹è¯•æ¿€åŠ±çš„æè¿°æ–¹å¼"><a href="#2ã€æµ‹è¯•æ¿€åŠ±çš„æè¿°æ–¹å¼" class="headerlink" title="2ã€æµ‹è¯•æ¿€åŠ±çš„æè¿°æ–¹å¼"></a>2ã€æµ‹è¯•æ¿€åŠ±çš„æè¿°æ–¹å¼</h3><ol><li><p><strong>ä¿¡å·çš„åˆå§‹åŒ–</strong></p><pre><code class="hljs verilog">ç¬¬ä¸€ç§: <span class="hljs-keyword">initial</span> åˆå§‹åŒ–
<span class="hljs-keyword">initial</span> a = <span class="hljs-number">0</span>;

ç¬¬äºŒç§: å®šä¹‰ä¿¡å·æ—¶åˆå§‹åŒ–
<span class="hljs-keyword">reg</span>[<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] cnt = <span class="hljs-number">4'b1010</span>;</code></pre></li><li><p><strong>å»¶è¿Ÿæ§åˆ¶</strong></p><ol><li><p>å»¶è¿Ÿè¯­å¥</p><ul><li><p>å¤–éƒ¨æ—¶é—´æ§åˆ¶</p><pre><code class="hljs verilog"><span class="hljs-keyword">initial</span> #<span class="hljs-number">5</span> a = b;(ç­‰å¾…<span class="hljs-number">5</span>tickåè®¡ç®—å³ç«¯çš„å€¼å¹¶èµ‹å€¼ç»™å·¦è¾¹ğŸ‘ˆ)

ç­‰ä»·äº:
<span class="hljs-keyword">initial</span>
<span class="hljs-keyword">begin</span>
    #<span class="hljs-number">5</span>;
    a=b;
<span class="hljs-keyword">end</span></code></pre></li><li><p>å†…éƒ¨æ—¶é—´æ§åˆ¶</p><pre><code class="hljs verilog"><span class="hljs-keyword">initial</span> a = #<span class="hljs-number">5</span> b;(å…ˆè®¡ç®—å³ç«¯çš„å€¼ï¼Œç­‰å¾…<span class="hljs-number">5</span>tickåå†æŠŠå€¼èµ‹ç»™å·¦è¾¹ğŸ‘ˆ)

ç­‰ä»·äº
<span class="hljs-keyword">initial</span>
<span class="hljs-keyword">begin</span>
	temp = b;
	#<span class="hljs-number">5</span>;
	a = temp;
<span class="hljs-keyword">end</span></code></pre><blockquote><p>éªŒè¯ç¨‹åºå¦‚ä¸‹ï¼š</p></blockquote><p><img src="http://image.beenli.cn/img/20200405/Ds3tBF8spFY8.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><p><img src="http://image.beenli.cn/img/20200405/zS4s5qx25VhP.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><p>å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼š</p><p>â€‹ ç¬¬ä¸€ç§å»¶æ—¶è¯­å¥ï¼Œåœ¨0-5tickä¹‹é—´åªè¦bå˜åŒ–äº†,é‚£ä¹ˆç¬¬äº”tick</p><p>æ—¶åˆ»aè¢«èµ‹äºˆçš„å€¼å°±æ˜¯bç¬¬äº”æ—¶åˆ»çš„å€¼ã€‚</p><p>â€‹ è€Œç¬¬äºŒç§å»¶æ—¶è¯­å¥ï¼šbçš„å€¼åœ¨0æ—¶åˆ»å·²ç»å®šå¥½äº†ï¼Œä¸ç®¡</p><p>båœ¨è¿™æœŸé—´æ€ä¹ˆå˜åŒ–ï¼Œaæœ€ç»ˆå¾—åˆ°çš„æ˜¯båœ¨0æ—¶åˆ»çš„å€¼ã€‚</p></li></ul></li><li><p>äº‹ä»¶è¯­å¥</p><blockquote><p><strong>@(&lt;äº‹ä»¶è¡¨è¾¾å¼&gt;);</strong></p><p><strong>@(&lt;äº‹ä»¶è¡¨è¾¾å¼&gt;)è¡Œä¸ºè¯­å¥;</strong></p></blockquote><pre><code class="hljs verilog"><span class="hljs-keyword">initial</span>
<span class="hljs-keyword">begin</span>
	# <span class="hljs-number">10</span>
	@(<span class="hljs-keyword">posedge</span> en) in = ~in; <span class="hljs-comment">//ençš„ğŸ‘†ä¸Šå‡æ²¿åˆ°æ¥æ—¶,inå–å</span>
<span class="hljs-keyword">end</span></code></pre><p>äº‹ä»¶è¯­å¥<code>@</code>å¿…é¡»ç­‰æŒ‡å®šäº‹ä»¶åˆ°æ¥æ‰æ‰§è¡Œ</p></li><li><p>ç­‰å¾…è¯­å¥</p><blockquote><p><strong>wait(&lt;æ¡ä»¶è¡¨è¾¾å¼&gt;) è¡Œä¸ºè¯­å¥</strong></p></blockquote><pre><code class="hljs verilog"><span class="hljs-keyword">always</span>
	#<span class="hljs-number">5</span> cnt=cnt+<span class="hljs-number">1'b1</span>;
<span class="hljs-keyword">initial</span>
	<span class="hljs-keyword">wait</span>(cnt == <span class="hljs-number">4'b1111</span>) 
	<span class="hljs-built_in">$display</span>(<span class="hljs-built_in">$time</span>,,,<span class="hljs-string">"cnt = %b"</span>, cnt);
<span class="hljs-keyword">end</span></code></pre><p>ç­‰å¾…è¯­å¥åªæœ‰æ¡ä»¶ä¸ºçœŸæ—¶æ‰æ‰§è¡Œã€‚</p><p><img src="http://image.beenli.cn/global/20200404/xTxXL9tRH35N.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><blockquote><p>å¯ä»¥çœ‹åˆ°ç¬¬0æ—¶åˆ»cnt = 0</p><p>ç¬¬5æ—¶åˆ»cnt = 1</p><p>ä»¥æ­¤ç±»æ¨ï¼›ç›´åˆ°ç¬¬75æ—¶åˆ» cnt = 15</p><p>å†è¿‡10tick å°±ç»ˆæ­¢ä»¿çœŸäº†ã€‚æ€»è¿‡æ—¶å¸¸85tick</p></blockquote></li></ol></li></ol><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>Digital IC</category>
        <category>verilog</category>
      </categories>
      <tags>
        <tag>specification</tag>
      </tags>
  </entry>
  <entry>
    <title>å­˜å‚¨ç”µè·¯</title>
    <url>/posts/19fa4593/</url>
    <content><![CDATA[<h2 id="ä¸€ã€æ¦‚è¿°"><a href="#ä¸€ã€æ¦‚è¿°" class="headerlink" title="ä¸€ã€æ¦‚è¿°"></a>ä¸€ã€æ¦‚è¿°</h2><blockquote><p>åœ¨å¤æ‚çš„æ•°å­—ç”µè·¯ä¸­ï¼Œä¸ä»…éœ€è¦å¯¹å„ç§æ•°å­—ä¿¡å·è¿›è¡Œ<code>ç®—æœ¯è¿ç®—</code>å’Œ<code>é€»è¾‘è¿ç®—</code>ï¼Œè€Œä¸”è¿˜éœ€è¦åœ¨è¿ç®—è¿‡ç¨‹ä¸­ä¸æ–­å°†è¿ç®—æ•°æ®å’Œè¿ç®—ç»“æœä¿å­˜èµ·æ¥ã€‚å› æ­¤ï¼Œ<code>å­˜å‚¨ç”µè·¯</code>å°±æˆä¸ºè®¡ç®—æœºä»¥åŠæ‰€æœ‰å¤æ‚æ•°å­—ç³»ç»Ÿä¸å¯ç¼ºå°‘çš„ç»„æˆéƒ¨åˆ†ã€‚</p></blockquote><ul><li><p>åˆ†ç±»æ€»ç»“</p><p><img src="http://image.beenli.cn/img/20200806/KInKOkBSpdhF.png?imageslim" srcset="/img/loading.gif" alt="mark"></p></li></ul><h2 id="äºŒã€SRé”å­˜å™¨"><a href="#äºŒã€SRé”å­˜å™¨" class="headerlink" title="äºŒã€SRé”å­˜å™¨"></a>äºŒã€SRé”å­˜å™¨</h2><p class="note note-info">SRé”å­˜å™¨(Set-Reset Latch) æ˜¯é™æ€å­˜å‚¨å•å…ƒä¸­æœ€åŸºæœ¬ï¼Œä¹Ÿæ˜¯ç”µè·¯ç»“æ„æœ€ç®€å•çš„ä¸€ç§ã€‚</p><ol><li><p>æˆ–é—¨é”å­˜å™¨</p><p><img src="http://image.beenli.cn/img/20200806/mkE1Uu5jsyux.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ul><li>å½“$R_D$æ˜¯1æˆ–è€…$S_D$æ˜¯1è€Œå¦å¤–ä¸€ä¸ªæ˜¯0æ—¶ï¼Œå¯ä»¥çœ‹åˆ°Sèµ·åˆ°<code>set 1</code>ï¼›è€ŒRèµ·åˆ°<code>reset 0</code>çš„ä½œç”¨ã€‚</li><li>å½“æœ‰ä¸€ä¸ªå›åˆ°0æ—¶(æ­¤æ—¶ä¸¤è¾“å…¥éƒ½ä¸º0)ï¼Œå¯ä»¥ä¿æŒåŸæ¥çš„çŠ¶æ€ä¸å˜ã€‚(å› ä¸ºè¾“å‡ºçš„1åé¦ˆåˆ°è¾“å…¥)</li><li><span class="github-emoji" style="display:inline;vertical-align:middle;color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/274c.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png?v8">âŒ</span>ä¸å…è®¸è¾“å…¥åŒä¸º1ã€‚ï¼ˆæ­¤æ—¶è¾“å‡ºåŒä¸º0ä¸ºæ— æ•ˆçŠ¶æ€ï¼Œå¹¶ä¸”åŒæ—¶å˜ä¸º0æ—¶å­˜åœ¨ç«äº‰å†’é™©ï¼‰</li></ul></li><li><p>ä¸é—¨é”å­˜å™¨(åŒç†)<span class="github-emoji" style="display:inline;vertical-align:middle;color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f642.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f642.png?v8">ğŸ™‚</span></p><p><img src="http://image.beenli.cn/img/20200806/ny32DamxXGT9.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p></li></ol><h2 id="ä¸‰ã€è§¦å‘å™¨"><a href="#ä¸‰ã€è§¦å‘å™¨" class="headerlink" title="ä¸‰ã€è§¦å‘å™¨"></a>ä¸‰ã€è§¦å‘å™¨</h2><p class="note note-info">è§¦å‘å™¨ä¸é”å­˜å™¨ä¸åŒåœ¨äºï¼šå¢åŠ äº†ä¸€ä¸ªè§¦å‘ä¿¡å·è¾“å…¥ç«¯(æ—¶é’Ÿä¿¡å·<strong>CLK</strong>)ã€‚åªæœ‰å½“è§¦å‘ä¿¡å·åˆ°æ¥æ—¶ï¼Œå…¶åŠŸèƒ½ä¸é”å­˜å™¨ç›¸åŒã€‚</p><h3 id="1ã€ç”µå¹³è§¦å‘"><a href="#1ã€ç”µå¹³è§¦å‘" class="headerlink" title="1ã€ç”µå¹³è§¦å‘"></a>1ã€ç”µå¹³è§¦å‘</h3><p class="note note-light">åªæœ‰è§¦å‘ä¿¡å·åœ¨æœ‰æ•ˆç”µå¹³çš„æ—¶å€™ï¼Œè¾“å…¥ä¿¡å·æ‰èƒ½ä½œç”¨ã€‚<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></p><h4 id="â‘ åŒæ­¥SRè§¦å‘å™¨"><a href="#â‘ åŒæ­¥SRè§¦å‘å™¨" class="headerlink" title="â‘ åŒæ­¥SRè§¦å‘å™¨"></a>â‘ åŒæ­¥SRè§¦å‘å™¨</h4><p><img src="http://image.beenli.cn/img/20200806/w2EFARutEXwH.jpg?imageslim" srcset="/img/loading.gif" alt="clæ²¡æœ‰â­•ä»£è¡¨é«˜ç”µå¹³æœ‰æ•ˆ"></p><center>æ¡†å›¾<strong>Cl</strong>å¤–é¢æ²¡æœ‰â­•ä»£è¡¨é«˜ç”µå¹³æœ‰æ•ˆ</center><h4 id="â‘¡å¼‚æ­¥å¤ä½ç½®ä½"><a href="#â‘¡å¼‚æ­¥å¤ä½ç½®ä½" class="headerlink" title="â‘¡å¼‚æ­¥å¤ä½ç½®ä½"></a>â‘¡å¼‚æ­¥å¤ä½ç½®ä½</h4><p>// å°†<code>ç½®ä½ä¿¡å·</code>$S_{D}^{â€˜}$æ¥å…¥G1, <code>å¤ä½ä¿¡å·</code>$R_{D}^{â€˜}$æ¥G2</p><h4 id="â‘¢å•ç«¯è¾“å…¥-Då‹å·é”å­˜å™¨"><a href="#â‘¢å•ç«¯è¾“å…¥-Då‹å·é”å­˜å™¨" class="headerlink" title="â‘¢å•ç«¯è¾“å…¥(Då‹å·é”å­˜å™¨)"></a>â‘¢å•ç«¯è¾“å…¥(Då‹å·é”å­˜å™¨)</h4><p>// è§„é¿äº†çº¦æŸæ¡ä»¶SR=0</p><p><img src="http://image.beenli.cn/img/20200806/xIOR3Naxv9I6.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><h4 id="â‘£Transparent-D-Latch"><a href="#â‘£Transparent-D-Latch" class="headerlink" title="â‘£Transparent D-Latch"></a>â‘£Transparent D-Latch</h4><p>// CMOSä¼ è¾“é—¨æ„æˆ</p><p><img src="http://image.beenli.cn/img/20200806/Gs96RXY8qL57.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><p>å½“TG2æ‰“å¼€ï¼ŒTG1å…³é—­æ—¶ã€‚ä¸¤ä¸ªåç›¸å™¨ä¸²è”æŠŠæˆªæ­¢å‰ç¬é—´çš„ä¿¡å·(<code>åç›¸å™¨G1è¾“å…¥ç”µå®¹</code>)é”ä½ã€‚</p><h3 id="2ã€è¾¹æ²¿è§¦å‘"><a href="#2ã€è¾¹æ²¿è§¦å‘" class="headerlink" title="2ã€è¾¹æ²¿è§¦å‘"></a>2ã€è¾¹æ²¿è§¦å‘</h3><p class="note note-light">æé«˜è§¦å‘å™¨å¯é æ€§ï¼Œå¢å¼ºæŠ—å¹²æ‰°èƒ½åŠ›ï¼Œå¸Œæœ›è§¦å‘å™¨æ¬¡æ€ä»…å–å†³äºCLKä¿¡å·<strong>è¾¹æ²¿</strong>åˆ°è¾¾æ—¶åˆ»è¾“å…¥ä¿¡å·çš„çŠ¶æ€ã€‚è€Œè¾¹æ²¿ä¹‹å‰æˆ–ä¹‹åè¾“å…¥çŠ¶æ€çš„å˜åŒ–å¯¹è§¦å‘å™¨çš„æ¬¡æ€æ²¡æœ‰å½±å“ã€‚</p><h4 id="â‘ ä¸¤ä¸ªç”µå¹³è§¦å‘Dè§¦å‘å™¨"><a href="#â‘ ä¸¤ä¸ªç”µå¹³è§¦å‘Dè§¦å‘å™¨" class="headerlink" title="â‘ ä¸¤ä¸ªç”µå¹³è§¦å‘Dè§¦å‘å™¨"></a>â‘ ä¸¤ä¸ªç”µå¹³è§¦å‘Dè§¦å‘å™¨</h4><p><img src="http://image.beenli.cn/img/20200806/XRFiu2qdjwAn.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ul><li>ä¸çœ‹ç½®ä½ä¿¡å·å°±æ˜¯ä¸¤ä¸ªTransparent D-Latch</li><li>å½“ç¬¬ä¸€ä¸ªå·¥ä½œæ—¶ï¼Œç¬¬äºŒä¸ªä¿æŒã€‚é€æ˜Dé”å­˜å™¨ï¼šæ‰€ä»¥è¾“å‡ºèƒ½è·Ÿéšæ—¶é’Ÿè¾¹æ²¿ç¬é—´è¾“å…¥çš„å€¼</li></ul><h4 id="â‘¡ç»´æŒé˜»å¡-pushpin"><a href="#â‘¡ç»´æŒé˜»å¡-pushpin" class="headerlink" title="â‘¡ç»´æŒé˜»å¡:pushpin:"></a>â‘¡ç»´æŒé˜»å¡<span class="github-emoji" style="display:inline;vertical-align:middle;color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f4cc.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4cc.png?v8">ğŸ“Œ</span></h4><h4 id="â‘¢é—¨ç”µè·¯ä¼ è¾“å»¶è¿Ÿ-pushpin"><a href="#â‘¢é—¨ç”µè·¯ä¼ è¾“å»¶è¿Ÿ-pushpin" class="headerlink" title="â‘¢é—¨ç”µè·¯ä¼ è¾“å»¶è¿Ÿ:pushpin:"></a>â‘¢é—¨ç”µè·¯ä¼ è¾“å»¶è¿Ÿ<span class="github-emoji" style="display:inline;vertical-align:middle;color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f4cc.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4cc.png?v8">ğŸ“Œ</span></h4><h3 id="3ã€è„‰å†²è§¦å‘"><a href="#3ã€è„‰å†²è§¦å‘" class="headerlink" title="3ã€è„‰å†²è§¦å‘"></a>3ã€è„‰å†²è§¦å‘</h3><p class="note note-light">ä¸ºäº†æé«˜å¯é æ€§ï¼šå¸Œæœ›æ¯ä¸ªCLKå‘¨æœŸé‡Œé¢è¾“å‡ºç«¯çŠ¶æ€åªèƒ½æ”¹å˜<strong>ä¸€æ¬¡</strong></p><h4 id="â‘ ä¸»ä»SR"><a href="#â‘ ä¸»ä»SR" class="headerlink" title="â‘ ä¸»ä»SR"></a>â‘ ä¸»ä»SR</h4><p>Master-Slave SR Flip-Flop</p><p><img src="http://image.beenli.cn/img/20200812/sT6pd0FRytWY.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><center><strong>ï¿¢</strong>ï¼šå»¶æ—¶è¾“å‡º</center><p><img src="http://image.beenli.cn/img/20200812/Gj3SXcH9aMF3.png?imageslim" srcset="/img/loading.gif" alt="mark"></p><center>é«˜ç”µå¹³æœ‰æ•ˆï¼Œä¸‹é™æ²¿çŠ¶æ€æ‰ä¼šæ”¹å˜</center><ul><li>clké«˜ç”µå¹³<code>ä¸»è§¦å‘å™¨</code>æœ‰æ•ˆï¼Œ<code>ä»è§¦å‘å™¨</code>ä¿æŒåŸæ¥çŠ¶æ€ã€‚</li><li>clkä»é«˜å˜åˆ°ä½æ—¶ï¼Œä¸»è§¦å‘å™¨è¢«å°é”ï¼Œä»è§¦å‘å™¨æŒ‰ç…§ä¸»è§¦å‘å™¨ç›¸åŒçš„çŠ¶æ€ç¿»è½¬ã€‚</li><li>å› æ­¤ï¼šä¸€ä¸ªå‘¨æœŸè¾“å‡ºåªå¯èƒ½ç¿»è½¬ä¸€æ¬¡ã€‚</li></ul><h4 id="â‘¡ä¸»ä»JK-è§„é¿SR-1"><a href="#â‘¡ä¸»ä»JK-è§„é¿SR-1" class="headerlink" title="â‘¡ä¸»ä»JK(è§„é¿SR=1)"></a>â‘¡ä¸»ä»JK(<code>è§„é¿SR=1</code>)</h4><p><img src="http://image.beenli.cn/img/20200812/3w2tYTQ9HhKm.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><script type="math/tex;mode=display">Q^* = S + \overline RQ(for\quad SR)</script><script type="math/tex;mode=display">JK: S=J \overline Q\quad R=KQ</script><script type="math/tex;mode=display">Q^*=J \overline Q+(\overline K+\overline Q)Q=J \overline Q + \overline KQ\quad(for\quad JK)</script><ul><li>clkå˜ä½ç”µå¹³æ—¶æŠŠä¸»è§¦å‘å™¨çš„å€¼<code>å¤åˆ¶</code>ç»™äº†æ¬¡è§¦å‘å™¨ã€‚ï¼ˆæ‰€ä»¥ä¸Šè¾¹æ¨å¯¼æ—¶Qå³ä»£è¡¨ä¸­é—´è¾“å‡ºä¹Ÿä»£è¡¨åè¾¹è¾“å‡ºï¼‰</li><li>ä¸»è§¦å‘å™¨æœ‰æ•ˆæ—¶(é«˜ç”µå¹³)Qè¦ä¹ˆä¸º1è¦ä¹ˆä¸º0ï¼Œä¸å¯èƒ½åŒæ—¶ä¸º0æˆ–è€…ä¸º1ã€‚å› ä¸ºG3,G4éƒ½ä¸º1ã€‚å®ƒä»¬é€šè¿‡åç›¸å™¨äº’å’¬ã€‚</li><li>è€ƒå¯Ÿå½“J=1ï¼ŒR=1æ—¶ï¼ŒG7,G8è¾“å‡º$Q$å’Œ$\overline Q$(ä¸æ˜¯å…¨0ï¼Œå°±ğŸ†—)ã€‚æ‰€ä»¥å½“Q=1ï¼Œè¾“å‡ºä¸º0ï¼Œå½“Q=0,è¾“å‡ºä¸º1,å³åå‘ã€‚</li></ul><h2 id="å››ã€è§¦å‘å™¨çš„åŠ¨æ€ç‰¹æ€§-pushpin"><a href="#å››ã€è§¦å‘å™¨çš„åŠ¨æ€ç‰¹æ€§-pushpin" class="headerlink" title="å››ã€è§¦å‘å™¨çš„åŠ¨æ€ç‰¹æ€§:pushpin:"></a>å››ã€è§¦å‘å™¨çš„åŠ¨æ€ç‰¹æ€§<span class="github-emoji" style="display:inline;vertical-align:middle;color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f4cc.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4cc.png?v8">ğŸ“Œ</span></h2><h2 id="äº”ã€References"><a href="#äº”ã€References" class="headerlink" title="äº”ã€References"></a>äº”ã€References</h2><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none;padding-left:0"><li id="fn:1"><span style="display:inline-block;vertical-align:top;padding-right:10px">1.</span><span style="display:inline-block;vertical-align:top">å¤–å›½æ•™ææœ‰æ—¶æŠŠæ­¤ç”µè·¯å«ï¼ˆGated SR latch), æ—¶é’Ÿä¿¡å·å«åšâ€œä½¿èƒ½â€ä¿¡å·ï¼ˆenableï¼‰</span><a href="#fnref:1" rev="footnote"> â†©</a></li></ol></div></div><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>Digital IC</category>
        <category>digital electronic technique</category>
      </categories>
      <tags>
        <tag>circuits</tag>
      </tags>
  </entry>
  <entry>
    <title>å•é“¾è¡¨ç¿»è½¬</title>
    <url>/posts/39c22857/</url>
    <content><![CDATA[<h5 id="å•é“¾è¡¨ç¿»è½¬"><a href="#å•é“¾è¡¨ç¿»è½¬" class="headerlink" title="å•é“¾è¡¨ç¿»è½¬"></a><center>å•é“¾è¡¨ç¿»è½¬</center></h5><h6 id="è§£æ³•ä¸€ã€æ‹†å¸-æ‹¼æ¥"><a href="#è§£æ³•ä¸€ã€æ‹†å¸-æ‹¼æ¥" class="headerlink" title="è§£æ³•ä¸€ã€æ‹†å¸+æ‹¼æ¥"></a><code>è§£æ³•ä¸€</code>ã€æ‹†å¸+æ‹¼æ¥</h6><pre><code class="hljs c"><span class="hljs-function">struct ListNode *<span class="hljs-title">reverseList</span><span class="hljs-params">(struct ListNode* head)</span></span>{
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ListNOde</span> *<span class="hljs-title">newHead</span> = <span class="hljs-title">NUll</span>;</span>
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ListNode</span> *<span class="hljs-title">node</span> = <span class="hljs-title">NULL</span>;</span>
    <span class="hljs-keyword">while</span> (head != <span class="hljs-literal">NULL</span>) {
        <span class="hljs-comment">//1. å¯¹ä¹‹å‰çš„é“¾è¡¨åšå¤´åˆ </span>
        node = head; <span class="hljs-comment">// nodeå§‹ç»ˆæŒ‡å‘headçš„å‰é©±</span>
        head = head-&gt;next;

        <span class="hljs-comment">//2. å¯¹æ–°é“¾è¡¨åšå¤´æ’</span>
        node-&gt;next = newHead;
        newHead = node;
    }
    <span class="hljs-keyword">return</span> newHead;
}</code></pre><a id="more"></a><p><img src="/assets/photoes/reverse_linked_list.jpg" srcset="/img/loading.gif" style="zoom:80%"></p><hr><h6 id="è§£æ³•äºŒã€ä¸‰æŒ‡é’ˆæ³•"><a href="#è§£æ³•äºŒã€ä¸‰æŒ‡é’ˆæ³•" class="headerlink" title="è§£æ³•äºŒã€ä¸‰æŒ‡é’ˆæ³•"></a><code>è§£æ³•äºŒ</code>ã€ä¸‰æŒ‡é’ˆæ³•</h6><pre><code class="hljs c"><span class="hljs-function">struct ListNode *<span class="hljs-title">reverseList</span><span class="hljs-params">(struct ListNode* head)</span> </span>{
	<span class="hljs-keyword">if</span> (head == <span class="hljs-literal">NULL</span>) { <span class="hljs-comment">// å¦‚æœä¸ºNULLï¼Œé‚£ä¹ˆåæŒ‡é’ˆè¶Šç•Œã€‚</span>
		<span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;
	}
	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ListNode</span> *<span class="hljs-title">p0</span> = <span class="hljs-title">NULL</span>;</span>
	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ListNode</span> *<span class="hljs-title">p1</span> = <span class="hljs-title">head</span>;</span>
	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ListNode</span> *<span class="hljs-title">p2</span> = <span class="hljs-title">head</span>-&gt;<span class="hljs-title">next</span>;</span>
	<span class="hljs-keyword">while</span> (p1 != <span class="hljs-literal">NULL</span>) {
		p1-&gt;next = p0;

		p0 = p1; 
		p1 = p2;
		<span class="hljs-keyword">if</span> (p2 != <span class="hljs-literal">NULL</span>) {
			p2 = p2-&gt;next;
		}
	}
	<span class="hljs-keyword">return</span> p0;
}</code></pre><p><img src="/assets/photoes/three_pointer.jpg" srcset="/img/loading.gif" style="zoom:80%"></p><blockquote><p><a href="https://blog.csdn.net/qq_42351880/article/details/88637387" rel="external nofollow noreferrer">å‚è€ƒåšå®¢</a></p></blockquote><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CS</category>
        <category>Data Structure</category>
      </categories>
      <tags>
        <tag>C</tag>
      </tags>
  </entry>
  <entry>
    <title>æ“ä½œç³»ç»Ÿ-ç†Ÿæ‚‰å®éªŒç¯å¢ƒ(1)</title>
    <url>/posts/9cf5ff72/</url>
    <content><![CDATA[<h2 id="ç†Ÿæ‚‰å®éªŒç¯å¢ƒ"><a href="#ç†Ÿæ‚‰å®éªŒç¯å¢ƒ" class="headerlink" title="ç†Ÿæ‚‰å®éªŒç¯å¢ƒ"></a><center>ç†Ÿæ‚‰å®éªŒç¯å¢ƒ</center></h2><h3 id="1ã€x86æ¨¡æ‹Ÿå™¨Bochs1"><a href="#1ã€x86æ¨¡æ‹Ÿå™¨Bochs1" class="headerlink" title="1ã€x86æ¨¡æ‹Ÿå™¨Bochs1"></a>1ã€x86æ¨¡æ‹Ÿå™¨<a href="http://bochs.sourceforge.net/" rel="external nofollow noreferrer">Bochs</a><a href="#link"><sup>1</sup></a></h3><p class="note note-info">Bochs is a highly portable open source IA-32 (x86) PC emulator written in C++, that runs on most popular platforms. It includes emulation of the Intel x86 CPU, common I/O devices, and a custom BIOS. Bochs can be compiled to emulate many different x86 CPUs, from early 386 to the most recent x86-64 Intel and AMD processors which may even not reached the market yet.</p><p>å¯ä»¥çœ‹åˆ°<code>Boch</code>å¯ä»¥æ¨¡æ‹Ÿ<code>intel x86 CPU</code></p><p>åœ¨å®ƒæ¨¡æ‹Ÿå‡ºçš„ç¯å¢ƒä¸­å¯ä»¥è¿è¡Œ Linuxã€DOS å’Œå„ç§ç‰ˆæœ¬çš„ Windows ç­‰å¤šç§æ“ä½œç³»ç»Ÿ</p><h3 id="2ã€æ“ä½œç³»ç»ŸUbuntu"><a href="#2ã€æ“ä½œç³»ç»ŸUbuntu" class="headerlink" title="2ã€æ“ä½œç³»ç»ŸUbuntu"></a>2ã€æ“ä½œç³»ç»Ÿ<a href="https://ubuntu.com/" rel="external nofollow noreferrer">Ubuntu</a></h3><p>å› ä¸ºæœ‰äº›å®éªŒå†…å®¹æ¶‰åŠåˆ°åœ¨è‡ªå·±æ”¹è¿›çš„ <code>Linux 0.11</code>ä¸‹ï¼Œè¿è¡Œè‡ªå·±ç¼–çš„åº”ç”¨ç¨‹åºã€‚è¢«æ”¹è¿›çš„åŠŸèƒ½éƒ½æ˜¯é«˜ ç‰ˆæœ¬ Linux å†…æ ¸å·²ç»å…·æœ‰çš„ï¼Œåœ¨å…¶ä¸Šç¡®è®¤è‡ªå·±ç¼–å†™çš„åº”ç”¨ç¨‹åºæ— è¯¯åï¼Œå†ç”¨ä¹‹æµ‹è¯•è‡ªå·±æ”¹è¿›çš„ Linux 0.11ï¼Œå¯ä»¥æ›´æœ‰ä¿¡å¿ƒäº›ã€‚</p><h3 id="3ã€å®éªŒå‹ç¼©åŒ…hit-oslab"><a href="#3ã€å®éªŒå‹ç¼©åŒ…hit-oslab" class="headerlink" title="3ã€å®éªŒå‹ç¼©åŒ…hit-oslab"></a>3ã€å®éªŒå‹ç¼©åŒ…<a href="https://github.com/hoverwinter/HIT-OSLab" rel="external nofollow noreferrer">hit-oslab</a></h3><p>æ–‡ä»¶ç»“æ„:</p><pre><code class="hljs bash">.
..
â””â”€â”€ bocks
|   	â”œâ”€â”€ BIOS-bochs-latest
|       â”œâ”€â”€ bochs-dbg
|   	â”œâ”€â”€ bochs-gdb
|   	â”œâ”€â”€ bochsrc.bxrc
|   	â”œâ”€â”€ bochsrc-gdb.bxrc
|       â””â”€â”€ vgabios.bin
|
â””â”€â”€ hdc
|   	â””â”€â”€ umounted
â””â”€â”€ Linux-0.11
|		â””â”€â”€ boot
|		â”œâ”€â”€ kernel
|		â”œâ”€â”€ fs
|		â”œâ”€â”€ lib
|		â”œâ”€â”€ init				
|		â”œâ”€â”€ mm
|		â”œâ”€â”€ tools			
|		â”œâ”€â”€ include
|		â”œâ”€â”€ tags
|		â””â”€â”€ Makefile
â”œâ”€â”€ dbg-asm
â”œâ”€â”€ dbg-c
â”œâ”€â”€ gdb
â”œâ”€â”€ gdb-cmd.txt
â”œâ”€â”€ run
â”œâ”€â”€ rungdb
â””â”€â”€ mount-hdc</code></pre><ol><li><p>Imageæ–‡ä»¶</p><p>æˆ‘ä»¬åœ¨å®¿ä¸»æ“ä½œç³»ç»Ÿä¹Ÿå°±æ˜¯ubuntuä¸Šå¯¹Linux 0.11è¿›è¡Œå¼€å‘ï¼Œä¿®æ”¹å’Œç¼–è¯‘ã€‚</p><p>ä¹‹ååœ¨Linux-0.11ç›®å½•ä¼šç”Ÿæˆä¸€ä¸ª<code>Image</code>çš„æ–‡ä»¶ã€‚ï¼ˆç¼–è¯‘åçš„ç›®æ ‡æ–‡ä»¶ï¼‰</p><p><br></p><p>è¯¥æ–‡ä»¶åŒ…å«å¼•å¯¼å’Œæ‰€ä»¥å†…æ ¸çš„äºŒè¿›åˆ¶ä»£ç ã€‚</p><p class="note note-primary">oslab é‡‡ç”¨ bochs æ¨¡æ‹Ÿå™¨åŠ è½½è¿™ä¸ª Image æ–‡ä»¶ï¼Œæ¨¡æ‹Ÿæ‰§è¡Œ Linux 0.11ï¼Œè¿™æ ·çœå´äº†é‡æ–°å¯åŠ¨è®¡ç®—æœºçš„éº»çƒ¦ã€‚</p></li><li><p>bochsç›®å½•</p><p>bochsç›®å½•æ˜¯ä¸bochsç›¸å…³çš„æ‰§è¡Œæ–‡ä»¶ã€æ•°æ®æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶</p></li><li><p>run è„šæœ¬</p><p><code>run</code> æ˜¯ è¿è¡Œbochsçš„è„šæœ¬å‘½ä»¤</p><p>è¿è¡Œåbochsä¼šè‡ªåŠ¨åœ¨ä»–çš„</p><p>è™šæ‹Ÿè½¯é©±â€”â€”linux-0.11/Image</p><p>è™šæ‹Ÿç¡¬ç›˜â€”â€”hdc-0.11.img</p><p class="note note-primary">åœ¨ 0.11 ä¸‹è®¿é—®æ–‡ä»¶ç³»ç»Ÿï¼Œè®¿é—®çš„å°±æ˜¯ hdc-0.11.img æ–‡ä»¶å†…è™šæ‹Ÿçš„æ–‡ä»¶ç³»ç»Ÿã€‚<br>é€€å‡ºbochsä¹‹å‰ç°å­˜ç›˜ï¼Œè¿è¡Œsyncå‘½ä»¤</p></li><li><p>hdc-0.11.img æ–‡ä»¶</p><p>æ–‡ä»¶çš„æ ¼å¼æ˜¯ Minix æ–‡ä»¶ç³»ç»Ÿçš„é•œåƒã€‚Linux æ‰€æœ‰ç‰ˆæœ¬éƒ½æ”¯æŒè¿™ç§æ ¼å¼çš„æ–‡ä»¶ç³»ç»Ÿ</p><p>æ‰€ä»¥å¯ä»¥åœ¨å®¿ä¸»ç³»ç»Ÿä¸ŠæŒ‚è½½è¯¥æ–‡ä»¶ç³»ç»Ÿã€‚è¾¾åˆ°å®¿ä¸»ç³»ç»Ÿå’ŒLinux 0.11ä¹‹é—´æ–‡ä»¶äº¤æ¢çš„æ•ˆæœ</p><p>å…¶ä¸­åŒ…å«çš„æ–‡ä»¶æœ‰ï¼š</p><ul><li>Bash shellï¼›</li><li>ä¸€äº›åŸºæœ¬çš„ Linux å‘½ä»¤ã€å·¥å…·ï¼Œæ¯”å¦‚ cpã€rmã€mvã€tarï¼›</li><li>vi ç¼–è¾‘å™¨ï¼›</li><li>gcc 1.4 ç¼–è¯‘å™¨ï¼Œå¯ç”¨æ¥ç¼–è¯‘æ ‡å‡† C ç¨‹åºï¼›</li><li>as86 å’Œ ld86ï¼›</li><li>Linux 0.11 çš„æºä»£ç ï¼Œå¯åœ¨ 0.11 ä¸‹ç¼–è¯‘ï¼Œç„¶åè¦†ç›–ç°æœ‰çš„äºŒè¿›åˆ¶å†…æ ¸ã€‚</li></ul></li><li><p>ç¼–è¯‘</p><blockquote><p>make all(make å‘½ä»¤ä¼šè‡ªåŠ¨è·³è¿‡æœªè¢«ä¿®æ”¹çš„æ–‡ä»¶ )</p><p>å¦‚æœé‡æ–°ç¼–è¯‘æ²¡æœ‰æ•ˆæœå¯ä»¥è¯•è¯•åˆ é™¤ä¸­é—´æ–‡ä»¶: make clean &amp;&amp; make all</p></blockquote></li><li><p>è¿è¡Œ</p><p><code>./run</code></p></li></ol><h3 id="4ã€è°ƒè¯•"><a href="#4ã€è°ƒè¯•" class="headerlink" title="4ã€è°ƒè¯•"></a>4ã€è°ƒè¯•</h3><ol><li><p>æ±‡ç¼–çº§è°ƒè¯•</p><p><code>./dbg-asm</code></p></li><li><p>Cè¯­è¨€è°ƒè¯•</p><ol><li><p><code>./dbg-c</code></p></li><li><p><code>./rungdb</code>(æ–°å¼€ä¸€ä¸ªçª—å£)</p><blockquote><p>æ³¨æ„ï¼šå¯åŠ¨çš„é¡ºåºä¸èƒ½äº¤æ¢ï¼Œå¦åˆ™ gdb æ— æ³•è¿æ¥ã€‚</p></blockquote></li></ol></li></ol><h3 id="5ã€æ–‡ä»¶äº¤æ¢"><a href="#5ã€æ–‡ä»¶äº¤æ¢" class="headerlink" title="5ã€æ–‡ä»¶äº¤æ¢"></a>5ã€æ–‡ä»¶äº¤æ¢</h3><pre><code class="hljs bash"><span class="hljs-comment"># å¯åŠ¨æŒ‚è½½è„šæœ¬</span>
$ <span class="hljs-built_in">cd</span> ~/oslab
$ sudo ./mount-hdc

<span class="hljs-comment"># è¿›å…¥æ–‡ä»¶ç³»ç»Ÿ</span>
$ <span class="hljs-built_in">cd</span> ./mount-hdc/

<span class="hljs-comment"># è¯»å†™å®Œæ¯•ï¼Œå¸è½½æ–‡ä»¶ç³»ç»Ÿ</span>
$ <span class="hljs-built_in">cd</span> ~/oslab
$ sudo umount hdc</code></pre><hr><h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><div id="link"></div><p>[1] <a href="https://mooc.study.163.com/course/1000002004?tid=2402971010#/info" rel="external nofollow noreferrer">å“ˆå°”æ»¨å·¥ä¸šå¤§å­¦.æ“ä½œç³»ç»Ÿ</a></p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CS</category>
        <category>OS</category>
      </categories>
      <tags>
        <tag>online course</tag>
      </tags>
  </entry>
  <entry>
    <title>iverilog</title>
    <url>/posts/bc753b52/</url>
    <content><![CDATA[<h2 id="vim-iverilog-gtkwave"><a href="#vim-iverilog-gtkwave" class="headerlink" title="vim + iverilog + gtkwave "></a><center>vim + iverilog + gtkwave</center></h2><h3 id="1ã€What-is-Icarus-Verilog"><a href="#1ã€What-is-Icarus-Verilog" class="headerlink" title="1ã€What is Icarus Verilog"></a>1ã€What is Icarus Verilog</h3><blockquote><p><em>Icarus Verilog</em> is a <strong>Verilog simulation and synthesis</strong> tool. It operates as a compiler, compiling source code written in Verilog (IEEE-1364) into some target format. For batch simulation, the compiler can generate an intermediate form called <em>vvp assembly</em>. This intermediate form is executed by the <code>vvp</code>command. For synthesis, the compiler generates netlists in the desired format.<a href="#refer-anchor"><sup>1</sup></a></p></blockquote><p>â€‹ ä»å®˜ç½‘çš„æè¿°æˆ‘ä»¬å¯ä»¥çœ‹åˆ°: å®ƒæ˜¯ä¸€ä¸ª<code>ä»¿çœŸå™¨</code>å’Œ<code>ç»¼åˆå™¨</code>ã€‚</p><p>â€‹ æœ‰è¶£çš„æ˜¯ï¼šå¼€å‘è€…æ˜¯ä¸€åè½¯ä»¶å·¥ç¨‹å¸ˆ</p><p>â€‹ a software engineer specializing in device drivers and embedded systems</p><h3 id="2ã€Why-we-choose-Icarus-Verilog"><a href="#2ã€Why-we-choose-Icarus-Verilog" class="headerlink" title="2ã€Why we choose Icarus Verilog"></a>2ã€Why we choose Icarus Verilog</h3><ol><li>è½¯ä»¶éå¸¸å°ï¼Œæ²¡æœ‰å›¾å½¢ç•Œé¢ã€‚è·‘è·‘å°çš„ç¨‹åºè¶³å¤Ÿäº†</li><li>è½¯ä»¶æ‰©å±•æ€§ç‰¹åˆ«å¥½ã€‚æˆ‘ç°åœ¨è¿˜æ²¡æœ‰å»æ¢ç´¢ã€‚<a href="http://iverilog.icarus.com/page/plug-ins" rel="external nofollow noreferrer">è¯¦æƒ…è§</a></li><li>è½¯ä»¶å®Œå…¨å¼€æºã€‚å¦‚æœæœ‰å…´è¶£å¯ä»¥æ¢ç´¢æ˜¯å¦‚ä½•æŠŠRTLä»£ç è½¬æ¢ä¸ºnetlistçš„</li></ol><h3 id="3ã€How-to-use-it"><a href="#3ã€How-to-use-it" class="headerlink" title="3ã€How to  use it"></a>3ã€How to use it</h3><ol><li><p>åƒåœ¨quarter II æˆ–è€…å…¶ä»–IDEä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨ä»»æ„ä¸€æ¬¾ç¼–è¾‘å™¨ä¸Šç¼–å†™Verilogæºä»£ç </p><p><img src="vim_iverilog.jpg" srcset="/img/loading.gif" alt="Verilog"></p></li><li><p>ç„¶ååœ¨ç¼–è¾‘å™¨é‡Œä¸€é”®è¿è¡Œè„šæœ¬ï¼Œæˆ–è€…åœ¨ç»ˆç«¯è¿è¡Œã€‚</p><blockquote><p>ç»ˆç«¯ä¸»è¦è®°ä½å‡ ä¸ªå‘½ä»¤å³å¯: (<a href="">åé¢å¾ˆä¼šè¯¦ç»†è¯´æ˜</a>)</p></blockquote><pre><code class="hljs c">iverilog -o filename filename.v   	<span class="hljs-comment">// ç¼–è¯‘æºæ–‡ä»¶ ã€-o æŒ‡å®šç”Ÿæˆçš„æ–‡ä»¶åç§°ã€‘</span>
vvp filename						<span class="hljs-comment">// ä»¿çœŸtestbench</span>
gtkwave filename.vcd				<span class="hljs-comment">// æŸ¥çœ‹ä»¿çœŸçš„æ³¢å½¢å›¾</span></code></pre></li></ol><h3 id="4ã€Instance-case"><a href="#4ã€Instance-case" class="headerlink" title="4ã€Instance case"></a>4ã€Instance case</h3><ol><li><blockquote><p>ç¼–å†™æºä»£ç (æœ€å¥½ç”¨æœ‰é«˜äº®çš„ç¼–è¾‘å™¨notepadã€sublimeã€VScodeã€VIM)</p></blockquote><pre><code class="hljs verilog"><span class="hljs-comment">// æ¨¡8è®¡æ•°å™¨ã€‚å­˜å‚¨ä¸ºcount8.v</span>
<span class="hljs-keyword">module</span> count8(clk, rst_n, cnt);
    <span class="hljs-keyword">input</span> clk, rst_n;
    <span class="hljs-keyword">output</span>[<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] cnt;
    <span class="hljs-keyword">reg</span>[<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] cnt;
    <span class="hljs-keyword">always</span> @ (<span class="hljs-keyword">posedge</span> clk <span class="hljs-keyword">or</span> <span class="hljs-keyword">negedge</span> rst_n)
    <span class="hljs-keyword">begin</span>
	<span class="hljs-keyword">if</span>(!rst_n)
	    cnt &lt;= <span class="hljs-number">4'b0000</span>;
	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(cnt[<span class="hljs-number">3</span>])
	    cnt &lt;=<span class="hljs-number">4'b0000</span>;
	<span class="hljs-keyword">else</span>
	    cnt &lt;= cnt + <span class="hljs-number">1'b1</span>;
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">endmodule</span></code></pre></li><li><blockquote><p>ç¼–è¯‘ä¸€ä¸‹</p></blockquote><pre><code class="hljs bash">iverilog  -o counter8 counter8.v</code></pre><p>â€‹ <img src="synthesize.png" srcset="/img/loading.gif" alt="image-20200403162524369"></p><p>â€‹ å¯ä»¥çœ‹åˆ°å·²ç»ç¼–è¯‘æˆåŠŸï¼Œç”Ÿæˆäº†<code>count8</code>æ–‡ä»¶ã€‚å³ä¸Šè¿°å‘½ä»¤-oåé¢æŒ‡å®šçš„ã€‚</p></li><li><blockquote><p>å¦‚æœæƒ³æŸ¥çœ‹ç”µè·¯å›¾ã€‚å¥½åƒåªèƒ½åœ¨quarter IIé‡Œé¢viewerä¸€ä¸‹äº†ã€‚è¿˜æ²¡å‘ç°ä¸“é—¨ä»netlistç”Ÿæˆç”µè·¯å›¾çš„ç¨‹åºã€‚</p></blockquote><p><img src="RTLviewer.png" srcset="/img/loading.gif" alt="image-20200403163232250"></p></li><li><blockquote><p>ç¼–å†™æµ‹è¯•ä»£ç </p></blockquote><pre><code class="hljs verilog"><span class="hljs-meta">`<span class="hljs-meta-keyword">include</span> "count8.v"</span>
<span class="hljs-meta">`<span class="hljs-meta-keyword">timescale</span> 1ns/1ns</span>
<span class="hljs-keyword">module</span> count8_tb;
    <span class="hljs-comment">// æ•°æ®ç»“æ„å£°æ˜</span>
    <span class="hljs-keyword">reg</span> clk;
    <span class="hljs-keyword">reg</span> rst_n;
    <span class="hljs-keyword">wire</span>[<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] cnt;

    <span class="hljs-comment">// å®ä¾‹åŒ–å¾…æµ‹è¯•æ¨¡å—</span>
    count8 U1(clk, rst_n, cnt);

    <span class="hljs-comment">// æµ‹è¯•æ¿€åŠ±ä¿¡å·</span>
    <span class="hljs-keyword">always</span>
	#<span class="hljs-number">50</span> clk = ~ clk;
    <span class="hljs-keyword">initial</span>
    <span class="hljs-keyword">begin</span>
	clk = <span class="hljs-number">1'b0</span>;
	rst_n = <span class="hljs-number">1'b0</span>;
	#<span class="hljs-number">20</span> rst_n = <span class="hljs-number">1'b0</span>;
	#<span class="hljs-number">200</span> rst_n = <span class="hljs-number">1'b1</span>;
    <span class="hljs-keyword">end</span>

    <span class="hljs-comment">// è¾“å‡ºå“åº”</span>
    <span class="hljs-keyword">initial</span>
    <span class="hljs-keyword">begin</span>
	<span class="hljs-keyword">wait</span>(cnt == <span class="hljs-number">4'b1000</span>)
	<span class="hljs-built_in">$display</span>(<span class="hljs-built_in">$time</span>,,,<span class="hljs-string">"cnt = %b"</span>, cnt);
    <span class="hljs-built_in">$dumpfile</span>(<span class="hljs-string">"count8_tb.vcd"</span>); 	<span class="hljs-comment">// å¾ˆå…³é”®ï¼ŒæŠŠä»¿çœŸçš„æ•°æ®å­˜å‚¨åˆ°æ–‡ä»¶,å¾…ä¼šæ³¢å½¢å›¾è¦ç”¨</span>
    <span class="hljs-built_in">$dumpvars</span>(<span class="hljs-number">0</span>, count8_tb); 		<span class="hljs-comment">// è®¾ç½®è¦è§‚å¯Ÿçš„å˜é‡</span>
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">endmodule</span></code></pre></li><li><blockquote><p>ç¼–è¯‘ï¼Œä»¿çœŸï¼Œç”Ÿæˆæ³¢å½¢å›¾</p></blockquote><pre><code class="hljs bash">iverilog -o count8_tb count8_tb.v &amp; vvp count8_tb &amp; gtkwave count8_tb.vcd</code></pre><p><img src="simulate.png" srcset="/img/loading.gif" alt="image-20200403170800780"></p><p>æ³¨æ„:</p><ol><li><p>ç”±äºä»¿çœŸç¨‹åºæ²¡æœ‰è®¾å®šåœæ­¢æ—¶é—´ã€‚ç¨‹åºä¼šä¸€ç›´æ‰§è¡Œã€‚</p></li><li><p>å¦‚æœä½ æƒ³è‡ªåŠ¨åœæ­¢ï¼ˆå¯ä»¥åœ¨testbenchä¸ŠåŠ ä¸Š<code># 500$stop</code>,é‚£ä¹ˆç¨‹åºä»¿çœŸ500ä¸ªtickå°±åœæ­¢)</p></li><li><p>å¦‚æœä½ æ²¡æœ‰åŠ åœæ­¢æŒ‡ä»¤ã€‚åªèƒ½æ‰‹åŠ¨åœæ­¢<code>ctrl+c</code>ç„¶åä½ å¯ä»¥æ‰“å°å½“å‰ä»¿çœŸçš„æ—¶é—´ã€‚å¦‚æœä¸å¤Ÿ</p><p>ä½ å¯ä»¥ç»§ç»­ä»¿çœŸã€‚å¦‚æœå¯ä»¥äº†å°±<code>finish</code></p></li><li><p>æœ€åç”¨<code>gtkwave</code> æŸ¥çœ‹ä½ åˆšåˆšä»¿çœŸç”Ÿæˆçš„<code>count8_tb.vcd</code>æ–‡ä»¶ã€‚</p></li></ol><p><img src="gtkwave.png" srcset="/img/loading.gif" alt="image-20200403171326769"></p></li><li><blockquote><p>å¦‚æœä½ å–œæ¬¢ç”¨<code>modelsim</code>ä¹Ÿå¯ä»¥ã€‚</p></blockquote><p>ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦å»ºä¸ªé¡¹ç›®ï¼ŒæŠŠä½ å†™çš„æºæ–‡ä»¶æ”¾è¿›å»ç¼–è¯‘ï¼Œä»¿çœŸä¸€ä¸‹å°±å¯ä»¥äº†ã€‚</p><p><a href="https://wenku.baidu.com/view/cd93f34ecf84b9d528ea7a95.html" rel="external nofollow noreferrer">å…·ä½“æ•™ç¨‹è§</a></p><p><img src="modelsim.png" srcset="/img/loading.gif" alt="image-20200403171721915"></p></li></ol><div id="refer-anchor"></div><h2 id="references"><a href="#references" class="headerlink" title="references"></a>references</h2><p>[1] <a href="http://iverilog.icarus.com/" rel="external nofollow noreferrer">iverilog</a></p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>Digital IC</category>
        <category>tools</category>
      </categories>
      <tags>
        <tag>toolkits</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®ç»“æ„â€”â€”æ ‘</title>
    <url>/posts/f796a091/</url>
    <content><![CDATA[<h2 id="1ã€æ ‘çš„ç›¸å…³æœ¯è¯­"><a href="#1ã€æ ‘çš„ç›¸å…³æœ¯è¯­" class="headerlink" title="1ã€æ ‘çš„ç›¸å…³æœ¯è¯­"></a>1ã€æ ‘çš„ç›¸å…³æœ¯è¯­</h2><ol><li><p><strong>åº¦</strong>ï¼šä¸€ä¸ªç»“ç‚¹çš„å­ç»“ç‚¹æ•°ç›®ã€‚æ ‘çš„åº¦æŒ‡åº¦æ•°æœ€å¤§çš„é‚£ä¸ªç»“ç‚¹çš„åº¦</p><script type="math/tex;mode=display">TD = max_{i=1...n}D(i)\quad D(i)è¡¨ç¤ºç¬¬iä¸ªç»“ç‚¹çš„åº¦</script></li><li><p><strong>å¶ç»“ç‚¹ï¼Œåˆ†æ”¯ç»“ç‚¹</strong></p><p>åº¦ä¸º0çš„ç»“ç‚¹â€”â€”<code>å¶ç»“ç‚¹</code>ï¼›åº¦å¤§äº0çš„ç»“ç‚¹â€”â€”<code>åˆ†æ”¯ç»“ç‚¹</code></p></li><li><p><strong>ç»“ç‚¹çš„å±‚æ•°</strong></p><p>(1) root(T)â€”â€”å±‚æ•°ä¸º0</p><p>(2)å…¶ä½™ç»“ç‚¹å±‚æ•°ä¸ºå‰é©±ç»“ç‚¹å±‚æ•° + 1</p></li><li><p><strong>è·¯å¾„</strong></p><script type="math/tex;mode=display">V_mâ€”â€”>V_{m+1}â€”â€”>...â€”â€”>V_{m+k} \quad1 <= k <= Tæœ€å¤§å±‚æ•°</script><p>åŒæ—¶æ»¡è¶³$V_{i+1} $æ˜¯$V_i$ ï¼ˆm &lt;=i&lt;=m+k-1)çš„å­ç»“ç‚¹,åˆ™ç§°ç»“ç‚¹åºåˆ—ä¸º$V_m$ åˆ° $V_{m+1}$ çš„è·¯å¾„ã€‚è¯¥è·¯å¾„ç»å†çš„è¾¹æ•°<code>k</code>ç§°ä¸º<code>è·¯å¾„é•¿åº¦</code></p></li><li><p><strong>å­å­™ç»“ç‚¹ã€ç¥–å…ˆç»“ç‚¹</strong></p><p>ä¸€æ£µæ ‘ä¸­è‹¥å­˜åœ¨ç»“ç‚¹$V_m$ åˆ°$V_n$çš„è·¯å¾„ï¼Œåˆ™ç§°ä¸º$V_n$æ˜¯$V_m$çš„<code>å­å­™ç»“ç‚¹</code>,ä¸º$V_n$æ˜¯$V_m$çš„<code>ç¥–å…ˆç»“ç‚¹</code>ã€‚</p></li><li><p><strong>æ ‘çš„é«˜åº¦</strong></p><p>æ ‘ä¸­ç»“ç‚¹çš„æœ€å¤§å±‚æ•°ã€‚</p></li></ol><h2 id="2ã€äºŒå‰æ ‘å¼•ç†"><a href="#2ã€äºŒå‰æ ‘å¼•ç†" class="headerlink" title="2ã€äºŒå‰æ ‘å¼•ç†"></a>2ã€äºŒå‰æ ‘å¼•ç†</h2><ol><li><p><strong>è®¾Tä¸ºnä¸ªç»“ç‚¹æ„æˆçš„äºŒå‰æ ‘ï¼Œå…¶ä¸­å¶å­èŠ‚ç‚¹ä¸ªæ•°ä¸ºn~0~ï¼Œåº¦ä¸º2çš„ç»“ç‚¹ä¸ªæ•°ä¸ºn~2~,åˆ™æœ‰:</strong></p><script type="math/tex;mode=display">n_0 = n_2 +1</script><p>è¯æ˜ï¼š</p><script type="math/tex;mode=display">è®¾æ€»çš„è¾¹æ•°ä¸ºe,åº¦ä¸º1çš„ç»“ç‚¹æ ‘n_1\\</script><script type="math/tex;mode=display">åˆ™:n = n_0 + n_1 + n_2\\</script><script type="math/tex;mode=display">e = n - 1(é™¤äº†æ ¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹æ²¡ç®—åœ¨å†…)\\</script><script type="math/tex;mode=display">e = 2n_2 + n_1\\</script><script type="math/tex;mode=display">åˆ™æœ‰ï¼š2n_2 + n_1 = n_0 + n_1 + n_2 - 1\\</script></li></ol><ol><li><p><code>æ»¡äºŒå‰æ ‘</code>å’Œ<code>å®Œå…¨äºŒå‰æ ‘</code></p><p>æ»¡äºŒå‰æ ‘ï¼šæ¯ä¸€å±‚éƒ½å……æ»¡äº†ç»“ç‚¹ï¼Œä¸€é¢—éç©ºé«˜åº¦ä¸ºkçš„æ»¡äºŒå‰æ ‘ï¼Œæœ‰$2^{k+1}+1$ä¸ªç»“ç‚¹ã€‚</p><p>å®Œå…¨äºŒå‰æ ‘ï¼šåªæœ‰æœ€åä¸€å±‚ä¸æ»¡ï¼Œå…¶ä½™å±‚å…¨æ˜¯æ»¡çš„ã€‚ä¸”æœ€åä¸€å±‚ä»æœ€å·¦è¾¹å¼€å§‹å¡«å……ã€‚</p><p><img src="http://image.beenli.cn/img/20200410/HISXRvqtBFGy.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p></li><li><p><strong>è‹¥å°†nä¸ªç»“ç‚¹çš„å®Œå…¨äºŒå‰æ ‘æŒ‰<code>å±‚æ¬¡é¡ºåº</code>ä»1å¼€å§‹ç¼–å·ï¼Œåˆ™å¯¹ç¼–å·ä¸ºi(1 &lt;= i &lt;= n)çš„ç»“ç‚¹</strong>æœ‰ï¼š</p><ol><li>è‹¥ i $\neq$ = 1,åˆ™ç¼–å·ä¸ºiçš„ç»“ç‚¹çˆ¶èŠ‚ç‚¹ç¼–å·ä¸º$\left \lfloor i/2 \right \rfloor$</li><li>è‹¥ 2i $\leq$ n, åˆ™ç¼–å·ä¸ºiçš„ç»“ç‚¹å·¦å­©å­ç¼–å·ä¸º2i,å¦åˆ™æ— å·¦å­©å­</li><li>è‹¥ 2i+1 $\leq$ n, åˆ™ç¼–å·ä¸ºiçš„å³å­©å­ç¼–å·ä¸º2i + 1,å¦è€…æ— æœ‰å­©å­ã€‚</li><li><code>æ¨è®º</code>ï¼šä¸€æ£µå…·æœ‰nä¸ªç»“ç‚¹çš„å®Œå…¨äºŒå‰æ ‘ï¼Œåˆ†æ”¯ç»“ç‚¹ä¸ªæ•°ä¸º$\left \lfloor n/2 \right \rfloor$ã€‚(æœ€åä¸€ä¸ªç»“ç‚¹nçš„çˆ¶èŠ‚ç‚¹ä¸º$\left \lfloor n/2 \right \rfloor$)</li></ol><p><img src="http://image.beenli.cn/img/20200410/5LKoRUbNYOH0.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p></li><li><p>å…·æœ‰nä¸ªç»“ç‚¹çš„å®Œå…¨äºŒå‰æ ‘é«˜åº¦ä¸º$\left \lfloor log_2n \right \rfloor$</p><p>è¯æ˜ï¼š</p><script type="math/tex;mode=display">è®¾é«˜åº¦ä¸ºk</script></li></ol><script type="math/tex;mode=display">äºŒå‰æ ‘ç»“ç‚¹ä¸ªæ•°ä»‹äºé«˜åº¦ä¸ºk-1å’Œé«˜åº¦ä¸ºkçš„æ»¡äºŒå‰æ ‘ç»“ç‚¹ä¹‹é—´ã€‚\\</script><script type="math/tex;mode=display">2^k-1< n \leq 2^{k+1}-1\\</script><script type="math/tex;mode=display">æ‰€æœ‰log_2n-1<k\leq log_2n\\</script><script type="math/tex;mode=display">kå–æ•´æ•°ï¼šk =\left \lfloor log_2n \right \rfloor</script><h2 id="3ã€äºŒå‰æ ‘é€’å½’éå†"><a href="#3ã€äºŒå‰æ ‘é€’å½’éå†" class="headerlink" title="3ã€äºŒå‰æ ‘é€’å½’éå†"></a>3ã€äºŒå‰æ ‘é€’å½’éå†</h2><ol><li><p>å…ˆæ ¹éå†(Preorder Traversal)</p><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">Preorder</span><span class="hljs-params">(t)</span></span>
IF t = NULL Then return.
<span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(data(t)</span></span>).				<span class="hljs-comment">// ç›´æ¥æ‰“å°å‡ºæ ¹ï¼Œç„¶åå¾€å·¦æ‰¾</span>
<span class="hljs-function"><span class="hljs-title">Preorder</span><span class="hljs-params">(left(t)</span></span>)
<span class="hljs-function"><span class="hljs-title">Preorder</span><span class="hljs-params">(right(t)</span></span>)</code></pre></li><li><p>ä¸­æ ¹éå†(Inorder Traversal)</p><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">Inorder</span><span class="hljs-params">( t )</span></span>
IF t = NULL Then return.
<span class="hljs-function"><span class="hljs-title">INorder</span><span class="hljs-params">(left(t)</span></span>)
<span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(data(t)</span></span>)
<span class="hljs-function"><span class="hljs-title">INorder</span><span class="hljs-params">(right(t)</span></span>)</code></pre></li><li><p>åæ ¹éå†(Postorder Traversal)</p><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">Postorder</span><span class="hljs-params">( t )</span></span>
IF t = NULL Then return.
<span class="hljs-function"><span class="hljs-title">Postorder</span><span class="hljs-params">(left(t)</span></span>)
<span class="hljs-function"><span class="hljs-title">Postorder</span><span class="hljs-params">(right(t)</span></span>)
<span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(data(t)</span></span>)</code></pre></li></ol><h2 id="4ã€äºŒå‰æ ‘éé€’å½’éå†"><a href="#4ã€äºŒå‰æ ‘éé€’å½’éå†" class="headerlink" title="4ã€äºŒå‰æ ‘éé€’å½’éå†"></a>4ã€äºŒå‰æ ‘éé€’å½’éå†</h2><h3 id="1ã€å…ˆæ ¹éå†"><a href="#1ã€å…ˆæ ¹éå†" class="headerlink" title="1ã€å…ˆæ ¹éå†"></a>1ã€å…ˆæ ¹éå†</h3><p>ç­–ç•¥ï¼š</p><ol><li>ä¸€ç›´å¾€å·¦èµ°ï¼Œåªè¦ä¸ä¸ºç©ºå°±è®¿é—®ï¼Œè®¿é—®å®Œè¿›æ ˆã€‚å½“ä¸ºç©ºæ—¶å¼¹æ ˆï¼Œè®¿é—®å³å­æ ‘ã€‚</li><li>è¿›æ ˆçš„æ˜¯è®¿é—®ç»“ç‚¹çš„å³å­æ ‘ã€‚</li></ol><pre><code class="hljs c">create(S);p = root(t)		<span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªè¾…åŠ©æ ˆ,è¾…åŠ©æŒ‡é’ˆpæŒ‡å‘æ ¹tã€‚</span>
<span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>) 				<span class="hljs-comment">// ä¸€ç›´å¾ªç¯ï¼Œç›´åˆ°æ ˆä¸ºç©º</span>
{
	<span class="hljs-keyword">while</span>(p)				<span class="hljs-comment">// å½“pä¸ä¸ºç©ºï¼Œè®¿é—®å®ƒï¼ŒæŠŠå®ƒå‹æ ˆæˆ–è€…å®ƒå³å­æ ‘å‹æ ˆ</span>
	{
		<span class="hljs-built_in">process</span>(p.data);
		S.push(p) <span class="hljs-keyword">or</span> S.push(p.right);
		p = p.left;
	}
	<span class="hljs-keyword">if</span>(S.empty()) <span class="hljs-keyword">return</span>;	<span class="hljs-comment">// å¾ªç¯å‡ºå£ã€‚</span>
	p = S.pop();			<span class="hljs-comment">// å‡ºæ ˆ</span>
	p = p.right;			<span class="hljs-comment">// å¦‚æœæ˜¯å‹çš„å³å­æ ‘ï¼Œè¿™ä¸€æ­¥çœç•¥</span>
}</code></pre><h3 id="2ã€ä¸­æ ¹éå†"><a href="#2ã€ä¸­æ ¹éå†" class="headerlink" title="2ã€ä¸­æ ¹éå†"></a>2ã€ä¸­æ ¹éå†</h3><p>ç­–ç•¥ï¼šä¸€ç›´å¾€èµ°ï¼Œä¸­é€”ç»“ç‚¹å…¨éƒ¨å‹å…¥æ ˆã€‚ç›´åˆ°å·¦å­æ ‘ä¸ºç©ºï¼Œå‡ºæ ˆè®¿é—®ï¼ŒæŠŠå³å­æ ‘å‹æ ˆã€‚ç„¶åç»§ç»­ã€‚</p><pre><code class="hljs c">creat(S);p=root(T);
<span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)
{
 <span class="hljs-keyword">while</span>(p)
    {
        S.push(p);
        p = p.left;
    }
    <span class="hljs-keyword">if</span>(S.empty()) <span class="hljs-keyword">return</span>;
    p = S.pop();
    <span class="hljs-built_in">process</span>(p);				<span class="hljs-comment">// å¤„ç†å‡ºæ ˆçš„æœ€å·¦è¾¹ç»“ç‚¹</span>
    p = p.right;			<span class="hljs-comment">// ç»­ä¸Šå¼€å¤´ï¼Œç°åœ¨p.rightç›¸å½“äºroot</span>
}</code></pre><h3 id="3ã€äºŒå‰æ ‘çš„å½¢æ€"><a href="#3ã€äºŒå‰æ ‘çš„å½¢æ€" class="headerlink" title="3ã€äºŒå‰æ ‘çš„å½¢æ€"></a>3ã€äºŒå‰æ ‘çš„å½¢æ€</h3><p>ä¸­æ ¹å’Œå…ˆæ ¹ç®—æ³•è¿›å‡ºæ ˆçš„é¡ºåºæ˜¯ä¸€æ ·çš„ã€‚<code>è¿›æ ˆåºåˆ—</code>ï¼š<code>å…ˆæ ¹åºåˆ—</code>;<code>å‡ºæ ˆåºåˆ—</code>:<code>ä¸­æ ¹åºåˆ—</code></p><p>å‡è®¾å…ˆæ ¹åºåˆ—ä¸º1â€¦næ—¶ï¼Œæœ‰å¤šå°‘ç§ä¸­è·Ÿåºåˆ—å°±æœ‰å¤šå°‘ç§äºŒå‰æ ‘å½¢æ€ã€‚(ä¸­æ ¹+å…ˆæ ¹å”¯ä¸€ç¡®å®šä¸€æ£µæ ‘)</p><p>å³nä¸ªæ•°æœ‰å¤šå°‘ç§å‡ºæ ˆæ–¹å¼:</p><script type="math/tex;mode=display">Catalan(n) = \frac{1}{n+1}C_{2n}^{n}</script><h3 id="4ã€åæ ¹éå†"><a href="#4ã€åæ ¹éå†" class="headerlink" title="4ã€åæ ¹éå†"></a>4ã€åæ ¹éå†</h3><p>ç­–ç•¥ï¼š</p><ol><li><p>ä¸€ç›´å¾€å·¦èµ°ï¼Œå‹æ ˆã€‚å¦‚æœé‡åˆ°å³å­æ ‘ä¸ºç©ºæˆ–è€…å³å­æ ‘å·²ç»éå†è¿‡äº†å°±å‡ºæ ˆè®¿é—®å®ƒã€‚å¦è€…å°±è®¿é—®å³å­æ ‘ã€‚å¼€å§‹æ–°çš„éå†ã€‚</p><pre><code class="hljs gauss"><span class="hljs-keyword">Create</span>(S); p = <span class="hljs-built_in">root</span>(T);pre=<span class="hljs-built_in">NULL</span>		<span class="hljs-comment">//preå­˜å‚¨pä¹‹å‰è®¿é—®è¿‡çš„ç»“ç‚¹ã€‚</span>
  <span class="hljs-keyword">while</span>(true)
  {
      <span class="hljs-keyword">while</span>(p)
      {
          S.push(p);
          p = p.left;
      }
      <span class="hljs-keyword">if</span>(S.empty) <span class="hljs-keyword">return</span>;
      p = <span class="hljs-built_in">peak</span>(S);
      <span class="hljs-keyword">if</span>(p.right == <span class="hljs-built_in">NULL</span> or p.right == pre)
      {
          S.pop();
          <span class="hljs-built_in">process</span>(p.data);
          pre = p;					<span class="hljs-comment">//å§‹ç»ˆè®°å½•ä¸Šä¸€æ¬¡è®¿é—®è¿‡çš„ç»“ç‚¹</span>
          p = <span class="hljs-built_in">NULL</span>;					<span class="hljs-comment">//ä¸ºäº†ä¸‹ä¸€ä¸ªå¾ªç¯ä¸­å»çˆ¶èŠ‚ç‚¹çš„å³ç»“ç‚¹ã€‚</span>
      }
      <span class="hljs-keyword">else</span> p = p.right;
  }</code></pre><p><img src="http://image.beenli.cn/img/20200410/3NxPuxxmqoTP.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p></li><li><p>å…è®¸å¤šæ¬¡è¿›å‡ºæ ˆã€‚æ ˆå…ƒç´ ä¸ºäºŒå…ƒç»„ï¼ˆç»“ç‚¹ï¼Œæ ‡å·i)</p><p>i = 1 ï¼šæ²¡æœ‰è®¿é—®ç»“ç‚¹çš„ä»»ä½•å­æ ‘ã€‚å‡†å¤‡éå†å…¶å·¦å­æ ‘</p><p>i = 2 ï¼šéå†å®Œå·¦å­æ ‘ï¼Œå‡†å¤‡éå†å³å­æ ‘</p><p>i = 3ï¼šéå†å®Œå³å­æ ‘</p><p>åˆå§‹åŒ–ï¼šï¼ˆroot(T), 1)å‹å…¥æ ˆã€‚å¼¹æ ˆï¼Œåˆ¤æ–­å‡ºæ ˆå…ƒç´ æ ‡å·ï¼š</p><p>i = 1, åˆ™å°†(p, 2) å‹æ ˆï¼Œå‡†å¤‡éå†å·¦å­æ ‘ã€‚æŠŠï¼ˆleft(p), 1)å‹æ ˆ</p><p>i = 2, åˆ™å°†(p, 3)å‹æ ˆï¼Œå‡†å¤‡éå†å³å­æ ‘ï¼Œå³æŠŠï¼ˆright(p),1)å‹æ ˆ</p><p>i = 3, è®¿é—®ç»“ç‚¹p</p><pre><code class="hljs reasonml">create(S);<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">S</span>.</span></span>push((root(T),<span class="hljs-number">1</span>));
<span class="hljs-keyword">while</span>(!<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">S</span>.</span></span>isempty<span class="hljs-literal">()</span>)
{
	(p,i) = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">S</span>.</span></span>pop<span class="hljs-literal">()</span>;
    <span class="hljs-keyword">if</span>(p)					<span class="hljs-comment">// é˜²æ­¢ç©ºæŒ‡é’ˆ</span>
    {
        <span class="hljs-keyword">if</span>(i<span class="hljs-operator"> == </span><span class="hljs-number">1</span>)
        {
            <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">S</span>.</span></span>push((p,<span class="hljs-number">2</span>));
            <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">S</span>.</span></span>push((p.left, <span class="hljs-number">1</span>));
        }
        <span class="hljs-keyword">if</span>(i<span class="hljs-operator"> == </span><span class="hljs-number">2</span>)
        {
            <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">S</span>.</span></span>push((p,<span class="hljs-number">3</span>));
            <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">S</span>.</span></span>push((p.right,<span class="hljs-number">1</span>));
        }
        <span class="hljs-keyword">else</span>
        {
            process(p.data)
        }
    }
}</code></pre></li></ol><h3 id="5ã€å±‚æ¬¡éå†"><a href="#5ã€å±‚æ¬¡éå†" class="headerlink" title="5ã€å±‚æ¬¡éå†"></a>5ã€å±‚æ¬¡éå†</h3><pre><code class="hljs c">create(Q);
<span class="hljs-keyword">if</span>(root(T)) Q.enqueue(T);			<span class="hljs-comment">//å…ˆå°†å¤´ç»“ç‚¹å…¥é˜Ÿ</span>
<span class="hljs-keyword">while</span>(!Q.empty)
{
    p = Q.dequeue();
    <span class="hljs-built_in">process</span>(p.data);				<span class="hljs-comment">//å–å¤´ç»“ç‚¹è®¿é—®</span>
    <span class="hljs-keyword">if</span>(p.left) Q.enqueue(p.left);	 <span class="hljs-comment">//å¦‚æœå·¦èŠ‚ç‚¹ä¸ç©ºï¼ŒåŠ å…¥(å…ˆè¿›å…ˆå‡º)</span>
    <span class="hljs-keyword">if</span>(p.right) Q.enqueue(p.right);
}</code></pre><blockquote><p>ç”±ä¸­æ ¹éå† + ï¼ˆå±‚æ¬¡/å…ˆæ ¹/åæ ¹ï¼‰å”¯ä¸€ç¡®å®šä¸€æ£µæ ‘</p></blockquote><h2 id="5ã€äºŒå‰æ ‘ç›¸å…³åº”ç”¨"><a href="#5ã€äºŒå‰æ ‘ç›¸å…³åº”ç”¨" class="headerlink" title="5ã€äºŒå‰æ ‘ç›¸å…³åº”ç”¨"></a>5ã€äºŒå‰æ ‘ç›¸å…³åº”ç”¨</h2><h3 id="1ã€æœç´¢ç»™å®šç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹"><a href="#1ã€æœç´¢ç»™å®šç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹" class="headerlink" title="1ã€æœç´¢ç»™å®šç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹"></a>1ã€æœç´¢ç»™å®šç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹</h3><pre><code class="hljs c">Father(t,p.q)

<span class="hljs-keyword">if</span>(p == <span class="hljs-literal">NULL</span> <span class="hljs-keyword">or</span> p==t) <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;
<span class="hljs-keyword">if</span>(t.left ==p <span class="hljs-keyword">or</span> t.right == p) <span class="hljs-keyword">return</span> t;
<span class="hljs-comment">// return Father(t.left, p) || Fathre(t.right, p)</span>
q = Father(t.left,p);
<span class="hljs-keyword">if</span>(q) <span class="hljs-keyword">return</span> q;
<span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> Father(t.right, p)</code></pre><h3 id="2ã€é‡Šæ”¾äºŒå‰æ ‘"><a href="#2ã€é‡Šæ”¾äºŒå‰æ ‘" class="headerlink" title="2ã€é‡Šæ”¾äºŒå‰æ ‘"></a>2ã€é‡Šæ”¾äºŒå‰æ ‘</h3><pre><code class="hljs lisp">Del(<span class="hljs-name">p</span>)

if(<span class="hljs-name">p</span> == NULL) return<span class="hljs-comment">;</span>
Del(<span class="hljs-name">p</span>.left)<span class="hljs-comment">;</span>
Del(<span class="hljs-name">p</span>.right)<span class="hljs-comment">;</span>
free(<span class="hljs-name">p</span>)<span class="hljs-comment">;			// åç»­éå†åˆ é™¤ï¼Œä»åå¾€å‰åˆ ã€‚</span></code></pre><h3 id="3ã€åˆ é™¤ä¸€é¢—å°æ ‘"><a href="#3ã€åˆ é™¤ä¸€é¢—å°æ ‘" class="headerlink" title="3ã€åˆ é™¤ä¸€é¢—å°æ ‘"></a>3ã€åˆ é™¤ä¸€é¢—å°æ ‘</h3><blockquote><p>åˆ é™¤ç»™å®šç»“ç‚¹ä»¥åŠå…¶å·¦å³å­æ ‘<br></p><pre><code class="hljs c">DILR(t,p)

<span class="hljs-keyword">if</span>(!p) <span class="hljs-keyword">return</span>;		<span class="hljs-comment">// ä¸ºç©º</span>
<span class="hljs-keyword">if</span>(p == t)
{
	Del(p);
    t = <span class="hljs-literal">NULL</span>		<span class="hljs-comment">//åˆ é™¤æ•´æ£µæ ‘ tè¿˜æœ‰å®šä¹‰ï¼Œå¯ä»¥å†èµ‹å€¼ã€‚</span>
}
q = Father(t,p);
<span class="hljs-keyword">if</span>(q.left == p) q.left = <span class="hljs-literal">NULL</span>;		<span class="hljs-comment">//ä¿®æ”¹åŸæ¥æŒ‡å‘pçš„æŒ‡é’ˆä¸ºç©º</span>
<span class="hljs-keyword">if</span>(q.right == p) q.right == <span class="hljs-literal">NULL</span>;
Del(p);</code></pre><p></p></blockquote><h3 id="4ã€åˆ›å»ºäºŒå‰æ ‘"><a href="#4ã€åˆ›å»ºäºŒå‰æ ‘" class="headerlink" title="4ã€åˆ›å»ºäºŒå‰æ ‘"></a>4ã€åˆ›å»ºäºŒå‰æ ‘</h3><p>ç”±äºå…ˆæ ¹åºåˆ—ä¸èƒ½ä½“ç°å·¦å³å­æ ‘ä¸ºç©ºçš„æƒ…å†µï¼Œæ‰€æœ‰ç”¨<code>#</code>è¡¨ç¤ºç©ºå­ç»“ç‚¹ã€‚åˆ™å¯ä»¥å”¯ä¸€è¡¨ç¤ºä¸€è¯¾æ ‘ã€‚</p><p><img src="http://image.beenli.cn/img/20200410/XEtAcvEkUge8.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><pre><code class="hljs c">é€’å½’ç®—æ³•ï¼ˆCreateBinTree)(ç®€ç§°ä¸ºCBT)
è¾“å…¥ï¼šåŒ…å«ç©ºæŒ‡é’ˆçš„å…ˆæ ¹åºåˆ—
è¾“å‡ºï¼šæ ¹æŒ‡é’ˆt

ç®—æ³•CBT(.t)
p = getchar();
<span class="hljs-keyword">if</span>(p == <span class="hljs-string">"\n"</span> || p == <span class="hljs-string">"#"</span>) 
{
    t = <span class="hljs-literal">NULL</span>;			<span class="hljs-comment">// æŒ‡é’ˆç½®ä¸ºç©ºã€‚å³#ä»£è¡¨ç©ºæŒ‡é’ˆ</span>
 	<span class="hljs-keyword">return</span> t;			<span class="hljs-comment">// é€’å½’å‡ºå£</span>
}
t = create(p);
t-&gt;left = CBT(.t);
t-&gt;right = CBT(.t);		<span class="hljs-comment">// å»ºç«‹å·¦å³å­æ ‘</span>
<span class="hljs-keyword">return</span> t;


<span class="hljs-function">Treeptr <span class="hljs-title">createbigtree</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>
<span class="hljs-function"></span>{
	<span class="hljs-keyword">char</span> p;
	Treeptr t;
	p = getchar();
	<span class="hljs-keyword">if</span>(p == <span class="hljs-string">'\n'</span> || p == <span class="hljs-string">'#'</span>) 
	{
	    t = <span class="hljs-literal">NULL</span>;
	    <span class="hljs-keyword">return</span> t;
	}
	t = createtree(p);
	t-&gt;left = createbigtree();
	t-&gt;right = createbigtree();
	<span class="hljs-keyword">return</span> t;
}</code></pre><h3 id="5ã€å¤åˆ¶ä¸€é¢—äºŒå‰æ ‘"><a href="#5ã€å¤åˆ¶ä¸€é¢—äºŒå‰æ ‘" class="headerlink" title="5ã€å¤åˆ¶ä¸€é¢—äºŒå‰æ ‘"></a>5ã€å¤åˆ¶ä¸€é¢—äºŒå‰æ ‘</h3><pre><code class="hljs xl">Treeptr copybigtree(Treeptr sample)
{
    <span class="hljs-keyword">if</span>(sample) return NULL;						<span class="hljs-comment">// é€’å½’å‡ºå£</span>
    T<span class="hljs-function"><span class="hljs-title">reeptr</span> t = createtree(sample-&gt;</span><span class="hljs-keyword">data</span>);		<span class="hljs-comment">// å¤åˆ¶æ ¹</span>
    <span class="hljs-function"><span class="hljs-title">t</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">left</span> = copybigtree(sample-&gt;</span>left);		<span class="hljs-comment">// å¤åˆ¶å·¦å­æ ‘</span>
    <span class="hljs-function"><span class="hljs-title">t</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">right</span> = copybigtree(sample-&gt;</span>right);      <span class="hljs-comment">// å¤åˆ¶å³å­æ ‘</span>
    return t;
}</code></pre><h3 id="6ã€ååºéå†æ±‚ç»“ç‚¹ä¸ªæ•°"><a href="#6ã€ååºéå†æ±‚ç»“ç‚¹ä¸ªæ•°" class="headerlink" title="6ã€ååºéå†æ±‚ç»“ç‚¹ä¸ªæ•°"></a>6ã€ååºéå†æ±‚ç»“ç‚¹ä¸ªæ•°</h3><pre><code class="hljs c">ç®—æ³• Count(t.n)
<span class="hljs-keyword">if</span> t=^  then (n &lt;-- <span class="hljs-number">0.</span><span class="hljs-keyword">return</span>.)
Count(left(t).nl).
COunt(right(t).nr).
n &lt;-- nl+nr+<span class="hljs-number">1.</span>|
    
    
<span class="hljs-comment">/* åˆ©ç”¨åç»­éå†è®¡ç®—äºŒå‰æ ‘ç»“ç‚¹æ•° */</span>
<span class="hljs-keyword">int</span> Countnode(Treeptr p)
{
    <span class="hljs-keyword">if</span>(p == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> Countnode(p-&gt;left) + Countnode(p-&gt;right) + <span class="hljs-number">1</span>;
}</code></pre><h3 id="7ã€è®¡ç®—äºŒå‰æ ‘çš„é«˜åº¦"><a href="#7ã€è®¡ç®—äºŒå‰æ ‘çš„é«˜åº¦" class="headerlink" title="7ã€è®¡ç®—äºŒå‰æ ‘çš„é«˜åº¦"></a>7ã€è®¡ç®—äºŒå‰æ ‘çš„é«˜åº¦</h3><pre><code class="hljs c">ç®—æ³• depth(t.h)
<span class="hljs-keyword">if</span> t=^ then(d &lt;-- <span class="hljs-number">-1.</span> <span class="hljs-keyword">return</span>.)
<span class="hljs-keyword">else</span>
(
	depth(left(t).d1).
	depth(right(t).d2).
	<span class="hljs-keyword">if</span>(d1&gt;d2) then d &lt;-- d1+<span class="hljs-number">1.</span>
	<span class="hljs-keyword">else</span> d &lt;-- d2+<span class="hljs-number">1.</span>
)|

<span class="hljs-keyword">int</span> depthtree(Treeptr p)
{
    <span class="hljs-keyword">if</span>(!p) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    <span class="hljs-keyword">int</span> ld = depthtree(p-&gt;left);
    <span class="hljs-keyword">int</span> rd = depthtree(p-&gt;right);
    <span class="hljs-keyword">return</span> ld&gt;rd ? ld+<span class="hljs-number">1</span>:rd +<span class="hljs-number">1</span>;
}</code></pre><h3 id="8ã€äºŒå‰æ ‘é¦–å°¾ç»“ç‚¹"><a href="#8ã€äºŒå‰æ ‘é¦–å°¾ç»“ç‚¹" class="headerlink" title="8ã€äºŒå‰æ ‘é¦–å°¾ç»“ç‚¹"></a>8ã€äºŒå‰æ ‘é¦–å°¾ç»“ç‚¹</h3><blockquote><p>å…ˆ, ä¸­, åï¼ˆ<code>ä¸ä½¿ç”¨é€’å½’ï¼Œä¸é€‚åº”æ ˆ</code>ï¼‰<br><img src="http://image.beenli.cn/img/20200411/3HBrfI6nMVNC.jpg?imageslim" srcset="/img/loading.gif" alt="å…ˆæ ¹åºåˆ—ç¬¬ä¸€ä¸ªç»“ç‚¹"></p></blockquote><p><img src="http://image.beenli.cn/img/20200411/XypySE1MIhfi.jpg?imageslim" srcset="/img/loading.gif" alt="åæ ¹åºåˆ—ç¬¬ä¸€ä¸ªç»“ç‚¹"></p><pre><code class="hljs c"><span class="hljs-comment">/**************** ä¸­æ ¹åºåˆ— ********************/</span>
---------------------ç¬¬ä¸€ä¸ªç»“ç‚¹(æœ€å·¦è¾¹çš„ç»“ç‚¹)
<span class="hljs-keyword">if</span>(t==<span class="hljs-literal">NULL</span>) then <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;
p = t;
<span class="hljs-keyword">while</span>(p-&gt;left) p = p-&gt;left;
<span class="hljs-keyword">return</span> p;

----------------------æœ€åä¸€ä¸ªç»“ç‚¹ï¼ˆæœ€å³è¾¹çš„ç»“ç‚¹ï¼‰
<span class="hljs-keyword">if</span>(t==<span class="hljs-literal">NULL</span>) then <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;
p = t;
<span class="hljs-keyword">while</span>(p-&gt;right) p = p-&gt;right;
<span class="hljs-keyword">return</span> p;
    
<span class="hljs-comment">/***************** å…ˆæ ¹åºåˆ— **********************/</span>
-----------------------ç¬¬ä¸€ä¸ªç»“ç‚¹ï¼ˆå³æ ¹ï¼‰
<span class="hljs-keyword">return</span> t;

-----------------------æœ€åä¸€ä¸ªç»“ç‚¹(å¾€å³æ‰¾ç¬¬ä¸€ä¸ªå¶ç»“ç‚¹ï¼Œæ‰¾ä¸åˆ°å¾€å·¦å†é‡å¤ä¸Šä¸€æ­¥æ“ä½œ)
<span class="hljs-keyword">if</span>(t==<span class="hljs-literal">NULL</span>) then <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;
p = t;
<span class="hljs-keyword">while</span>(p)
{
    <span class="hljs-keyword">if</span>(p-&gt;right) p = p-&gt;right;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(p-&gt;left) p = p-&gt;left;	<span class="hljs-comment">//ä¸èƒ½å¾€å³å°±å¾€å·¦ä¸€æ­¥</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> p					<span class="hljs-comment">// æ— è·¯å¯èµ°å°±æ˜¯ä»–äº†</span>
}

<span class="hljs-comment">/******************* åæ ¹åºåˆ— ***********************/</span>
-------------------------ç¬¬ä¸€ä¸ªç»“ç‚¹(å¾€å·¦æ‰¾ç¬¬ä¸€ä¸ªå¶ç»“ç‚¹ï¼Œæ‰¾ä¸åˆ°å¾€å·¦ä¸€æ­¥å†é‡å¤ä¸Šä¸€æ­¥)
<span class="hljs-keyword">if</span>(t==<span class="hljs-literal">NULL</span>) then <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;
p = t;
<span class="hljs-keyword">while</span>(p)
{
    <span class="hljs-keyword">if</span>(p-&gt;left) p = p-&gt;left;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(p-&gt;right) p = p-&gt;right;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> p;
}</code></pre><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CS</category>
        <category>Data Structure</category>
      </categories>
      <tags>
        <tag>C</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®é€šè·¯(1)--Basic Datapath</title>
    <url>/posts/74018a17/</url>
    <content><![CDATA[<h1 id="1ã€Preface"><a href="#1ã€Preface" class="headerlink" title="1ã€Preface"></a>1ã€Preface</h1><blockquote><p>è®¡ç®—æœºæ€§èƒ½ï¼šâ‘ æŒ‡ä»¤æ•°ç›®(ç¼–è¯‘å™¨å’ŒæŒ‡ä»¤é›†ï¼‰ï¼Œâ‘¡æ—¶é’Ÿå‘¨æœŸé•¿åº¦(ç»„åˆç”µè·¯æœ€å¤§å»¶æ—¶)ï¼Œâ‘¢æ¯æ¡æŒ‡ä»¤æ‰€éœ€è¦çš„æ—¶é’Ÿå‘¨æœŸæ•°(å¤„ç†å™¨æ¶æ„ï¼ŒæŒ‡ä»¤ç±»åˆ«ï¼Œå¤šå‘å°„è¶…æ ‡é‡æµæ°´)</p></blockquote><p>æœ¬ç¯‡åªæ˜¯ä¸€ä¸ªåŸºæœ¬çš„<code>MIPS</code>å®ç°ã€‚</p><ul><li>å­˜å‚¨å™¨è®¿é—®æŒ‡ä»¤ï¼šå–å­—(<code>lw</code>) å’Œå­˜å­—(<code>sw</code>)</li><li>ç®—æ•°é€»è¾‘æŒ‡ä»¤ï¼šåŠ æ³•(<code>add</code>)ã€å‡æ³•(<code>sub</code>)ã€ä¸è¿ç®—(<code>and</code>)ã€æˆ–è¿ç®—(<code>or</code>)å’Œå°äºåˆ™è®¾ç½®(<code>slt</code>)</li><li>åˆ†æ”¯æŒ‡ä»¤ï¼šç›¸ç­‰åˆ™åˆ†æ”¯(<code>beq</code>)å’Œè·³è½¬(<code>j</code>)</li></ul><p><img src="https://image.beenli.cn/img/20200820/yKiuzyrIln7F.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ol><li><p><code>RæŒ‡ä»¤</code>å¯¹åº”ç®—æ•°é€»è¾‘æŒ‡ä»¤ã€‚(rs, rtå¯¹åº”ä¸¤ä¸ªæºæ“ä½œæ•°ï¼Œrdå¯¹åº”ç›®çš„å¯„å­˜å™¨)</p><pre><code class="hljs assembly">add $t1, $t2, $t3 # $t1=$t2+$t3
slt $to, $s0, $a1 # reg $t0 = 0 if $s0 &gt;= $a1</code></pre></li><li><p><code>IæŒ‡ä»¤</code>å¯¹åº”è®¿å­˜å’Œåˆ†æ”¯æŒ‡ä»¤ã€‚</p><pre><code class="hljs assembly">sw $t1, offset_value($t2) # æŠŠ$t1çš„å€¼å­˜åˆ°ä»¥$t2ä¸ºåŸºå€åŠ ä¸Š16ä½åœ°å€åç§»ä¸Šå»ã€‚
						  # rs=$t2, rt=$t1(ç›®æ ‡å¯„å­˜å™¨),[15:0]=offset
lw $t1, offset_value($t2) # æŠŠ$t2ä¸ºåŸºå€åŠ ä¸Š16ä½åœ°å€åç§»æ‰€åœ¨åœ°å€çš„å€¼å­˜åˆ°t1ã€‚
beq $t3, $zero, loop1	  # if($t3==$zero) go to loop1
						  # loop1æ˜¯å16ä½ã€‚rs=$t3,rt=$zero;</code></pre></li><li><p><code>JæŒ‡ä»¤</code>å¯¹åº”æ— æ¡ä»¶è·³è½¬</p><pre><code class="hljs assembly">j for2tst				  # jump tp for2tst</code></pre></li></ol><h1 id="2ã€An-Overview-of-the-Implementation"><a href="#2ã€An-Overview-of-the-Implementation" class="headerlink" title="2ã€An Overview of the Implementation"></a>2ã€An Overview of the Implementation</h1><ul><li>å®ç°æ¯æ¡æŒ‡ä»¤çš„å‰ä¸¤æ­¥æ˜¯ä¸€æ ·çš„<ol><li>ç¨‹åºè®¡æ•°å™¨(PC)æŒ‡å‘æŒ‡ä»¤æ‰€åœ¨çš„å­˜å‚¨å•å…ƒï¼Œå¹¶ä»ä¸­å–å‡ºæŒ‡ä»¤ã€‚(PCæ˜¯åœ°å€)</li><li>é€šè¿‡æŒ‡ä»¤å­—æ®µå†…å®¹ï¼Œé€‰æ‹©è¯»å–ä¸€ä¸ªæˆ–ä¸¤ä¸ªå¯„å­˜å™¨ã€‚å¯¹äºå–å­—æŒ‡ä»¤ï¼Œåªéœ€è¯»ä¸€ä¸ªå¯„å­˜å™¨å³<code>rs</code>,è€Œå…¶å®ƒå¤§å¤šæ•°æŒ‡ä»¤è¦æ±‚è¯»å–ä¸¤ä¸ªå¯„å­˜å™¨ï¼ˆ<code>rs</code>ï¼Œ <code>rt</code>)ã€‚</li></ol></li></ul><blockquote><p>å‰é¢ä¸¤æ­¥å®Œæˆåï¼Œä¸ºå®ŒæˆæŒ‡ä»¤è€Œè¿›è¡Œçš„åç»­æ­¥éª¤åˆ™å–å†³äºå…·ä½“çš„æŒ‡ä»¤ç±»å‹</p></blockquote><p><img src="https://image.beenli.cn/img/20200820/U2dhJ3SxBt84.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ol><li>æ‰€æœ‰æŒ‡ä»¤ä¸­é™¤äº†<code>jump</code>ï¼Œåœ¨è¯»å–å¯„å­˜å™¨åéƒ½è¦ä½¿ç”¨ALUã€‚<ul><li>è®¿å­˜æŒ‡ä»¤ï¼šaddress calculation</li><li>ç®—æœ¯é€»è¾‘æŒ‡ä»¤ï¼šoperation execution</li><li>åˆ†æ”¯æŒ‡ä»¤ï¼šcomparison</li></ul></li><li>ALUä¹‹ååˆå„ä¸ç›¸åŒ<ul><li>è®¿é—®Data Memory: <code>storeæŒ‡ä»¤</code>è¦å†™å…¥æ•°æ®åˆ°data memoryï¼›<code>loadæŒ‡ä»¤</code>è¦ä»memoryè¯»æ•°æ®</li><li>å†™å›registers: <code>RæŒ‡ä»¤</code>éœ€è¦æŠŠALUè®¡ç®—çš„ç»“æœ; <code>loadæŒ‡ä»¤</code>è¦data memoryè¯»å‡ºçš„æ•°æ®</li><li>æ”¹å˜PC: å¦‚æœåˆ†æ”¯æˆç«‹é‚£ä¹ˆæ”¹å˜PCå€¼ï¼Œå¦åˆ™è‡ªå¢4ã€‚</li></ul></li></ol><h1 id="3ã€Building-a-Datapath"><a href="#3ã€Building-a-Datapath" class="headerlink" title="3ã€Building a Datapath"></a>3ã€Building a Datapath</h1><blockquote><p>æ•°æ®é€šè·¯éƒ¨ä»¶ï¼šä¸€ä¸ªç”¨æ¥æ“ä½œæˆ–ä¿å­˜å¤„ç†å™¨ä¸­æ•°æ®çš„å•å…ƒã€‚åœ¨MPISå®ç°ä¸­ï¼Œæ•°æ®é€šè·¯éƒ¨ä»¶åŒ…æ‹¬<code>æŒ‡ä»¤å­˜å‚¨å™¨</code>ã€<code>æ•°æ®å­˜å‚¨å™¨</code>ã€<code>å¯„å­˜å™¨å †</code>ã€<code>ALU</code>ã€<code>åŠ æ³•å™¨</code>.</p></blockquote><h2 id="3-1ã€basic-components"><a href="#3-1ã€basic-components" class="headerlink" title="3.1ã€basic components"></a>3.1ã€basic components</h2><p><img src="https://image.beenli.cn/img/20200820/N8jUdro8qK22.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><center>å–æŒ‡ä»¤ï¼Œæ›´æ–°æŒ‡ä»¤</center><p><img src="https://image.beenli.cn/img/20200820/mNdvEm8uGB4b.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><center>æ ¹æ®å¯„å­˜å™¨å·å–æ“ä½œæ•°è¿›è¡ŒALUè¿ç®—</center><p><img src="https://image.beenli.cn/img/20200820/wXPwKwvLR8RN.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><center>å‘å†…å­˜è¯»æˆ–è€…å†™æ•°æ®</center><h2 id="3-2ã€combination-components"><a href="#3-2ã€combination-components" class="headerlink" title="3.2ã€combination components"></a>3.2ã€combination components</h2><p><img src="https://image.beenli.cn/img/20200820/96jAaA7ct7r0.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><p><img src="https://image.beenli.cn/img/20200820/0PQCr6vCD7Dm.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><center>branchæŒ‡ä»¤éœ€è¦[15:0]å·¦ç§»ä¸¤ä½å¹¶ç¬¦å·æ‰©å±•åˆ°32ä½ä¸PCç›¸åŠ ç»„æˆæ–°çš„PC</center><h2 id="3-3ã€single-data-path"><a href="#3-3ã€single-data-path" class="headerlink" title="3.3ã€single data path"></a>3.3ã€single data path</h2><blockquote><p>å‡è®¾æˆ‘ä»¬åœ¨<code>ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸ</code>å†…æ‰§è¡Œä»»æ„ä¸€æ¡æŒ‡ä»¤ã€‚é‚£æ„å‘³ç€æ¯æ¡æŒ‡ä»¤ä¸èƒ½ç”¨æŸä¸ªéƒ¨ä»¶ä¸¤æ¬¡æˆ–ä»¥ä¸Šã€‚æ‰€ä»¥ä»»ä½•éœ€è¦é‡å¤çš„éƒ¨ä»¶éƒ½å¿…é¡»è¢«å¤åˆ¶ã€‚</p><p>1ã€éœ€è¦ä¸€ä¸ªæŒ‡ä»¤å­˜å‚¨å™¨å¤–ï¼Œè¿˜éœ€è¦ä¸€ä¸ªæ•°æ®å­˜å‚¨å™¨</p><p>2ã€å°½ç®¡æœ‰çš„åŠŸèƒ½å•å…ƒéœ€è¦å¤åˆ¶ï¼Œä½†åœ¨æ‰§è¡Œä¸åŒæŒ‡ä»¤æ—¶ï¼Œå¾ˆå¤šåŠŸèƒ½å•å…ƒå¯ä»¥è¢«å…±äº«(å¤ç”¨)</p></blockquote><p><img src="https://image.beenli.cn/img/20200820/v7L4zwoVuOAJ.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><center>å¤ç”¨ALUå’Œå¯„å­˜å™¨å †</center><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CS</category>
        <category>Computer Organization &amp; Design</category>
      </categories>
      <tags>
        <tag>processor</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®é€šè·¯(2)--Control</title>
    <url>/posts/f0189490/</url>
    <content><![CDATA[<h1 id="1ã€ALUæ§åˆ¶"><a href="#1ã€ALUæ§åˆ¶" class="headerlink" title="1ã€ALUæ§åˆ¶"></a>1ã€ALUæ§åˆ¶</h1><blockquote><p>MIPS ALUåœ¨4ä½æ§åˆ¶ä¿¡å·ä¸Šå®šä¹‰äº†6ç§æœ‰æ•ˆçš„è¾“å…¥ç»„åˆ</p></blockquote><p><img src="https://image.beenli.cn/img/20200820/VGrg5UNVVt4J.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ul><li>å­˜å‚¨å™¨è®¿é—®æŒ‡ä»¤ï¼šadd</li><li>Rå‹æŒ‡ä»¤ï¼šæ ¹æ®æŒ‡ä»¤ä½6ä½çš„functå­—æ®µ<a href="#link"><sup>1</sup></a> ï¼ŒALUæ‰§è¡Œ5ç§æ“ä½œä¸­çš„ä¸€ç§(noræš‚æ—¶æ²¡ç”¨)</li><li>branchæŒ‡ä»¤ï¼šsub(ä¸¤ä¸ªæ“ä½œæ•°ç›¸å‡åˆ¤æ–­æ˜¯å¦ä¸ºé›¶)</li></ul><ul><li><code>å¤šçº§è¯‘ç </code>ï¼šè¾“å…¥ï¼š6ä½functå­—æ®µå’Œ2ä½ALUOPå­—æ®µâ€”â€”â€”â€”&gt;è¾“å‡ºï¼š4ä½ALU control lines</li></ul><p><img src="https://image.beenli.cn/img/20200820/xlEg0oIEPQA5.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><center>ä¸»æ§åˆ¶å•å…ƒç”ŸæˆALUOP</center><ul><li>çœŸå€¼è¡¨â€”â€”ä¼˜åŒ–åè½¬æ¢ä¸ºé—¨ç”µè·¯ï¼ˆå‘å¾…å®šï¼‰</li></ul><p><img src="https://image.beenli.cn/img/20200820/fBArSknPUEb4.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><h1 id="2ã€ä¸»æ§åˆ¶å•å…ƒ"><a href="#2ã€ä¸»æ§åˆ¶å•å…ƒ" class="headerlink" title="2ã€ä¸»æ§åˆ¶å•å…ƒ"></a>2ã€ä¸»æ§åˆ¶å•å…ƒ</h1><div id="link"></div><ul><li>æŒ‡ä»¤æ ¼å¼</li></ul><p><img src="https://image.beenli.cn/img/20200820/MLWQrvKbTmz4.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ul><li>Rå‹æŒ‡ä»¤opcodeä¸º0ï¼›lwä¸º35ï¼›swä¸º43 ; branchä¸º<span class="github-emoji" style="display:inline;vertical-align:middle;color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/0034-20e3.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/0034-20e3.png?v8">4âƒ£</span></li></ul><p><img src="https://image.beenli.cn/img/20200820/w7nhaHnvyrH3.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><center>7ä¸ªå¤šé€‰å™¨æ§åˆ¶ä¿¡å·çš„ä½œç”¨</center><p><img src="https://image.beenli.cn/img/20200820/kdnnx95gnWHt.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><center>ä¸»æ§å•å…ƒäº§ç”Ÿ7ä¸ªä¸€ä½æ§åˆ¶ä¿¡å·+2ä½ALUOP</center><ul><li><p>æ§åˆ¶ä¿¡å·çœŸå€¼è¡¨</p><p><img src="https://image.beenli.cn/img/20200820/xa7NDi0PBA7x.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p></li><li><p>op[5:0]å–è‡³Instruction[31:26]</p></li><li>RegDst: Rä¸º1è¡¨ç¤ºç›®çš„å¯„å­˜å™¨ä¸ºrd; lwä¸ºrs; swå’Œbranchä¸ç”¨å†™å›å¯„å­˜å™¨å †æ‰€ä»¥æ²¡æœ‰ç›®çš„å¯„å­˜å™¨ã€‚</li><li>ALUSrc: Rå’Œbranchä¸º0è¡¨ç¤ºALUç¬¬äºŒä¸ªæ“ä½œæ•°æ¥è‡ªrt; lwå’Œswè¡¨ç¤ºç¬¬äºŒä¸ªæ“ä½œæ•°æ¥è‡ªä½16ä½çš„æ‰©å±•ã€‚</li><li>MemtoReg: swå’Œbranchä¸ºxè¡¨ç¤ºä¸ç”¨å†™å›ã€‚Rä¸º0è¡¨ç¤ºALUè®¡ç®—ç»“æœå†™å›ï¼›lwè¡¨ç¤ºæ•°æ®å¯„å­˜å™¨å–å‡ºæ¥çš„æ•°å†™å›</li><li>Regwirte: Rå’Œlwè¦å†™å›æ‰€ä»¥ä¸º1ã€‚</li><li>MenRead: åªè¦lwè¦è¯»æ‰€ä»¥åªæœ‰lwä¸º1</li><li>MemWrite: åªæœ‰swè¦å†™</li><li>Branch: åªæœ‰branchæ‰è§¦å‘</li><li>ALUOP: Rä¸º10ï¼›å­˜å‚¨ä¸º00ï¼›branchä¸º01</li></ul><ul><li><p>è·³è½¬å®ç°ï¼ˆå³æ”¹å˜PCçš„å€¼ï¼‰</p><p>å…¶OPcodeä¸º2.ä½26ä½éƒ½æ˜¯offset_addressã€‚</p><p><img src="https://image.beenli.cn/img/20200820/PCxbE327wJVr.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p></li></ul><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CS</category>
        <category>Computer Organization &amp; Design</category>
      </categories>
      <tags>
        <tag>processor</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®é€šè·¯(3)--Pipeline &amp; hazards</title>
    <url>/posts/d4768fc/</url>
    <content><![CDATA[<h1 id="1ã€An-Overview-of-Pipeline"><a href="#1ã€An-Overview-of-Pipeline" class="headerlink" title="1ã€An Overview of Pipeline"></a>1ã€An Overview of Pipeline</h1><blockquote><p><code>æµæ°´çº¿</code>å°±åƒå·¥å‚çš„å·¥äººä¸€æ ·ï¼Œæ¯ä¸ªå·¥äººåªåšä¸€é“å·¥åºï¼ˆæ¯ä¸ªç¡¬ä»¶åªåšä¸€ä¸ªåŠŸèƒ½)ï¼ŒåŒä¸€æ—¶é—´å‡ é“å·¥åºåŒæ—¶åœ¨åš(åŒä¸€æ—¶é—´å¤šæ¡æŒ‡ä»¤åŒæ—¶æ‰§è¡Œï¼Œæ¯æ¡æŒ‡ä»¤åœ¨ä¸åŒçš„é˜¶æ®µ)ï¼Œæœ€åä¸€é“å·¥åºåšå®Œå³å®Œæˆäº†ä¸€ä»¶äº§å“(æ‰€ä»¥ååé‡éå¸¸å¤§)ã€‚</p></blockquote><p><img src="https://image.beenli.cn/img/20200925/CH2JrES42Wqd.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><h2 id="RISC-Vç»å…¸æµæ°´çº¿å¯ä»¥åˆ†ä¸ºäº”æ­¥"><a href="#RISC-Vç»å…¸æµæ°´çº¿å¯ä»¥åˆ†ä¸ºäº”æ­¥" class="headerlink" title="RISC-Vç»å…¸æµæ°´çº¿å¯ä»¥åˆ†ä¸ºäº”æ­¥"></a>RISC-Vç»å…¸æµæ°´çº¿å¯ä»¥åˆ†ä¸ºäº”æ­¥</h2><ul><li>Fetch instruction from memoryï¼ˆIF)</li><li>Read register and decode the instruction(ID)</li><li>Execute the operation or calculate an address(EX)</li><li>Access an operand in data memory (MEM) [if necessary]</li><li>Write the result into a register(WB) [if necessary]</li></ul><h2 id="é¢å‘æµæ°´çº¿çš„æŒ‡ä»¤é›†è®¾è®¡"><a href="#é¢å‘æµæ°´çº¿çš„æŒ‡ä»¤é›†è®¾è®¡" class="headerlink" title="é¢å‘æµæ°´çº¿çš„æŒ‡ä»¤é›†è®¾è®¡"></a>é¢å‘æµæ°´çº¿çš„æŒ‡ä»¤é›†è®¾è®¡</h2><ul><li><p>RISC-V æŒ‡ä»¤ç­‰é•¿ï¼Œè¿™ä¸€é™åˆ¶ç®€åŒ–äº†ç¬¬ä¸€çº§å–æŒ‡ä¸ç¬¬äºŒçº§è¯‘ç ã€‚</p><p>ã€x86æŒ‡ä»¤é•¿åº¦ä¸ç­‰ï¼Œä»1å­—èŠ‚åˆ°15å­—èŠ‚ä¸ç­‰ã€‚æœ€è¿‘x86ä½“ç³»ç»“æ„ï¼šå…ˆè½¬åŒ–ä¸ºç®€å•çš„æ“ä½œã€‘</p></li><li><p>RISC-Våªæœ‰å‡ ç§æŒ‡ä»¤æ ¼å¼ï¼Œæ¯ä¸€ç§æŒ‡ä»¤æºå’Œç›®çš„å¯„å­˜å™¨å­—æ®µä½ç½®ä¸å˜ã€‚</p><p>ã€ä½¿å¾—ç¬¬äºŒçº§åœ¨ç¡®å®šæŒ‡ä»¤ç±»å‹çš„åŒæ—¶å¼€å§‹è¯»å¯„å­˜å™¨å †ã€‘</p></li><li><p>RISC-Vçš„memory operandsä»…ä»…å‡ºç°åœ¨å­˜å–æŒ‡ä»¤ä¸­(å¸¸è§„ALUæŒ‡ä»¤çš„æ“ä½œæ•°ç›´æ¥åœ¨ç¬¬äºŒçº§å¯„å­˜å™¨å †è¯»å‡º)ã€‚æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨æ‰§è¡Œé˜¶æ®µè®¡ç®—å†…å­˜åœ°å€ï¼Œç„¶ååœ¨ä¸‹ä¸€ä¸ªé˜¶æ®µè®¿å­˜ã€‚</p><p>ã€å¦‚æœåƒx86é‚£æ ·å¯ä»¥æ“ä½œåœ¨å†…å­˜ä¸­çš„æ“ä½œæ•°ï¼Œé‚£ä¹ˆç¬¬ä¸‰ã€å››çº§å°†æ‰©å±•ä¸ºaddress stageï¼Œmemory stageï¼Œexecute stageã€‘</p></li></ul><h2 id="æµæ°´çº¿æ§åˆ¶"><a href="#æµæ°´çº¿æ§åˆ¶" class="headerlink" title="æµæ°´çº¿æ§åˆ¶"></a>æµæ°´çº¿æ§åˆ¶</h2><p><img src="https://image.beenli.cn/img/20200925/IekslQjza2wy.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><h1 id="2ã€Pipeline-Hazards"><a href="#2ã€Pipeline-Hazards" class="headerlink" title="2ã€Pipeline Hazards"></a>2ã€Pipeline Hazards</h1><blockquote><p>There are situation in pipelining when the next instruction cannot execute in the following clock cycle. These events are called <code>hazards</code>.</p></blockquote><h2 id="1ã€Structural-Hazard"><a href="#1ã€Structural-Hazard" class="headerlink" title="1ã€Structural Hazard"></a>1ã€Structural Hazard</h2><p class="note note-info">When a planned instruction cannot execute in the proper clock cycle because the hardware does not support the combination of instructions that are set to execute</p><p><strong></strong></p><center><strong>[ç”±äºç¡¬ä»¶èµ„æºä¸å¤Ÿå¯¼è‡´çš„å†’é™©]</strong></center><p></p><p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬æˆ‘ä»¬çš„IFå’ŒMEMåˆ†å¼€ï¼ˆæŒ‡ä»¤å¯„å­˜å™¨å’Œæ•°æ®å¯„å­˜å™¨ï¼‰</p><h2 id="2ã€Data-Hazard"><a href="#2ã€Data-Hazard" class="headerlink" title="2ã€Data Hazard"></a>2ã€Data Hazard</h2><p class="note note-info">When a planned instruction cannot execute in the proper clock cycle because data that are needed to execute the instruction are not yet available</p><p><strong></strong></p><center><strong>[ç”±äºæ“ä½œæ•°æ²¡æœ‰å‡†å¤‡å¥½å¯¼è‡´çš„å†’é™©]</strong></center><p></p><p>ä¸‰ç§ç»å…¸è§£å†³åŠæ³•</p><ul><li>Reorder code(é‡æ–°å®‰æ’ä»£ç )</li><li>stall the pipeline(é˜»å¡ä¸€ä¸ªæˆ–å‡ ä¸ªå‘¨æœŸ)</li><li>bypass or forwarding(æ—è·¯æˆ–è€…å‰æ¨ä¸Šä¸€æ¡æŒ‡ä»¤è¿ç®—çš„ç»“æœ)</li></ul><h3 id="â‘ Reorder-code"><a href="#â‘ Reorder-code" class="headerlink" title="â‘ Reorder code"></a>â‘ Reorder code</h3><pre><code class="hljs C"><span class="hljs-comment">//code segment in C</span>
a = b + e;
c = b + f;

<span class="hljs-comment">//generated RISC-V code for above segment</span>
ld x1, <span class="hljs-number">0</span>(x31)	<span class="hljs-comment">// Load b   1</span>
ld x2, <span class="hljs-number">8</span>(x31)	<span class="hljs-comment">// Load e	2</span>
add x3, x1, x2	<span class="hljs-comment">// b + e	3</span>
sd x3, <span class="hljs-number">24</span>(x31)	<span class="hljs-comment">// Store a	4</span>
ld x4, <span class="hljs-number">16</span>(x31)	<span class="hljs-comment">// Load f	5</span>
add x5, x1, x4	<span class="hljs-comment">// b + f	6</span>
sd x5, <span class="hljs-number">32</span>(x31)	<span class="hljs-comment">// Store c	7</span>

<span class="hljs-comment">/************** è¯´æ˜ *****************</span>
<span class="hljs-comment">1ã€é€šè¿‡æ—è·¯å¯ä»¥å»é™¤3å¯¹1çš„ä¾èµ–(load æŒ‡ä»¤æœ€å°‘éœ€è¦ä¸¤ä¸ªå‘¨æœŸï¼ŒALUæŒ‡ä»¤åœ¨æ—è·¯æŠ€æœ¯ä¸‹å¯¹ä¸‹ä¸€æ¡æŒ‡ä»¤ä¸ä¼šæ„æˆæ•°æ®å†’é™©ï¼‰</span>
<span class="hljs-comment">2ã€é€šè¿‡æ—è·¯ä¹Ÿå¯è§£å†³sdæŒ‡ä»¤å¯¹ä¸Šä¸€æ¡addæŒ‡ä»¤çš„ä¾èµ–</span>
<span class="hljs-comment">3ã€éœ€è¦è§£å†³çš„: 3V2å’Œ6V5         */</span>

<span class="hljs-comment">//************* è§£å†³åŠæ³• ***************</span>
æŠŠç¬¬<span class="hljs-number">5</span>æ¡æŒ‡ä»¤æåˆ°ç¬¬äºŒæ¡æŒ‡ä»¤å’Œç¬¬ä¸‰æ¡ä¸­é—´ã€‚</code></pre><h3 id="â‘¡Bypassing"><a href="#â‘¡Bypassing" class="headerlink" title="â‘¡Bypassing"></a>â‘¡Bypassing</h3><p><img src="https://image.beenli.cn/img/20200925/9t5mAjk5HVXm.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ul><li>andæŒ‡ä»¤éœ€è¦x2ï¼Œè€Œx2åªæœ‰ç­‰åˆ°ç¬¬ä¸€æ¡æŒ‡ä»¤å†™å›æ‰æœ‰æ•ˆ(å³ç¬¬äº”ä¸ªå‘¨æœŸå‰åŠæ®µ)</li><li>åŒç†oræŒ‡ä»¤</li><li>â“å‡è®¾: å†™å¯„å­˜å™¨æ“ä½œå‘ç”Ÿæ—¶é’Ÿå‘¨æœŸçš„å‰åŠæ®µè€Œè¯»å¯„å­˜å™¨æ“ä½œå‘ç”Ÿåœ¨æ—¶é’Ÿå‘¨æœŸååŠæ®µ</li></ul><p class="note note-info">æ—è·¯çš„æ ¸å¿ƒï¼šå‰ä¸€æ¡æŒ‡ä»¤è®¡ç®—çš„ç»“æœä¸ç”¨ç­‰åˆ°ç¬¬äº”å‘¨æœŸå†™å›å¯„å­˜å™¨å †è€Œæå‰æ—è·¯åˆ°å…¶åæŒ‡ä»¤çš„ALUæ“ä½œæ•°è¾“å…¥ä¸Šã€‚</p><p><img src="https://image.beenli.cn/img/20200925/DyyhciQAJVxi.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ul><li><p>EXå†’é™©ï¼ˆEX/MEMæµæ°´çº¿å¯„å­˜å™¨æœ‰éœ€è¦çš„å€¼ï¼‰</p><pre><code class="hljs c"><span class="hljs-keyword">if</span>  (EX/MEM.RegWrite
<span class="hljs-keyword">and</span>  (EX/MEM.RegisterRd â‰  <span class="hljs-number">0</span>)
<span class="hljs-keyword">and</span>  (EX/MEM.RegisterRd = ID/EX.RegisterRs1)) ForwardA = <span class="hljs-number">10</span>

<span class="hljs-keyword">if</span>  (EX/MEM.RegWrite
<span class="hljs-keyword">and</span>  (EX/MEM.RegisterRd â‰  <span class="hljs-number">0</span>)
<span class="hljs-keyword">and</span>  (EX/MEM.RegisterRd = ID/EX.RegisterRs2)) ForwardB = <span class="hljs-number">10</span></code></pre></li><li><p>MEM hazard</p><pre><code class="hljs c"><span class="hljs-keyword">if</span>  (MEM/WB.RegWrite
<span class="hljs-keyword">and</span>  (MEM/WB.RegisterRd â‰  <span class="hljs-number">0</span>)
<span class="hljs-keyword">and</span>  <span class="hljs-keyword">not</span>(EX/MEM.RegWrite <span class="hljs-keyword">and</span> (EX/MEM.RegisterRd â‰  <span class="hljs-number">0</span>)
<span class="hljs-keyword">and</span> (EX/MEM.RegisterRd = ID/EX.RegisterRs1)) 
     <span class="hljs-comment">// å…ˆåˆ¤æ–­ä¸æ˜¯EXå†’é™©ï¼Œä¸ç„¶åº”è¯¥æ˜¯æ—è·¯ä¸Šä¸€æ¡æŒ‡ä»¤EX/MEMç»“æœæ—è·¯ä¸Šä¸Šæ¡MEM/WB</span>
<span class="hljs-keyword">and</span>  (MEM/WB.RegisterRd = ID/EX.RegisterRs1)) ForwardA = <span class="hljs-number">01</span>

<span class="hljs-keyword">if</span>  (MEM/WB.RegWrite
<span class="hljs-keyword">and</span>  (MEM/WB.RegisterRd â‰  <span class="hljs-number">0</span>)
<span class="hljs-keyword">and</span>  <span class="hljs-keyword">not</span>(EX/MEM.RegWrite <span class="hljs-keyword">and</span> (EX/MEM.RegisterRd â‰  <span class="hljs-number">0</span>)
<span class="hljs-keyword">and</span> (EX/MEM.RegisterRd = ID/EX.RegisterRs2))
<span class="hljs-keyword">and</span>  (MEM/WB.RegisterRd = ID/EX.RegisterRs2)) ForwardB = <span class="hljs-number">01</span></code></pre><hr></li></ul><p><img src="https://image.beenli.cn/img/20200925/0sMUpSTpeddo.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ul><li>æ—è·¯å•å…ƒäº§ç”Ÿæ§åˆ¶ä¿¡å·é€‰ç€ALUçš„è¾“å…¥operandã€‚</li></ul><h3 id="â‘¢Stalls"><a href="#â‘¢Stalls" class="headerlink" title="â‘¢Stalls"></a>â‘¢Stalls</h3><p class="note note-info">éœ€è¦é˜»å¡çš„æƒ…å½¢ï¼šå½“ä¸€æ¡æŒ‡ä»¤è¯•å›¾è¯»å–ä¸€ä¸ªç”±å‰ä¸€æ¡è£…è½½æŒ‡ä»¤è¯»å…¥çš„å¯„å­˜å™¨æ—¶ï¼Œå°±æ— æ³•ä½¿ç”¨æ—è·¯è§£å†³å†’é™©(å› ä¸ºlwæŒ‡ä»¤éœ€è¦åœ¨ç¬¬å››é˜¶æ®µæ‰èƒ½äº§ç”Ÿç»“æœ)</p><ol><li><p>å†’é™©æ£€æµ‹å•å…ƒ</p><pre><code class="hljs c"><span class="hljs-keyword">if</span>  (ID/EX.MemRead <span class="hljs-keyword">and</span>
	((ID/EX.RegisterRd = IF/ID.RegisterRs1) <span class="hljs-keyword">or</span>
		(ID/EX.RegisterRd = IF/ID.RegisterRs2)))
stall the pipeline</code></pre></li><li><p>æ£€æµ‹å•å…ƒå·¥ä½œåœ¨IDé˜¶æ®µã€‚</p></li><li><p>é˜»å¡åé¢æŒ‡ä»¤çš„æ–¹æ³•ï¼šä¿æŒPCå¯„å­˜å™¨å’ŒIF/IDæµæ°´çº¿å¯„å­˜å™¨ä¸å˜ã€‚</p></li><li><p>æ’å…¥ä¸€æ¡ç©ºæŒ‡ä»¤ï¼ˆnop)ï¼šä¸€ç§ä¸è¿›è¡Œä»»ä½•æ“ä½œæˆ–ä¸æ”¹å˜ä»»ä½•çŠ¶æ€çš„æŒ‡ä»¤ã€‚</p><p>å®ç°æ–¹æ³•ï¼šæ§åˆ¶ä¿¡å·å…¨éƒ¨ç½®ä¸º0ï¼Œè¿™äº›æ§åˆ¶ä¿¡å·åœ¨æ¯ä¸ªæ—¶é’Ÿå‘¨æœŸéƒ½å‘å‰ä¼ é€’ï¼Œä½†ä¸ä¼šäº§ç”Ÿä¸è‰¯å½±å“ï¼Œå› ä¸ºæ§åˆ¶ä¸º0ï¼Œé‚£ä¹ˆæ‰€æœ‰å¯„å­˜å™¨å’Œå­˜å‚¨å™¨éƒ½ä¸è¿›è¡Œå†™æ“ä½œã€‚</p></li></ol><p><img src="https://image.beenli.cn/img/20200925/2CuKo0v4bF7b.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><h2 id="3ã€Control-Hazard"><a href="#3ã€Control-Hazard" class="headerlink" title="3ã€Control Hazard"></a>3ã€Control Hazard</h2><p class="note note-info">An instruction must be fetched at every clock cycle to sustain the pipeline, yet in our design the decision about whether to branch doesn't occur until the MEM pipeline stage.<br>(åé¢çš„ä¼˜åŒ–ğŸ™†â€çœ‹åˆ°åœ¨IDçº§å°±å¯ä»¥ç¡®å®šåˆ†æ”¯)</p><p><strong></strong></p><center><strong>[ç”±äºé€‰æ‹©âœ”çš„æŒ‡ä»¤éœ€è¦å»¶è¿Ÿ]</strong></center><p></p><h3 id="â‘ Branch"><a href="#â‘ Branch" class="headerlink" title="â‘ Branch"></a>â‘ Branch</h3><ol><li><p>å‡å®šåˆ†æ”¯ä¸å‘ç”Ÿï¼ˆå¦‚æœå‘ç”Ÿé¢„å–å’Œè¯‘ç çš„æŒ‡ä»¤è¦ä¸¢å¼ƒï¼‰</p></li><li><p>ç¼©çŸ­åˆ†æ”¯å»¶è¿Ÿï¼ˆææ—©ç¡®å®šåˆ†æ”¯ï¼Œå‡å°‘flushçš„æŒ‡ä»¤æ•°ï¼‰</p><ul><li><p>è®¡ç®—åˆ†æ”¯ç›®æ ‡åœ°å€ï¼ˆIF/IDæµæ°´çº¿å¯„å­˜å™¨å·²ç»æœ‰äº†PCå’Œç«‹å³æ•°å­—æ®µçš„å€¼ï¼‰</p></li><li><p>åˆ¤æ–­åˆ†æ”¯æ¡ä»¶ï¼šéœ€è¦é¢å¤–çš„æ—è·¯å’Œå†’é™©æ£€æµ‹ç¡¬ä»¶ã€‚ã€å› ä¸ºåˆ†æ”¯æ¡ä»¶çš„åˆ¤æ–­å¯èƒ½ä¾èµ–äºè¿˜åœ¨æµæ°´çº¿ä¸­çš„ç»“æœã€‘</p><blockquote><p>ä¸¤ä¸ªéš¾ç‚¹ï¼š</p><p>â… ã€å‰é¢çš„ALUæ—è·¯å•å…ƒåœ¨EXçº§ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦ä¸€ä¸ªæ–°çš„æ—è·¯å•å…ƒå·¥ä½œåœ¨IDçº§ã€‚è¿˜éœ€è¦ä¸€ä¸ª<code>equality test logic</code>ï¼ˆå¯¹ä¸¤ä¸ªå¯„å­˜å™¨çš„å€¼æŒ‰ä½å¼‚æˆ–æ¥ç€æˆ–æ“ä½œï¼‰</p><p>â…¡ã€å¯èƒ½æ•°æ®åœ¨IDçº§æ—è·¯ä¸è¿‡æ¥ã€‚ä¸Šä¸€æ¡æ˜¯ALUæŒ‡ä»¤ï¼Œé‚£ä¹ˆåªèƒ½<code>stall a cycle</code>ï¼›å¦‚æœæ˜¯lwæŒ‡ä»¤ï¼Œé‚£ä¹ˆå¿…é¡»<code>stall two cycles</code>ã€‚</p><p>â…¢ã€æ§åˆ¶ä¿¡å·æ–°å¢ä¸€ä¸ª<code>IF.flush</code>ä¿¡å·ï¼ŒæŠŠé¢„å–çš„é‚£æ¡æŒ‡ä»¤å˜æˆnopæŒ‡ä»¤ã€‚</p></blockquote></li></ul></li><li><p>åŠ¨æ€åˆ†æ”¯é¢„æµ‹(ç¼“å­˜ä¹‹å‰è¿è¡Œåˆ†æ”¯çš„ä¿¡æ¯è¿›è¡Œåˆ¤æ–­)<br>fetching new instructions from the same places as the last time.)</p><ul><li><code>åˆ†æ”¯é¢„æµ‹ç¼“å­˜</code>(branch prediction buffer)ä¹Ÿç§°ä¸º<code>åˆ†æ”¯å†å²è®°å½•è¡¨</code>(branch history table):ä½¿ç”¨åˆ†æ”¯æŒ‡ä»¤åœ°å€åœ°ä½ç´¢å¼•çš„ä¸€å°å—å­˜å‚¨åŒºã€‚</li><li>è¿™ç±»ç¼“å­˜æˆ‘ä»¬å®é™…ä¸Šä¸çŸ¥é“é¢„æµ‹æ˜¯å¦æ­£ç¡®ï¼Œè€Œä¸”å®ƒè¿˜å¯èƒ½ç”±å…¶ä»–å…·æœ‰ç›¸åŒåœ°å€åœ°ä½çš„åˆ†æ”¯è®¾ç½®ã€‚</li><li>é¢„æµ‹é”™è¯¯âŒæ—¶ï¼Œé”™è¯¯çš„é¢„å–æŒ‡ä»¤åˆ é™¤ï¼Œé¢„æµ‹ä½å–åï¼Œå›åˆ°åŸæ¥çš„ä½ç½®ï¼ˆâ“å¾—æœ‰ç¼“å­˜ï¼‰ï¼Œç»§ç»­æŒ‰ç…§æ­£ç¡®çš„æ–¹å‘å–æŒ‡å¹¶æ‰§è¡Œã€‚</li><li>åˆ†æ”¯é¢„æµ‹ç¼“å­˜å¯ä»¥ç”¨å¾ˆå°ï¼Œç”¨æŒ‡ä»¤åœ°å€è®¿é—®çš„special buffer in IF pipe stageã€‚å¦‚æœé¢„æµ‹åˆ†æ”¯ï¼Œé‚£ä¹ˆä»åˆ†æ”¯targetå–æŒ‡ä»¤ã€‚</li><li>ä¸ºäº†æ”¹å–„éå¸¸æœ‰è§„å¾‹çš„åˆ†æ”¯çš„é¢„æµ‹æ­£ç¡®ç‡ï¼ˆæ¯”å¦‚å¾ªç¯ï¼Œ9æ¬¡åˆ†æ”¯åªæœ‰æœ€åä¸€æ¬¡å¾ªç¯é€€å‡ºä¸åˆ†æ”¯ï¼‰ï¼›å¯ä»¥ä½¿ç”¨<code>ä¸¤ä½çš„é¢„æµ‹æœºåˆ¶</code>ã€‚</li></ul><p><img src="https://image.beenli.cn/img/20200927/XfbMg3jzjpEc.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ul><li><code>ç›¸å…³é¢„æµ‹å™¨</code>ï¼ˆcorrelation predictors)ï¼šä¸ä»…ä½¿ç”¨local branchçš„ä¿¡æ¯ï¼Œè¿˜ç»¼åˆglobal behavior of recently executed branches ã€‚å…¸å‹çš„ç›¸å…³é¢„æµ‹å™¨ä¸ºæ¯ä¸ªåˆ†æ”¯æä¾›ä¸¤ä¸ªä¸¤ä½çš„é¢„æµ‹å™¨ï¼Œæ ¹æ®ä¸Šä¸€æ¬¡åˆ†æ”¯æ˜¯å¦æ‰§è¡Œé€‰æ‹©å…¶ä¸­ä¸€ä¸ªé¢„æµ‹å™¨ï¼Œå› æ­¤å…¨å±€åˆ†æ”¯è¡Œä¸ºå¯ä»¥çœ‹æˆadding additional index bits for the prediction lookup.</li><li><code>ç«äº‰é¢„æµ‹å™¨</code>(tournament branch predictor)ï¼šä¸ºæ¯ä¸ªåˆ†æ”¯ä½¿ç”¨å¤šä¸ªé¢„æµ‹å™¨ï¼Œå¹¶è®°å½•å“ªä¸ªé¢„æµ‹å™¨é¢„æµ‹ç»“æœæœ€å¥½ã€‚å…¸å‹çš„ç«äº‰é¢„æµ‹å™¨ï¼šå¯¹æ¯ä¸ªåˆ†æ”¯ç´¢å¼•åŒ…å«ä¸¤ä¸ªé¢„æµ‹ç»“æœï¼Œä¸€ä¸ªåŸºäºæœ¬åœ°ä¿¡æ¯ï¼Œä¸€ä¸ªåŸºäºå…¨å±€åˆ†æ”¯è¡Œä¸ºã€‚ä¸€ä¸ªé€‰æ‹©å™¨é€‰æ‹©å“ªä¸ªä½œä¸ºé¢„æµ‹ç»“æœã€‚</li><li><code>æ¡ä»¶ç§»åŠ¨æŒ‡ä»¤</code>(conditional move instruction)ï¼šä¸åŒäºåˆ†æ”¯æŒ‡ä»¤æ”¹å˜PCå€¼ï¼Œæ¡ä»¶ç§»åŠ¨æŒ‡ä»¤å°†æ ¹æ®æ¡ä»¶æ”¹å˜moveæŒ‡ä»¤çš„ç›®çš„å¯„å­˜å™¨ã€‚åœ¨ARMv8æŒ‡ä»¤é›†æ¶æ„ä¸­ï¼šCSEL X8, X11,X4,NE å¦‚æœæ¡ä»¶ç ä¸ä¸ºé›¶ï¼Œå¤åˆ¶x11åˆ°x8ï¼›å¦åˆ™å¤åˆ¶X4åˆ°X8;</li></ul></li></ol><h3 id="â‘¡Exception"><a href="#â‘¡Exception" class="headerlink" title="â‘¡Exception"></a>â‘¡Exception</h3><p class="note note-danger">Control is the most challenging aspect of processor design: it is both the hardest part to get right and toughest part to make fast<br>ç„¶è€Œæ§åˆ¶ä¸­æœ€éš¾çš„å°±æ˜¯å®ç°å¼‚å¸¸æˆ–ä¸­æ–­â€”â€”é™¤åˆ†æ”¯å¤–æ”¹å˜æ­£å¸¸æŒ‡ä»¤æ‰§è¡Œæµ</p><p>å½“å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œå¤„ç†å™¨å¿…é¡»åšçš„åŸºæœ¬äº‹æƒ…æ˜¯ï¼š</p><ul><li>åœ¨<code>SEPC</code>(supervisor exception cause register)ä¿å­˜å‡ºé”™æŒ‡ä»¤çš„åœ°å€</li><li>æŠŠæ§åˆ¶æƒäº¤ç»™æ“ä½œç³»ç»Ÿçš„ç‰¹å®šåœ°å€å¤„</li></ul><p>å¯¹äºå¤„ç†å¼‚å¸¸çš„OS,å®ƒå¿…é¡»çŸ¥é“å¼‚å¸¸çš„åŸå› ï¼š</p><ul><li><p>è®¾ç½®ä¸€ä¸ª<code>åŸå› å¯„å­˜å™¨</code>ï¼ˆSupervisor Exception Cause Register or SCAUSE):å…¶ä¸­æœ‰ä¸ªåŸŸæŒ‡ç¤ºå¼‚å¸¸çš„åŸå› </p></li><li><p>ä½¿ç”¨<code>å‘é‡ä¸­æ–­</code>(vectored interrupts), æ§åˆ¶æƒè¢«è½¬ç§»åˆ°çš„åœ°å€æ˜¯ç”±å¼‚å¸¸åŸå› å†³å®šï¼Œè¯¥åœ°å€å¯èƒ½è¢«æ·»åŠ åˆ°æŒ‡å‘å‘é‡ä¸­æ–­å†…å­˜èŒƒå›´çš„base registerä¸­ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å¼‚å¸¸ä¸­æ–­å‘é‡åœ°å€æ¥è¡¨ç¤ºå¼‚å¸¸ç§ç±»ã€‚</p><p><img src="https://image.beenli.cn/img/20200927/MKHGADukdjKe.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p></li></ul><p>å¼‚å¸¸åœ¨æµæ°´çº¿ä¸­çš„å®ç°(ä½¿ç”¨è‡ªå‰ç›¸åŒçš„æœºåˆ¶ï¼Œä¸è¿‡è¿™æ¬¡ç”±å¼‚å¸¸é‡ç½®æ§åˆ¶ä¿¡å·)</p><ul><li>IFçº§æŒ‡ä»¤çš„æ¸…é™¤ç”¨ä¹‹å‰çš„<code>IF.flush</code>ä¿¡å·</li><li>æ–°å¢<code>ID.Flush</code>ä¿¡å·å’Œä¹‹å‰çš„å†’é™©æ£€æµ‹å•å…ƒäº§ç”Ÿçš„stallä¿¡å·è¿›è¡Œæˆ–è¿ç®—ï¼Œç„¶ååŠ åœ¨è‡ªå‰çš„å¤šé€‰å™¨ä¸Šï¼Œå®ç°IDçº§æŒ‡ä»¤æ¸…é™¤</li><li>æ–°å¢ä¸€ä¸ª<code>EX.Flush</code>ä¿¡å·æ¸…é™¤EXçº§çš„æŒ‡ä»¤</li><li>ä¸ºäº†ä»å¼‚å¸¸å¤„ç†ç¨‹åºçš„åœ°å€å–æŒ‡ï¼Œåªè¦ç®€å•å®¶ä¸€ä¸ªé¢å¤–çš„è¾“å…¥åˆ°PCçš„å¤šé€‰å™¨ã€‚</li></ul><p><img src="https://image.beenli.cn/img/20200927/W5ek8iOsIVie.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CS</category>
        <category>Computer Organization &amp; Design</category>
      </categories>
      <tags>
        <tag>processor</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®é€šè·¯(4)--Multiple Issue</title>
    <url>/posts/a36b1d36/</url>
    <content><![CDATA[<h1 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h1><blockquote><p><code>æŒ‡ä»¤é›†å¹¶è¡Œ</code>(instruction-level parallelism)æœ‰ä¸¤ç§æ–¹å¼</p><p>â… ã€<a href="https://www.beenli.cn/posts/d4768fc/">Pipeline</a>â€”â€”è¯¦è§æ•°æ®é€šè·¯(3)ï¼›æµæ°´çº¿è¶Šæ·±ï¼Œå¹¶è¡Œåº¦è¶Šé«˜ã€‚</p><p>â…¡ã€<code>å¤šå‘å°„</code>ï¼ˆmultiple issueï¼‰: æœ¬èŠ‚æ‰€è¦è®²è¿°çš„é‡ç‚¹ã€‚é€šè¿‡å¤åˆ¶è®¡ç®—æœºå†…éƒ¨éƒ¨ä»¶çš„æ•°é‡ï¼Œä½¿å¾—æ¯ä¸ªæµæ°´çº§å¯ä»¥å¯åŠ¨å¤šæ¡æŒ‡ä»¤</p></blockquote><ul><li>å¤šå‘å°„å¯ä»¥ä½¿æŒ‡ä»¤æ‰§è¡Œé€Ÿåº¦è¶…è¿‡æ—¶é’Ÿçš„é€Ÿåº¦ï¼Œå³CPIå°äº1ã€‚</li><li>å®ç°å¤šå‘å°„æœ‰ä¸¤ç§åŠæ³•ï¼š1ã€<code>static multiple issue</code>ï¼›2ã€<code>dynamic multiple issue</code>ã€‚</li></ul><p>å¤šå‘å°„æµæ°´çº¿å¿…é¡»å¤„ç†ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>æ‰“åŒ…æŒ‡ä»¤åˆ°<code>å‘å°„æ§½</code>(issue slots)ï¼šåœ¨å¤§å¤šæ•°é™æ€å¤šå‘å°„å®ç°ä¸Šï¼šåœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå‘å°„å¤šå°‘æ¡æŒ‡ä»¤ï¼Œå“ªäº›æŒ‡ä»¤è¢«å‘å°„è¿™ä¸ªè¿‡ç¨‹è‡³å°‘å¾ˆå¤§ä¸€éƒ¨åˆ†ç”±ç¼–è¯‘å™¨æ¥å®Œæˆã€‚è€Œåœ¨åŠ¨æ€å‘å°„å¤„ç†å™¨ä¸­ï¼Œè¿™ä¸ªé—®é¢˜ä¸€èˆ¬ç”±å¤„ç†å™¨åœ¨è¿è¡Œæ—¶æ¥å¤„ç†ã€‚ï¼ˆå°½ç®¡ç¼–è¯‘å™¨å·²ç»ä¼˜åŒ–äº†æŒ‡ä»¤é¡ºåºæ¥å°½å¯èƒ½å¤šå‘å°„ï¼‰</li><li>å¤„ç†æ•°æ®å’Œæ§åˆ¶å†’é™©ï¼šåœ¨é™æ€å‘å°„å¤„ç†å™¨ä¸­ï¼Œç¼–è¯‘å™¨è§£å†³å¤§éƒ¨åˆ†æˆ–è€…æ‰€æœ‰çš„å¯èƒ½å†’é™©ã€‚ä¸æ­¤ç›¸åçš„ï¼ŒåŠ¨æ€å‘å°„å¤„ç†å™¨ç”¨ç¡¬ä»¶æŠ€æœ¯åœ¨è¿è¡Œæ—¶è‡³å°‘æ¶ˆé™¤æŸäº›ç±»åˆ«çš„å†’é™©ã€‚</li></ol><blockquote><p>å°½ç®¡ï¼Œæˆ‘ä»¬æŠŠå®ƒä»¬æè¿°æˆä¸åŒçš„æ–¹æ³•ï¼Œä½†äº‹å®ä¸Šï¼Œä¸€ä¸ªæ–¹æ³•ç»å¸¸å€ŸåŠ©å¦å¤–ä¸€ä¸ªæ–¹æ³•çš„æŠ€æœ¯ã€‚</p></blockquote><h1 id="Speculation-æ¨æµ‹"><a href="#Speculation-æ¨æµ‹" class="headerlink" title="Speculation(æ¨æµ‹)"></a><a name="spec">Speculation(æ¨æµ‹)</a></h1><p class="note note-primary"><font color="blue">speculation</font>: An approach whereby the compiler or processor guesses the outcome of an instruction to remove it as a dependence in executing other instructions<br>æå‰ç»™å‡ºç»“æœ(çŒœæµ‹)æ¥é¿å…åé¢çš„æŒ‡ä»¤å¯¹æ­£åœ¨è¿è¡ŒæŒ‡ä»¤çš„ä¾èµ–</p><p>ä»¥ä¸‹æ˜¯å‡ ç§çŒœæµ‹çš„æƒ…å½¢ï¼š</p><ul><li>æˆ‘ä»¬çŒœæµ‹åˆ†æ”¯çš„ç»“æœï¼Œé‚£æ ·åˆ†æ”¯åé¢çš„æŒ‡ä»¤å¯ä»¥ææ—©æ‰§è¡Œã€‚</li><li>æˆ‘ä»¬çŒœæµ‹å­˜å­—å’Œå–å­—æŒ‡ä»¤è®¿é—®çš„ä¸æ˜¯åŒä¸€ä¸ªåœ°å€ï¼Œé‚£æ ·æˆ‘ä»¬åœ¨æ‰§è¡Œå­˜å­—æŒ‡ä»¤å‰å»æ‰§è¡Œå–å­—æŒ‡ä»¤ã€‚</li></ul><p>ä½†æ˜¯ï¼ŒçŒœæµ‹å¯èƒ½å‡ºç°é”™è¯¯âŒã€‚æ‰€ä»¥ï¼šä»»ä½•æ¨æµ‹æŠ€æœ¯éƒ½å¿…é¡»åŒ…å«ä¸€ç§æœºåˆ¶ï¼š1ã€æ£€æŸ¥æ¨æµ‹æ˜¯å¦æ­£ç¡®ï¼›2ã€å›æ»šç”±äºæ¨æµ‹æå‰æ‰§è¡Œçš„æŒ‡ä»¤çš„å½±å“ã€‚</p><ol><li><p>æ¨æµ‹é”™è¯¯æ—¶æ¢å¤æœºåˆ¶ï¼š</p><ul><li>for compile: æ’å…¥é¢å¤–çš„æŒ‡ä»¤æ£€æŸ¥æ¨æµ‹çš„æ­£ç¡®æ€§âœ”å¹¶æä¾›ä¸€ä¸ªfix-upä¾‹ç¨‹ä¾›æ¨æµ‹é”™è¯¯æ—¶ä½¿ç”¨ã€‚</li><li>for processor: ç”¨bufferç¼“å­˜æ¨æµ‹ç»“æœç›´åˆ°æ¨æµ‹çš„ç»“æœå¾—åˆ°ç¡®è®¤ã€‚å¦‚æœæ¨æµ‹æ­£ç¡®ï¼ŒæŠŠç¼“å­˜çš„èƒ½å®¹å†™åˆ°ç›¸åº”çš„å¯„å­˜å™¨ä¸­ï¼ŒæŒ‡ä»¤å®Œæˆã€‚å¦‚æœæ¨æµ‹ä¸æ­£ç¡®ï¼Œç¡¬ä»¶å†²åˆ·æ‰bufferï¼Œé‡æ–°æ‰§è¡Œæ­£ç¡®çš„æŒ‡ä»¤åºåˆ—ã€‚</li></ul></li><li><p>æ¨æµ‹å¯èƒ½å¼•å…¥å¦å¤–çš„é—®é¢˜ï¼šå¯¹æŸäº›æŒ‡ä»¤çš„æ¨æµ‹ä¼šå¯¼è‡´åŸæœ¬ä¸å­˜åœ¨çš„å¼‚å¸¸å‘ç”Ÿã€‚æ¯”å¦‚ï¼Œæ¨æµ‹æ‰§è¡Œä¸€æ¡è£…è½½æŒ‡ä»¤ï¼Œåœ¨æ¨æµ‹é”™è¯¯çš„æƒ…å†µä¸‹ï¼Œè¯¥æŒ‡ä»¤æ‰€ä½¿ç”¨çš„åœ°å€æ˜¯éæ³•çš„ã€‚</p></li></ol><h1 id="Static-multiple-issue"><a href="#Static-multiple-issue" class="headerlink" title="Static multiple-issue"></a>Static multiple-issue</h1><p class="note note-primary">Static multiple-issue processers all use the compiler to assist with packaging instructions and handling hazards.</p><p><code>issue packet</code>(å‘å°„åŒ…)ï¼šåœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…å¯ä»¥å‘å°„çš„æŒ‡ä»¤é›†åˆï¼Œå¯ä»¥ç”¨ä¸€æ¡å®Œæˆå¤šç§æ“ä½œçš„é•¿æŒ‡ä»¤æ¥ç±»æ¯”</p><p><code>Very Long Instruction Word</code>(è¶…é•¿æŒ‡ä»¤å­—)ï¼šä¸€ç§æŒ‡ä»¤é›†æ¶æ„ï¼Œèƒ½å¤Ÿå‘å°„å¤šæ¡æ“ä½œï¼Œè¿™äº›æ“ä½œåœ¨å•ä¸ªæŒ‡ä»¤ä¸­è¢«å®šä¹‰ä¸ºç‹¬ç«‹çš„ï¼Œå¹¶ä¸”ä¸€èˆ¬éƒ½æœ‰ç‹¬ç«‹çš„æ“ä½œç åŸŸã€‚</p><ul><li><p>é™æ€å¤šå‘å°„å¤„ç†å™¨æœ‰ä¸¤ç§ï¼š</p><ol><li>ç¼–è¯‘å™¨é¿å…æ‰€æœ‰å†’é™©ï¼›</li><li>ç¡¬ä»¶æ£€æµ‹æ•°æ®å†’é™©ï¼Œå¹¶åœ¨ä¸¤ä¸ªå‘å°„åŒ…é—´äº§ç”Ÿé˜»å¡ï¼Œè€Œç¼–è¯‘å™¨åªè´Ÿè´£é¿å…ä¸€ä¸ªæŒ‡ä»¤åŒ…é—´çš„ä¾èµ–ã€‚</li></ol></li><li><p>ä¸ºäº†å¹¶è¡Œå‘å°„ALUå’Œæ•°æ®ä¼ è¾“æ“ä½œï¼Œéœ€è¦æœ‰é¢å¤–çš„ç¡¬ä»¶ï¼š</p><ol><li>å¯„å­˜å™¨å †è¦æœ‰é¢å¤–çš„ç«¯å£ä¾›è¿ä¸ªæ“ä½œè¯»å–æ“ä½œæ•°ï¼›</li><li>è¦æœ‰é¢å¤–çš„ALUæ¥åŒæ—¶æ‰§è¡ŒEXé˜¶æ®µã€‚</li></ol></li><li><p>å¤šå‘å°„å¸¦æ¥çš„é—®é¢˜ï¼šç”±äºé¢å¤–çš„æŒ‡ä»¤é‡å ï¼Œå†’é™©çš„å¯èƒ½æ€§åŠ å€ã€‚</p><ol><li>è£…è½½æŒ‡ä»¤æœ‰ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸçš„<code>ä½¿ç”¨å»¶è¿Ÿ</code>ï¼ˆuse latency)ï¼›è¿™æ„å‘³ç€ä¸‹ä¸€ä¸ªå‘å°„åŒ…ä¸­æ‰€æœ‰æŒ‡ä»¤éƒ½ä¸èƒ½ä½¿ç”¨è£…è½½çš„ç»“æœã€‚</li><li>åŸæœ¬æ²¡æœ‰ä½¿ç”¨å»¶è¿Ÿçš„ALUæŒ‡ä»¤ï¼Œå…¶ç»“æœä¸èƒ½è¢«åœ¨åŒä¸€ä¸ªå‘å°„åŒ…çš„å…¶ä»–æŒ‡ä»¤ä½¿ç”¨ã€‚</li></ol></li></ul><p><img src="https://image.beenli.cn/img/20200927/pFpgnJVAbslU.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ul><li><code>å¾ªç¯å±•å¼€</code>(loop unrolling)ï¼šä¸€ç§ä»è®¿é—®æ•°ç»„çš„å¾ªç¯ç¨‹åºä¸­è·å¾—æ›´å¤šæ€§èƒ½çš„æŠ€æœ¯ã€‚å…¶ä¸­å¾ªç¯ä½“ä¼šè¢«å¤åˆ¶å¤šä»½å¹¶ä¸”åœ¨ä¸åŒå¾ªç¯ä½“ä¸­çš„æŒ‡ä»¤ä¼šè°ƒåº¦åœ¨ä¸€èµ·ã€‚</li></ul><pre><code class="hljs c"><span class="hljs-comment">/***************** ä¾‹ç¨‹ï¼šæŠŠä¸€æ®µæ•°ç»„ä¸­çš„æ•°å…¨éƒ¨åŠ ä¸Šä¸€ä¸ªæ•°(x21)  ********************/</span>
Loop:  ld  x31, <span class="hljs-number">0</span>(x20)  	<span class="hljs-comment">// x31=array element</span>
       add  x31, x31, x21   <span class="hljs-comment">// add scalar in x21</span>
       sd  x31, <span class="hljs-number">0</span>(x20) 		<span class="hljs-comment">// store result</span>
       addi  x20, x20, <span class="hljs-number">-8</span>   <span class="hljs-comment">// decrement pointer</span>
       blt  x22, x20, Loop  <span class="hljs-comment">// compare to loop limit,branch if x20 &gt; x22</span></code></pre><blockquote><p>ä¸è¿›è¡Œå¾ªç¯å±•å¼€çš„é™æ€å¤šå‘å°„è°ƒåº¦ï¼š</p></blockquote><p><img src="https://image.beenli.cn/img/20200928/dGh2jYTva3bm.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><blockquote><p>å¾ªç¯å±•å¼€ç»“æœï¼š</p></blockquote><p><img src="https://image.beenli.cn/img/20200928/5Sd7gcLfIrQ5.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ul><li>åœ¨å¾ªç¯å±•å¼€è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨å¼•å…¥äº†å‡ ä¸ªä¸´æ—¶ç¼–è¯‘å™¨ï¼ˆx28ã€x29ã€x30ï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹å«åš<code>å¯„å­˜å™¨é‡å‘½å</code>: ç›®çš„æ˜¯æ¶ˆé™¤ä¸€äº›è™šå‡ä¾èµ–ã€‚</li><li>å¦‚æœæˆ‘ä»¬åªä½¿ç”¨x31å¯„å­˜å™¨ï¼šæˆ‘ä»¬å°†åœ¨sd x31,8(x20)åé¢é‡å¤ld x31,0(x20), add x31, x31, x21ã€‚ä½†æ˜¯è¿™äº›åºåˆ—å°½ç®¡éƒ½ä½¿ç”¨x31ï¼Œå®ƒä»¬å®é™…ä¸Šæ˜¯ä¸ç›¸å…³çš„ã€‚</li><li><code>antidependence</code> or <code>name dependence</code>(åç›¸å…³æˆ–åå­—ç›¸å…³)ï¼šä¸€ç»„æŒ‡ä»¤é›†å’Œä¸‹ä¸€ç»„æŒ‡ä»¤é›†ä¹‹é—´no data value flowï¼Œä»…ä»…æ˜¯å› ä¸ºé‡ç”¨å¯„å­˜å™¨åå¼•èµ·çš„ç›¸å…³ã€‚</li></ul><h1 id="Dynamic-multiple-issue"><a href="#Dynamic-multiple-issue" class="headerlink" title="Dynamic multiple-issue"></a>Dynamic multiple-issue</h1><p class="note note-primary">Dynamic multiple-issue processors are also known as <font color="blur">superscalar</font> processors, or simply superscalars</p><h2 id="Basic-concept"><a href="#Basic-concept" class="headerlink" title="Basic concept"></a>Basic concept</h2><p>æœ€ç®€å•çš„è¶…æ ‡é‡å¤„ç†å™¨ï¼šæŒ‡ä»¤æŒ‰é¡ºåºå‘å°„ï¼Œå¤„ç†å™¨å†³å®šæ¯ä¸ªå‘¨æœŸå‘å°„0æ¡ï¼Œ1æ¡æˆ–å¤šæ¡æŒ‡ä»¤ã€‚</p><p>æ˜¾ç„¶ä¸ºäº†è·å¾—å¥½çš„æ€§èƒ½ï¼Œå¤„ç†å™¨ä»ç„¶éœ€è¦ç¼–è¯‘å™¨å¸®å¿™ç¼–æ’æŒ‡ä»¤é¡ºåºæ¥å‡å°‘ä¾èµ–ã€‚</p><p>ç®€å•è¶…æ ‡é‡å¤„ç†å™¨ä¸VLIWå¤„ç†å™¨(é™æ€å‘å°„)çš„åŒºåˆ«ï¼š</p><ul><li>for superscalar:ï¼š1ã€ä¸ç®¡æ˜¯å¦ç»è¿‡ç¼–è¯‘å™¨ç¼–æ’æŒ‡ä»¤é¡ºåºï¼Œéƒ½ç”±ç¡¬ä»¶æ¥ä¿è¯æ‰§è¡Œçš„æ­£ç¡®æ€§âœ”ã€‚2ã€ç¼–è¯‘è¿‡çš„ä»£ç å°†å§‹ç»ˆæ­£ç¡®çš„è¿è¡Œï¼Œæ— è®ºå‘å°„é€Ÿç‡è¿˜æ˜¯æµæ°´çº¿æ¶æ„ã€‚</li><li>for VLIWï¼šä¸åƒğŸ‘†é‚£æ ·ï¼Œå½“ç§»æ¤åˆ°ä¸åŒçš„å¤„ç†å™¨æ¨¡å‹å¾€å¾€éœ€è¦é‡æ–°ç¼–è¯‘ã€‚åœ¨å…¶ä»–çš„é™æ€å‘å°„å¤„ç†å™¨ä¸­ï¼Œä»£ç èƒ½å¤Ÿåœ¨ä¸åŒçš„å¤„ç†å™¨å®ç°ä¸Šæ­£ç¡®è¿è¡Œï¼Œä½†æ˜¯æ•ˆç‡å¾ˆå·®ä¹Ÿéœ€è¦é‡æ–°ç¼–è¯‘ã€‚</li></ul><p>è®¸å¤šè¶…æ ‡é‡å¤„ç†å™¨æ‰©å±•äº†åŸºæœ¬çš„åŠ¨æ€å‘å°„ç­–ç•¥ï¼Œå°†<font color="blue">dynamic pipeline scheduling(åŠ¨æ€æµæ°´çº¿è°ƒåº¦)</font>åŒ…å«è¿›æ¥ã€‚</p><pre><code class="hljs c"><span class="hljs-comment">/*************** ä¸€ä¸ªç®€å•çš„ä¾‹å­ **************/</span>
ld  x31, <span class="hljs-number">0</span>(x21)
add  x1,  x31, x2
sub  x23, x23, x3
andi  x5,  x23, <span class="hljs-number">20</span></code></pre><blockquote><p><font color="red">è¯´æ˜</font>ï¼šå³ä½¿subæŒ‡ä»¤å‡†å¤‡å¥½æ‰§è¡Œï¼Œå®ƒä¹Ÿå¿…é¡»ç­‰å¾…ldå’ŒaddæŒ‡ä»¤å…ˆç»“æŸæ‰è¡Œã€‚å¦‚æœå†…å­˜å¾ˆæ…¢ï¼ŒsubæŒ‡ä»¤å¯èƒ½ä¼šç­‰å¾…å¤šä¸ªå‘¨æœŸï¼ˆæ¯”å¦‚cacheæ²¡æœ‰å‘½ä¸­ï¼‰</p></blockquote><h2 id="dynamic-pipeline-scheduling"><a href="#dynamic-pipeline-scheduling" class="headerlink" title="dynamic pipeline scheduling"></a>dynamic pipeline scheduling</h2><blockquote><p>Dynamic pipeline scheduling chooses which instructions to execute next, possibly reordering them to avoid stalls.<br><strong>åŠ¨æ€è°ƒåº¦å¯ä»¥è¿è¡Œæ—¶åŠ¨æ€è°ƒæ•´æŒ‡ä»¤é¡ºåº</strong></p></blockquote><p>æµæ°´çº¿è¢«åˆ†ä¸ºä¸‰ä¸ªä¸»è¦éƒ¨åˆ†ï¼š</p><ul><li>an instruction fetch and issue unitï¼ˆå–æŒ‡å‘å°„å•å…ƒ)</li><li>multiple functional unitsï¼ˆå¤šç§åŠŸèƒ½å•å…ƒï¼‰</li><li>commit unit(æäº¤å•å…ƒ)</li></ul><p><img src="https://image.beenli.cn/img/20200928/CiiibeQE7Kom.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><ol><li>æ¯ä¸ªåŠŸèƒ½å•å…ƒæœ‰ä¸ªbuffer, ç§°ä¸º<code>ä¿ç•™ç«™</code>ï¼ˆreservation station)ï¼Œå…¶ä¸­ä¿å­˜ç€æ“ä½œæ•°å’Œæ“ä½œ(opcode â“)ã€‚</li><li>åŠŸèƒ½å•å…ƒè¿ç®—å®Œæˆçš„ç»“æœä¼ é€ç»™1ã€commit unitï¼›2ã€æ—è·¯ç»™æ‰€éœ€çš„ä¿ç•™ç«™ã€‚</li><li>æäº¤å•å…ƒä¹Ÿæœ‰bufferï¼Œç§°ä¸º<code>reorder buffer</code>(é‡æ’åºç¼“å†²åŒº)ï¼šç¼“å­˜ç»“æœç›´åˆ°ç¡®å®šæ˜¯å®‰å…¨æ—¶æ‰å†™å…¥register fileæˆ–è€…memoryã€‚</li></ol><blockquote><p><strong>ä¿ç•™ç«™ç¼“å­˜æ“ä½œæ•°â•æäº¤å•å…ƒç¼“å­˜ç»“æœï¼ï¼ã€‹å¯„å­˜å™¨é‡å‘½å</strong></p><ul><li>å‘å°„æŒ‡ä»¤æ—¶ï¼Œå®ƒè¢«å¤åˆ¶åˆ°å¯¹åº”åŠŸèƒ½å•å…ƒçš„ä¿ç•™ç«™ä¸Šï¼Œå¦‚æœå®ƒçš„æ“ä½œæ•°åœ¨å¯„å­˜å™¨å †æˆ–è€…æäº¤å•å…ƒç¼“å†²åŒºä¸­æœ‰ï¼Œé‚£ä¹ˆæ“ä½œæ•°ç«‹é©¬å¤åˆ¶åˆ°ä¿ç•™ç«™ã€‚å¦‚æœæŒ‡ä»¤å·²ç»å‘å°„ï¼Œé‚£ä¹ˆå¯¹åº”æ“ä½œæ•°çš„å‰¯æœ¬ä¸å†éœ€è¦ï¼Œå¯ä»¥é‡å†™è¦†ç›–ã€‚</li><li>å¦‚æœä¸€ä¸ªæ“ä½œæ•°ä¸åœ¨register file or reorder bufferï¼Œä»–å¿…é¡»ç­‰å¾…æŸä¸ªåŠŸèƒ½å•å…ƒçš„ç»“æœã€‚ç¡¬ä»¶å¸®åŠ©è¿½è¸ªæ‰€éœ€çš„åŠŸèƒ½å•å…ƒï¼Œå½“å•å…ƒè®¡ç®—å‡ºç»“æœç›´æ¥å¤åˆ¶åˆ°ä¿ç•™ç«™è€Œæ—è·¯æ‰å¯„å­˜å™¨å †ã€‚</li></ul></blockquote><p><code>out-of-order execution</code>(ä¹±åºæ‰§è¡Œ)ï¼šå¤„ç†å™¨åœ¨ä¸è¿èƒŒåŸæœ‰æ•°æ®æµé¡ºåºçš„å‰æä¸‹ä»¥æŸç§é¡ºåºæ‰§è¡Œå„æ¡æŒ‡ä»¤ï¼Œä½†æ˜¯æ‰§è¡ŒæŒ‡ä»¤çš„é¡ºåºå¯ä»¥ä¸å–æŒ‡ä¸åŒã€‚</p><p><code>in-order commit</code>(é¡ºåºæäº¤)ï¼šæµæ°´çº¿æ‰§è¡Œçš„ç»“æœä»¥å–æŒ‡é¡ºåºå†™å›ç¨‹åºå‘˜å¯è§çš„å¯„å­˜å™¨çš„ä¸€ç§æäº¤æ–¹å¼ã€‚ï¼ˆå½“å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œå¤„ç†å™¨å¯ä»¥æ‰¾åˆ°æœ€åæ‰§è¡Œçš„é‚£æ¡æŒ‡ä»¤ï¼Œè€Œåªæœ‰è¿™æ¡å¯¼è‡´å¼‚å¸¸çš„æŒ‡ä»¤ä¹‹å‰çš„æŒ‡ä»¤æ‰èƒ½å¯¹å¯„å­˜å™¨çŠ¶æ€è¿›è¡Œæ”¹å˜ã€‚</p><p><a href="#spec">æ¨æµ‹</a>å’ŒåŠ¨æ€è°ƒåº¦ç»å¸¸ç»“åˆåœ¨ä¸€èµ·ï¼š</p><ul><li>é€šè¿‡å¯¹åˆ†æ”¯çš„é¢„æµ‹ï¼ŒåŠ¨æ€è°ƒåº¦å¯ä»¥åœ¨æ¨æµ‹æ–¹å‘ä¸Šè¿›è¡Œå–æŒ‡å’Œæ‰§è¡Œã€‚ç”±äºæŒ‡ä»¤æ˜¯é¡ºåºæäº¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ†æ”¯æŒ‡ä»¤åŠæ‰€æœ‰æ¨æµ‹æ‰§è¡Œçš„æŒ‡ä»¤æäº¤å‰çŸ¥é“æ¨æµ‹æ˜¯å¦å‡†ç¡®ã€‚</li><li>é€šè¿‡å¯¹è£…è½½æŒ‡ä»¤ç›®çš„åœ°å€çš„é¢„æµ‹ï¼Œå¯¹å­˜å–æŒ‡ä»¤è¿›è¡Œé‡æ’åºå’Œåˆ©ç”¨æäº¤å•å…ƒé¿å…é”™è¯¯çš„æ¨æµ‹ã€‚</li></ul><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>CS</category>
        <category>Computer Organization &amp; Design</category>
      </categories>
      <tags>
        <tag>processor</tag>
      </tags>
  </entry>
  <entry>
    <title>è¶…å‰è¿›ä½åŠ æ³•å™¨</title>
    <url>/posts/1aa82b80/</url>
    <content><![CDATA[<h2 id="1ã€1bitå…¨åŠ å™¨"><a href="#1ã€1bitå…¨åŠ å™¨" class="headerlink" title="1ã€1bitå…¨åŠ å™¨"></a>1ã€1bitå…¨åŠ å™¨</h2><script type="math/tex;mode=display">S = A\oplus B \oplus C_{in}</script><script type="math/tex;mode=display">C_{out} = AB + (A \oplus B)C_{in}</script><p><img src="http://image.beenli.cn/img/20200428/N0IQvruhWdNO.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><h2 id="2ã€4bitè¡Œæ³¢åŠ æ³•å™¨"><a href="#2ã€4bitè¡Œæ³¢åŠ æ³•å™¨" class="headerlink" title="2ã€4bitè¡Œæ³¢åŠ æ³•å™¨"></a>2ã€4bitè¡Œæ³¢åŠ æ³•å™¨</h2><p><img src="http://image.beenli.cn/img/20200428/MPLTV6H2PHyh.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><blockquote><p>å¯ä»¥çœ‹åˆ°è¦å¾—åˆ°æœ€åçš„è¿›ä½è¦ç»è¿‡9ä¸ªé—¨çš„å»¶æ—¶ã€‚</p></blockquote><h2 id="3ã€4bitè¶…å‰è¿›ä½åŠ æ³•å™¨"><a href="#3ã€4bitè¶…å‰è¿›ä½åŠ æ³•å™¨" class="headerlink" title="3ã€4bitè¶…å‰è¿›ä½åŠ æ³•å™¨"></a>3ã€4bitè¶…å‰è¿›ä½åŠ æ³•å™¨</h2><script type="math/tex;mode=display">è¿›ä½äº§ç”Ÿä¿¡å·:g_i = A_iB_i</script><script type="math/tex;mode=display">è¿›ä½ä¼ è¾“ä¿¡å·:p_i = A_i\oplus B_i</script><script type="math/tex;mode=display">åˆ™ï¼šS_i = p_i \oplus c_i</script><script type="math/tex;mode=display">C_{i+1} = p_ic_i + g_i\quad(c_o = c_{in})</script><p class="note note-primary">åˆ¤æ–­è¿›ä½çš„æ­¥éª¤:</p><ol><li>å¦‚æœ $g_i$=1 (å…¶ä»–ä¸ç”¨çœ‹è‚¯å®šä¼šè¿›ä½)</li><li>å¦‚æœ $g_i$=0ï¼›çœ‹ä¼ è¾“ä¿¡å·$p_i$ã€‚</li><li>å¦‚æœ $p_i$=0; é‚£ä¸ç”¨çœ‹ï¼Œå·²ç»å¦å†³äº†è¿›ä½</li><li>å¦‚æœ $p_i$=1; é‚£ä¹ˆç”¨åŒæ ·çš„æ–¹æ³•çœ‹ä¸‹ä¸€ä½æ˜¯å¦æœ‰è¿›ä½</li></ol><p></p><p class="note note-primary">åˆ¤æ–­ç»“æœçš„æ­¥éª¤: åªéœ€æŠŠä¼ è¾“ä¿¡å·ä¸è¿›ä½ä¿¡å·å¼‚æˆ–ã€‚</p><p><img src="http://image.beenli.cn/img/20200428/Lih1DmjLOgFB.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><p>åŒ–ç®€å¾—åˆ°ï¼š</p><script type="math/tex;mode=display">c_1 = g_0 + p_oc_0(3ä¸ªé—¨å»¶æ—¶)</script><script type="math/tex;mode=display">c_2 = g_1 + g_0p_1 + p_1p_0c_0(3ä¸ªé—¨å»¶æ—¶)</script><script type="math/tex;mode=display">c_3 = g_2 + p_2g_1 + p_2p_1g_0 + p_2p_1p_0c_0(3ä¸ªå»¶æ—¶)</script><script type="math/tex;mode=display">c_4 = g_3 + p_3g_2 + p_3p_2g_1 + p_3p_2p_1g_0 + p_3p_2p_1p_0c_0</script><blockquote><p>ğŸ‘‡ä¸‹é¢æ˜¯ç»è¿‡ç»¼åˆå™¨ä¼˜åŒ–é—¨ä¸ªæ•°åçš„å›¾ã€‚å¯ä»¥æ˜æ˜¾çœ‹åˆ°è™½ç„¶é—¨ä¸ªæ•°å‡å°‘ä½†æ˜¯å»¶æ—¶å˜é•¿ã€‚</p></blockquote><p><img src="http://image.beenli.cn/img/20200428/abseSUENAM06.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><h2 id="4ã€è¶…å‰è¿›ä½åŠ æ³•å™¨çº§è”"><a href="#4ã€è¶…å‰è¿›ä½åŠ æ³•å™¨çº§è”" class="headerlink" title="4ã€è¶…å‰è¿›ä½åŠ æ³•å™¨çº§è”"></a>4ã€è¶…å‰è¿›ä½åŠ æ³•å™¨çº§è”</h2><script type="math/tex;mode=display">pp = p[0] \& p[1] \& p[2] \& p[3](ä¼ è¾“ä¿¡å·)</script><script type="math/tex;mode=display">gg = c_4(è¿›ä½ä¿¡å·)</script><p><code>pp</code>ï¼š ä»£è¡¨ç›¸åŠ ç»“æœä¸º1111çš„æ—¶å€™ã€‚é‚£ä¹ˆä½ä¸€çº§è¦æ˜¯æœ‰è¿›ä½ï¼Œä¼ åˆ°æˆ‘è¿™ä¸€çº§ï¼Œä¼šäº§ç”Ÿæƒ³ä¸Šä¸€çº§çš„è¿›ä½ã€‚</p><pre><code class="hljs verilog"><span class="hljs-comment">// Author: Wan Li</span>
<span class="hljs-comment">// time: 2020-04-28</span>
<span class="hljs-comment">// function: æŠŠ4ä¸ªè¶…å‰è¿›ä½ç»„æˆ16ä½çš„</span>
<span class="hljs-comment">// ---------------------------------------------------</span>

<span class="hljs-comment">/* `include "adder4.v" */</span>

<span class="hljs-keyword">module</span> adder_16(a, b, c_in, sum, c_out);
    <span class="hljs-keyword">input</span>[<span class="hljs-number">15</span>:<span class="hljs-number">0</span>] a, b;
    <span class="hljs-keyword">input</span> c_in;
    <span class="hljs-keyword">output</span>[<span class="hljs-number">15</span>:<span class="hljs-number">0</span>] sum;
    <span class="hljs-keyword">output</span> c_out;

    <span class="hljs-keyword">wire</span>[<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] p, g, c;
	
    <span class="hljs-keyword">assign</span> c[<span class="hljs-number">0</span>] = c_in;
    add4_head add1(<span class="hljs-variable">.a</span>(a[<span class="hljs-number">3</span>:<span class="hljs-number">0</span>]),   <span class="hljs-variable">.b</span>(b[<span class="hljs-number">3</span>:<span class="hljs-number">0</span>]),   <span class="hljs-variable">.ci</span>(c[<span class="hljs-number">0</span>]), <span class="hljs-variable">.s</span>(sum[<span class="hljs-number">3</span>:<span class="hljs-number">0</span>]), <span class="hljs-variable">.pp</span>(p[<span class="hljs-number">0</span>]), <span class="hljs-variable">.gg</span>(g[<span class="hljs-number">0</span>]));
    <span class="hljs-keyword">assign</span> c[<span class="hljs-number">1</span>] = g[<span class="hljs-number">0</span>] | (p[<span class="hljs-number">0</span>] &amp; c[<span class="hljs-number">0</span>]);
    add4_head add2(<span class="hljs-variable">.a</span>(a[<span class="hljs-number">7</span>:<span class="hljs-number">4</span>]),   <span class="hljs-variable">.b</span>(b[<span class="hljs-number">7</span>:<span class="hljs-number">4</span>]),   <span class="hljs-variable">.ci</span>(c[<span class="hljs-number">1</span>]), <span class="hljs-variable">.s</span>(sum[<span class="hljs-number">7</span>:<span class="hljs-number">4</span>]), <span class="hljs-variable">.pp</span>(p[<span class="hljs-number">1</span>]), <span class="hljs-variable">.gg</span>(g[<span class="hljs-number">1</span>]));
    <span class="hljs-keyword">assign</span> c[<span class="hljs-number">2</span>] = g[<span class="hljs-number">1</span>] | (p[<span class="hljs-number">1</span>] &amp; c[<span class="hljs-number">1</span>]);
    add4_head add3(<span class="hljs-variable">.a</span>(a[<span class="hljs-number">11</span>:<span class="hljs-number">8</span>]),  <span class="hljs-variable">.b</span>(b[<span class="hljs-number">11</span>:<span class="hljs-number">8</span>]),  <span class="hljs-variable">.ci</span>(c[<span class="hljs-number">2</span>]), <span class="hljs-variable">.s</span>(sum[<span class="hljs-number">11</span>:<span class="hljs-number">8</span>]), <span class="hljs-variable">.pp</span>(p[<span class="hljs-number">2</span>]), <span class="hljs-variable">.gg</span>(g[<span class="hljs-number">2</span>]));
    <span class="hljs-keyword">assign</span> c[<span class="hljs-number">3</span>] = g[<span class="hljs-number">2</span>] | (p[<span class="hljs-number">2</span>] &amp; c[<span class="hljs-number">2</span>]);
    add4_head add4(<span class="hljs-variable">.a</span>(a[<span class="hljs-number">15</span>:<span class="hljs-number">12</span>]), <span class="hljs-variable">.b</span>(b[<span class="hljs-number">15</span>:<span class="hljs-number">12</span>]), <span class="hljs-variable">.ci</span>(c[<span class="hljs-number">3</span>]), <span class="hljs-variable">.s</span>(sum[<span class="hljs-number">15</span>:<span class="hljs-number">12</span>]), <span class="hljs-variable">.pp</span>(p[<span class="hljs-number">3</span>]), <span class="hljs-variable">.gg</span>(g[<span class="hljs-number">3</span>]));
    <span class="hljs-keyword">assign</span> c_out = g[<span class="hljs-number">3</span>] | (p[<span class="hljs-number">3</span>] &amp; c[<span class="hljs-number">3</span>]);

<span class="hljs-keyword">endmodule</span></code></pre><p><img src="http://image.beenli.cn/img/20200428/REkvohU89K88.jpg?imageslim" srcset="/img/loading.gif" alt="mark"></p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>Digital IC</category>
        <category>verilog</category>
      </categories>
      <tags>
        <tag>circuits</tag>
      </tags>
  </entry>
</search>
